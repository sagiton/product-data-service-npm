(function (angular) {
    angular.module('pds.environment', []);
    angular.module('product-data-service', ['pds.catalog', 'pds.navigation', 'pds.environment', 'pds.search', 'pds.common', 'ui.router', 'ngSanitize']);
})(angular);

(function () { 
 return angular.module("pds.environment")
.constant("config", {
  "metaTags": {
    "siteName": "BoschTT"
  },
  "urlSchema": {
    "trailingSlash": false
  },
  "pdsPathPrefix": "/residential",
  "forceLanguage": null,
  "search": {
    "defaultImage": "default-search"
  }
});

})();

(function () { 
 return angular.module("pds.environment")
.constant("env", {
  "endPoint": {
    "productDataService": "https://dev02.sagiton.pl/catalog-service-dev/",
    "contentService": "https://services-rvw.kittelberger.net/content/",
    "searchService": "https://services.kittelberger.net/search/v1/",
    "ocsMediaEndpoint": "https://dev02.sagiton.pl/asset-service-dev/asset/"
  },
  "search": {
    "cmsChannelDiscriminator": "deCHCmsDiscriminator",
    "pdsChannelDiscriminator": "buderusPdsDiscriminator"
  }
});

})();

angular.module("pds.environment").run(["$templateCache", function($templateCache) {$templateCache.put("catalog.html","<catalog-template catalog-id=\"vm.catalogId\"><section ng-if=\"vm.catalog.showImage()\" class=\"section fs-keyvisual p-a-0\"><div class=\"slide\"><div class=\"slide-image slide-image-transparent-30\"><img class=\"img-responsive\" ng-src=\"{{vm.catalog.image.value | imageUrl: \'img-lg\'}}\" alt=\"{{vm.catalog.name.value}}\" title=\"{{vm.catalog.name.value}}\"></div><div class=\"slide-caption text-center\"><h1 class=\"hl-1 slide-title\" ng-if=\"vm.catalog.name\">{{vm.catalog.name.value}}</h1><p ng-if=\"vm.catalog.title\">{{vm.catalog.title.value}}</p></div></div></section><section class=\"section fs-headline\" ng-if=\"vm.catalog.description\"><div class=\"container-fluid text-center\"><div class=\"row\"><div class=\"col-md-10 col-md-offset-1\"><p>{{vm.catalog.description.value}}</p></div></div></div></section><section ng-if=\"vm.catalog.showTiles()\" class=\"section fs-four-column-media-teaser\"><div class=\"container-fluid\"><div class=\"flex-row\"><a class=\"card col-xs-6 col-sm-4 col-md-3\" ng-repeat=\"tile in vm.catalog.tiles\" ocs-navigate=\"tile.id.value\"><img class=\"card-img-top img-responsive img-widen\" ng-src=\"{{tile.image.value | imageUrl: \'img-sm\'}}\" alt=\"{{tile.name.value}}\" title=\"{{tile.name.value}}\"><div class=\"card-block\" ng-if=\"tile.title\" equalize-teaser-height><div class=\"card-title hl-4 text-wrap\">{{tile.title.value}}</div><p class=\"card-text\">{{tile.description.value}}</p></div><div class=\"card-block-link\"><span class=\"link-more\" translate=\"MORE.DETAILS\"></span></div></a></div></div></section><section ng-if=\"vm.catalog.showList()\" class=\"section fs-two-column-square-media-text\"><div class=\"container-fluid bg-grey-light\" ng-repeat=\"item in vm.catalog.list\"><div class=\"flex-row\"><div class=\"col-sm-4 col-media\"><div class=\"relative-container\" ng-if=\"item.new.value\"><div class=\"label-container small left\"><div class=\"label-wrapper-outer\"><div class=\"label-wrapper-inner\"><div class=\"label-content\" translate=\"NEW.LABEL\"></div></div></div></div></div><img class=\"img-responsive img-widen\" ng-src=\"{{item.image.value | imageUrl: \'img-md\'}}\" alt=\"{{item.name.value}}\" title=\"{{item.name.value}}\"></div><div class=\"col-sm-8 col-text\"><div class=\"hl-3 column-title text-primary\"><a ocs-navigate=\"item.id.value\">{{item.title.value}}</a></div><ul class=\"checklist\" ng-if=\"item.bullets.length\"><li ng-repeat=\"bullet in item.bullets\">{{bullet}}</li></ul><ul class=\"list-inline button-list\"><li><a class=\"btn btn-primary\" ocs-navigate=\"item.id.value\"><span translate=\"MORE.DETAILS\"></span></a></li></ul></div></div></div></section><section ng-if=\"vm.catalog.showTeaser()\" class=\"section fs-two-column-media-text-with-logo bg-grey\"><div class=\"container-fluid\"><div class=\"row\" ng-if=\"vm.catalog.new.value\"><div class=\"relative-container\"><div class=\"label-container large right\"><div class=\"label-wrapper-outer\"><div class=\"label-wrapper-inner\"><div class=\"label-content\" translate=\"NEW.LABEL\"></div></div></div><div class=\"label-wrapper-outer\"><img class=\"\" ng-src=\"{{vm.catalog.newImage}}\" alt=\"\" title=\"\"></div></div></div></div><div class=\"row\"><div class=\"col-sm-6 col-media\"><div class=\"js-slick-slider slick-image-slider\" data-slick=\'{\"arrows\": false, \"dots\": true, \"autoplay\": true, \"autoplaySpeed\": 4000, \"speed\": 1000, \"cssEase\": \"ease-in-out\"}\'><div class=\"slide\"><img class=\"img-responsive img-widen\" ng-src=\"{{vm.catalog.image.value | imageUrl: \'img-md\'}}\" alt=\"{{vm.catalog.name.value}}\" title=\"{{vm.catalog.name.value}}\"> <img class=\"img-overlay\" ng-if=\"vm.catalog.energyEfficiency.image\" ng-src=\"{{vm.catalog.energyEfficiency.image.value}}\"></div></div></div><div class=\"col-sm-6 col-text\"><h1 class=\"hl-2 product-name\">{{vm.catalog.name.value}}</h1><p>{{vm.catalog.title.value}}</p></div></div></div></section><section class=\"section fs-two-column-headline-text bg-grey-dark\" ng-if=\"vm.catalog.showTechnicalInformation()\"><div class=\"container-fluid\"><div class=\"row\"><div class=\"col-sm-4\"><h2 class=\"section-title\" translate=\"TECHNICAL.INFORMATION\"></h2></div><div class=\"col-sm-8\"><ul class=\"checklist\"><li ng-repeat=\"info in vm.catalog.technicalInformation\">{{info}}</li></ul></div></div></div></section><section class=\"section fs-two-column-icon-accordion\" ng-if=\"vm.catalog.showMoreDetails()\"><div class=\"container-fluid\"><h2 class=\"section-title text-primary text-center\">{{vm.catalog.moreDetails.title.value}}</h2><div id=\"acrd-872921587\" class=\"accordion panel-group m-b-0\" role=\"tablist\" aria-multiselectable=\"true\"><div class=\"panel\" ng-repeat=\"item in vm.catalog.moreDetails.elements\"><div id=\"acrd-872921587-heading-{{$index}}\" class=\"panel-heading\" role=\"tab\"><h3 class=\"panel-title\"><a class=\"collapsed\" role=\"button\" data-toggle=\"collapse\" data-parent=\"#acrd-872921587\" data-target=\"#acrd-872921587-panel-{{$index}}\" aria-controls=\"acrd-872921587-panel-{{$index}}\" aria-expanded=\"false\">{{item.title}}</a></h3></div><div id=\"acrd-872921587-panel-{{$index}}\" class=\"panel-collapse collapse\" role=\"tabpanel\" aria-labelledby=\"acrd-872921587-heading-{{$index}}\"><article class=\"panel-body article\"><p ng-if=\"!item.description.elements\" ng-bind-html=\"item.description | convertWhitespaces\"></p><ul ng-if=\"item.description.elements\"><li ng-repeat=\"el in item.description.elements\">{{el}}</li></ul><img ng-if=\"item.image\" class=\"img-responsive img-widen m-b-1\" ng-src=\"{{item.image | imageUrl}}\" alt=\"{{item.title}}\" title=\"{{item.title}}\"></article></div></div></div></div></section><section class=\"section fs-table-scrollable\" ng-if=\"vm.catalog.showTechnicalTable()\"><div class=\"container-fluid\"><h2 class=\"section-title text-primary text-center\" translate=\"TECHNICAL.DATA\"></h2><div class=\"row scrollable-table-wrapper\"><div class=\"col-xs-6 col-sm-4 col-md-3 p-r-0\"><a class=\"card card-sticky\"><table class=\"table js-data-table\" data-ordering=\"false\" data-paging=\"false\" data-searching=\"false\" data-info=\"false\" data-auto-width=\"false\" data-responsive=\"true\"><thead><tr><th class=\"table-center\">&nbsp;</th></tr></thead><tbody><tr ng-repeat=\"attribute in vm.catalog.table.attributes\"><td><span class=\"td-headline\">{{attribute.name}}</span></td></tr></tbody></table></a></div><div class=\"col-xs-6 col-sm-8 col-md-9 p-l-0\"><div class=\"js-slick-slider slick-content-slider js-full-width-slick-track\" data-slick=\'{\"arrows\": true, \"appendArrows\": \".scrollable-table-wrapper\", \"appendDots\": \".scrollable-table-wrapper\", \"dots\": true, \"infinite\": false, \"speed\": 500, \"cssEase\": \"ease-in-out\", \"slidesToShow\": 3, \"slidesToScroll\": 1, \"responsive\": [{ \"breakpoint\": 992, \"settings\": { \"arrows\": false, \"slidesToShow\": 2, \"slidesToScroll\": 2}}, { \"breakpoint\": 768, \"settings\": { \"arrows\": false, \"slidesToShow\": 1, \"slidesToScroll\": 1}}]}\'><div class=\"card\" ng-repeat=\"product in vm.catalog.table.products\"><table class=\"table js-data-table\" data-ordering=\"false\" data-paging=\"false\" data-searching=\"false\" data-info=\"false\" data-auto-width=\"false\" data-responsive=\"true\"><thead><tr><th class=\"table-center\">{{product.header}}</th></tr></thead><tbody><tr ng-repeat=\"attribute in product.attributes\" synchronize-height><td><span attribute-value=\"attribute\" attribute-alt=\"product.name\" attribute-title=\"product.name\"></span><span ng-if=\"attribute.unit != null\">{{attribute.unit}}</span></td></tr></tbody></table></div></div></div></div></div></section><section class=\"section\" ng-if=\"vm.catalog.showFootnotes()\"><div class=\"container-fluid\"><div class=\"row\"><div class=\"col-md-10\"><div class=\"footnotes\"><ol class=\"footnote-ordered-list\" ng-if=\"vm.catalog.footnotes.type == \'list\'\"><li ng-repeat=\"item in vm.catalog.footnotes.value.elements\">{{item}}</li></ol><p class=\"footnote-paragraph\" ng-if=\"vm.catalog.footnotes.type == \'string\'\">{{vm.catalog.footnotes.value}}</p></div></div></div></div></section></catalog-template>");
$templateCache.put("catalog3.html","<catalog-template catalog-id=\"vm.catalogId\"><div ng-repeat=\"section in vm.catalog.sections\"><div ng-init=\"$section = section.params\" ng-include=\"\'section-\' + section.name\"></div></div></catalog-template><script type=\"text/ng-template\" id=\"section-KEYVISUAL\"><section class=\"section fs-keyvisual p-a-0\">\n    <div class=\"slide\">\n        <div class=\"slide-image slide-image-transparent-30\">\n            <img class=\"img-responsive\" ng-src=\"{{$section.backgroundImgUrl | imageUrl: \'img-xlg\'}}\" alt=\"{{$section.name}}\" title=\"{{$section.name}}\">\n        </div>\n        <div class=\"slide-caption text-center\">\n            <h1 class=\"hl-1 slide-title\" ng-if=\"$section.title\">{{$section.title}}</h1>\n            <p ng-if=\"$section.subtitle\">{{$section.subtitle}}</p>\n        </div>\n    </div>\n</section></script><script type=\"text/ng-template\" id=\"section-CATEGORY_DESCRIPTION\"><section class=\"section fs-headline\" ng-if=\"$section.text\">\n    <div class=\"container-fluid text-center\">\n        <div class=\"row\">\n            <div class=\"col-md-10 col-md-offset-1\">\n                <p>{{$section.text}}</p>\n            </div>\n        </div>\n    </div>\n</section></script><script type=\"text/ng-template\" id=\"section-TILES\"><section class=\"section fs-four-column-media-teaser\" ng-if=\"$section.items.length\">\n    <div class=\"container-fluid\">\n        <div class=\"flex-row\">\n            <a class=\"card col-xs-6 col-sm-4 col-md-3\" ng-repeat=\"tile in $section.items\" ocs-navigate=\"tile.catalogId\">\n                <img class=\"card-img-top img-responsive img-widen\" ng-src=\"{{tile.imageUrl | imageUrl: \'img-md\'}}\" alt=\"{{tile.title}}\" title=\"{{tile.title}}\">\n                <div class=\"card-block\" ng-if=\"tile.title\" equalize-teaser-height>\n                    <div class=\"card-title hl-4\">{{tile.title}}</div>\n                    <p class=\"card-text\">{{tile.subtitle}}</p>\n                </div>\n                <div class=\"card-block-link\">\n                    <span class=\"link-more\" translate=\"MORE.DETAILS\"></span>\n                </div>\n            </a>\n        </div>\n    </div>\n</section></script><script type=\"text/ng-template\" id=\"section-LIST\"><section class=\"section fs-two-column-square-media-text\">\n    <div class=\"container-fluid bg-grey-light\" ng-repeat=\"item in $section.items\">\n        <div class=\"flex-row\">\n            <div class=\"col-sm-4 col-media\">\n                <div class=\"relative-container\" ng-if=\"item.new\">\n                    <div class=\"label-container small left\">\n                        <div class=\"label-wrapper-outer\">\n                            <div class=\"label-wrapper-inner\">\n                                <div class=\"label-content\" translate=\"NEW.LABEL\"></div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <img class=\"img-responsive img-widen\" ng-src=\"{{item.imageUrl | imageUrl: \'img-lg\'}}\" alt=\"{{item.title}}\" title=\"{{item.title}}\">\n            </div>\n            <div class=\"col-sm-8 col-text\">\n                <div class=\"product-type text-primary\" ng-if=\"item.type\">{{item.type}}</div>\n                <div class=\"hl-3 column-title text-primary\">\n                    <a ng-if=\"!item.detailsHidden\" ocs-navigate=\"item.catalogId\">{{item.title}}</a>\n                    <div ng-if=\"item.detailsHidden\">{{item.title}}</div>\n                </div>\n                <p ng-if=\"!vm.isArray(item.subtitle)\">{{item.subtitle}}</p>\n                <ul ng-if=\"vm.isArray(item.subtitle)\" class=\"children-list\">\n                    <li ng-repeat=\"bullet in item.subtitle\">{{bullet}}</li>\n                </ul>\n                <ul class=\"list-inline button-list\">\n                    <li>\n                        <a ng-if=\"!item.detailsHidden\" class=\"btn btn-primary\" ocs-navigate=\"item.catalogId\"><span translate=\"MORE.DETAILS\"></span></a>\n                    </li>\n                </ul>\n            </div>\n        </div>\n    </div>\n</section></script><script type=\"text/ng-template\" id=\"section-LIST_CARD\"><section class=\"section fs-two-column-media-text\" ng-repeat=\"item in $section.items\">\n    <div class=\"container-fluid\">\n        <div class=\"row\">\n            <a ng-if=\"!item.detailsHidden\" class=\"card\" ocs-navigate=\"item.catalogId\" ng-include=\"\'product-card-image\'\"></a>\n            <div ng-if=\"item.detailsHidden\" class=\"card\" ng-include=\"\'product-card-image\'\"></div>\n\n            <div class=\"col-sm-6 col-text\">\n                <a ng-if=\"!item.detailsHidden\" class=\"card\" ocs-navigate=\"item.catalogId\" ng-include=\"\'product-card-details\'\"></a>\n                <div ng-if=\"item.detailsHidden\" class=\"card\" ng-include=\"\'product-card-details\'\"></div>\n            </div>\n        </div>\n    </div>\n</section></script><script type=\"text/ng-template\" id=\"product-card-image\"><div class=\"col-sm-6 col-media\">\n        <div class=\"relative-container\" ng-if=\"item.new\">\n            <div class=\"label-container small left\">\n                <div class=\"label-wrapper-outer\">\n                    <div class=\"label-wrapper-inner\">\n                        <div class=\"label-content\" translate=\"NEW.LABEL\"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <img class=\"img-responsive img-widen\" ng-src=\"{{item.imageUrl | imageUrl: \'img-lg\'}}\" alt=\"{{item.title}}\" title=\"{{item.title}}\" />\n    </div></script><script type=\"text/ng-template\" id=\"product-card-details\"><div class=\"product-type text-primary\">{{item.type}}</div>\n    <div class=\"hl-3 product-name text-primary\">{{item.title}}</div>\n\n    <ul class=\"product-benefits\" ng-if=\"item.subtitle.length\">\n        <li ng-repeat=\"sub in item.subtitle\">{{sub}}</li>\n    </ul>\n    <div ng-if=\"!item.subtitle.length\">{{item.subtitle}}</div>\n\n    <a class=\"link-more\" ng-if=\"!item.detailsHidden\" ocs-navigate=\"item.catalogId\"><span translate=\"DETAILED_PRODUCT_DESCRIPTION\"></span>&nbsp;{{item.title}}</a></script><script type=\"text/ng-template\" id=\"section-PRODUCT_HEADER\"><section class=\"section fs-two-column-media-text-with-logo bg-grey\">\n    <div class=\"container-fluid\">\n        <div class=\"row\" ng-if=\"$section.new\">\n            <div class=\"relative-container\">\n                <div class=\"label-container large right\">\n                    <div class=\"label-wrapper-outer\">\n                        <div class=\"label-wrapper-inner\">\n                            <div class=\"label-content\" translate=\"NEW.LABEL\"></div>\n                        </div>\n                    </div>\n                    <div class=\"label-wrapper-outer\">\n                        <img class=\"\" ng-src=\"{{vm.catalog.newImage}}\" alt=\"\" title=\"\">\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class=\"row\">\n            <div class=\"col-sm-6 col-media\">\n                <div class=\"js-slick-slider slick-image-slider\"\n                     data-slick=\'{\"arrows\": false, \"dots\": true, \"autoplay\": true, \"autoplaySpeed\": 4000, \"speed\": 1000, \"cssEase\": \"ease-in-out\"}\'>\n                    <div class=\"slide\">\n                        <img class=\"img-responsive img-widen\" ng-src=\"{{$section.productImgUrl | imageUrl: \'img-lg\'}}\" alt=\"{{$section.productName}}\" title=\"{{$section.productName}}\">\n                        <img class=\"img-overlay\" ng-if=\"$section.energyEfficiency.image\" ng-src=\"{{$section.energyEfficiency.image}}\" />\n                    </div>\n                </div>\n            </div>\n            <div class=\"col-sm-6 col-text\">\n                <h1 class=\"hl-2 product-name\">{{$section.productName}}</h1>\n                <p>{{$section.subtitle}}</p>\n            </div>\n        </div>\n    </div>\n</section></script><script type=\"text/ng-template\" id=\"section-TECHNICAL_INFORMATION\"><section class=\"section fs-two-column-headline-text bg-grey-dark bg-blue\">\n    <div class=\"container-fluid\">\n        <div class=\"row\">\n            <div class=\"col-sm-3\">\n                <div class=\"hl-3 section-title\">\n                    <span ng-if=\"$section.title\">{{$section.title}}</span>\n                    <span ng-if=\"!$section.title\" translate=\"TECHNICAL.INFORMATION\"></span>\n                </div>\n                <a ng-if=\"$section.link\" class=\"link-more\" ng-href=\"{{$section.link | imageUrl}}\" target=\"_blank\">{{\'PRODUCT.LEAFLET\' | translate}}</a>\n            </div>\n            <div class=\"col-sm-offset-1 col-sm-8\">\n                <!--TODO Style depending on consumer (checklist, bullets)-->\n                <ul class=\"technical-information-list\" ng-if=\"$section.list\">\n                    <li ng-repeat=\"info in $section.list\">{{info}}</li>\n                </ul>\n                <span ng-if=\"$section.description\" ng-bind-html=\"$section.description\"></span>\n            </div>\n        </div>\n    </div>\n</section></script><script type=\"text/ng-template\" id=\"section-MORE_INFORMATION\"><section class=\"section fs-two-column-icon-accordion\">\n    <div class=\"container-fluid\">\n        <h2 class=\"section-title text-primary text-center\">{{$section.headlineDetails}}</h2>\n        <div id=\"acrd-872921587\" class=\"accordion panel-group m-b-0\" role=\"tablist\" aria-multiselectable=\"true\">\n            <div class=\"panel\" ng-repeat=\"item in $section.items\">\n                <div id=\"acrd-872921587-heading-{{$index}}\" class=\"panel-heading\" role=\"tab\">\n                    <h3 class=\"panel-title\">\n                        <a class=\"collapsed\" role=\"button\" data-toggle=\"collapse\" data-parent=\"#acrd-872921587\" data-target=\"#acrd-872921587-panel-{{$index}}\"\n                           aria-controls=\"acrd-872921587-panel-{{$index}}\" aria-expanded=\"false\">\n                            {{item.subHeadline}}\n                        </a>\n                    </h3>\n                </div>\n                <div id=\"acrd-872921587-panel-{{$index}}\" class=\"panel-collapse collapse\" role=\"tabpanel\" aria-labelledby=\"acrd-872921587-heading-{{$index}}\">\n                    <article class=\"panel-body article\">\n                        <p ng-if=\"!vm.isArray(item.description)\" ng-bind-html=\"item.description\"></p>\n                        <ul ng-if=\"vm.isArray(item.description)\">\n                            <li ng-repeat=\"el in item.description\">{{el}}</li>\n                        </ul>\n                        <img ng-if=\"item.imageUrl\" class=\"img-responsive img-widen m-b-1\" ng-src=\"{{item.imageUrl | imageUrl}}\"\n                             alt=\"{{item.title}}\" title=\"{{item.title}}\" />\n                    </article>\n                </div>\n            </div>\n        </div>\n    </div>\n</section></script><script type=\"text/ng-template\" id=\"section-TECHNICAL_DATA_TABLE_SLIDER\"><section class=\"section fs-table-scrollable\" full-width-table>\n    <div class=\"container-fluid\">\n        <h2 class=\"section-title text-primary text-center\" translate=\"TECHNICAL.DATA\"></h2>\n        <div class=\"row scrollable-table-wrapper\">\n            <div class=\"col-xs-6 col-sm-4 col-md-3 p-r-0\">\n                <a class=\"card card-column card-sticky\">\n                    <table class=\"table js-data-table\" data-ordering=\"false\" data-paging=\"false\" data-searching=\"false\" data-info=\"false\" data-auto-width=\"false\" data-responsive=\"true\">\n                        <thead><tr><th class=\"table-center\">&nbsp;</th></tr></thead>\n                        <tbody>\n                        <tr ng-repeat=\"attribute in $section.tableDefinition\">\n                            <td><span class=\"td-headline\">{{attribute.value.name}}</span></td>\n                        </tr>\n                        </tbody>\n                    </table>\n                </a>\n            </div>\n            <div class=\"col-xs-6 col-sm-8 col-md-9 p-l-0\">\n                <div class=\"js-slick-slider slick-content-slider js-full-width-slick-track\"\n                     data-slick=\'{\"arrows\": true, \"appendArrows\": \".scrollable-table-wrapper\", \"appendDots\": \".scrollable-table-wrapper\",\n                      \"dots\": true, \"infinite\": false, \"speed\": 500, \"cssEase\": \"ease-in-out\", \"slidesToShow\": 3, \"slidesToScroll\": 1, \"responsive\": [\n                         { \"breakpoint\": 992, \"settings\": { \"arrows\": false, \"slidesToShow\": 2, \"slidesToScroll\": 2}},\n                         { \"breakpoint\": 768, \"settings\": { \"arrows\": false, \"slidesToShow\": 1, \"slidesToScroll\": 1}}\n                      ]}\'\n                     full-width-table>\n\n                    <div class=\"card card-column\" ng-repeat=\"product in $section.products\" scrollable-table-card>\n                        <table class=\"table js-data-table\" data-ordering=\"false\" data-paging=\"false\" data-searching=\"false\" data-info=\"false\"\n                               data-auto-width=\"false\" data-responsive=\"true\">\n                            <thead>\n                            <tr>\n                                <th class=\"table-center\">{{product.header.value}}</th>\n                            </tr>\n                            </thead>\n                            <tbody>\n\n                            <tr ng-repeat=\"attribute in $section.tableDefinition\" synchronize-height>\n                                <td ng-init=\"value = product[attribute.key] || {}\">\n                                    <span attribute-value=\"value\" attribute-alt=\"product.name\" attribute-title=\"product.name\"></span>\n                                    <span ng-if=\"attribute.value.unit\">{{attribute.value.unit}}</span>\n                                </td>\n                            </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</section></script><script type=\"text/ng-template\" id=\"section-TECHNICAL_DATA_TABLE\"><section class=\"section fs-table\">\n        <div class=\"container-fluid\">\n            <h2 class=\"hl-2 section-title text-primary text-center\" translate=\"TECHNICAL.DATA\"></h2>\n\n            <table ocs-data-table=\"$section.products\" odt-responsive-change=\"vm.responsiveChange($event, $table, $columns)\"\n                   ng-repeat=\"partition in $section.partitions\" class=\"table js-data-table\" data-ordering=\"false\"\n                   data-paging=\"false\" data-searching=\"false\" data-info=\"false\" data-auto-width=\"false\" data-responsive=\"true\">\n                <thead>\n                <tr>\n                    <th>&nbsp;</th>\n                    <th ng-repeat=\"header in partition\">{{header.title.value}}</th>\n                </tr>\n                </thead>\n                <tbody>\n                <tr ng-repeat=\"attribute in $section.tableDefinition\">\n                    <td>{{attribute.value.name}}&nbsp;</td>\n                    <td ng-repeat=\"product in partition\" ng-init=\"value = product[attribute.key]\">\n                        <span attribute-value=\"value\" attribute-alt=\"product.name\" attribute-title=\"product.name\"></span>\n                        <span ng-if=\"attribute.value.unit\">{{attribute.value.unit}}</span>\n                    </td>\n                </tr>\n                </tbody>\n            </table>\n        </div>\n    </section></script><script type=\"text/ng-template\" id=\"section-RELATED_PRODUCTS\"><section class=\"section fs-three-column-media-teaser bg-pattern\">\n    <div class=\"container-fluid\">\n        <h2 class=\"hl-2 section-title text-primary text-center\">{{::$section.title}}</h2>\n\n        <div class=\"flex-row js-slick-slider slick-content-slider\"\n             data-slick=\'{\"arrows\": false, \"dots\": true, \"infinite\": false, \"speed\": 1000, \"cssEase\": \"ease-in-out\", \"slidesToShow\": 3, \"slidesToScroll\": 3, \"responsive\": [{ \"breakpoint\": 992, \"settings\": { \"slidesToShow\": 2, \"slidesToScroll\": 2}}, { \"breakpoint\": 768, \"settings\": { \"slidesToShow\": 1, \"slidesToScroll\": 1}}]}\'>\n\n            <a ng-repeat=\"related in $section.products\" class=\"card col-xs-12 col-sm-6 col-md-4\" ocs-navigate=\"related.categoryId\">\n                <img class=\"card-img-top img-responsive img-widen\" ng-src=\"{{::related.componentImageUrl | imageUrl}}\" alt=\"{{related.productName}}\" title=\"{{related.productName}}\">\n                <div class=\"card-block\">\n                    <h3 class=\"hl-4 card-title\">{{::related.productName}}</h3>\n                    <span class=\"link-more\" translate=\"MORE.DETAILS\"></span>\n                </div>\n            </a>\n        </div>\n    </div>\n</section></script><script type=\"text/ng-template\" id=\"section-SEO_TEXT\"><section ng-if=\"$section.seoText\" class=\"section fs-category-text\">\n    <div class=\"container-fluid\">\n        <div class=\"row\">\n            <div ng-include=\"$section.seoText | imageUrl\"></div>\n        </div>\n    </div>\n</section></script><script type=\"text/ng-template\" id=\"section-FOOTNOTES\"><section class=\"section\">\n    <div class=\"container-fluid\">\n        <div class=\"row\">\n            <div class=\"col-md-10\">\n                <div class=\"footnotes\">\n                    <ol class=\"footnote-ordered-list\" ng-if=\"!vm.isArray($section.list) && $section.list\">\n                        <li>{{$section.list}}</li>\n                    </ol>\n                    <ol class=\"footnote-ordered-list\" ng-if=\"vm.isArray($section.list)\">\n                        <li ng-repeat=\"item in $section.list\">{{item}}</li>\n                    </ol>\n                    <p class=\"footnote-paragraph\" ng-if=\"$section.value\">{{$section.value}}</p>\n                    <p ng-if=\"$section.labels.system\" class=\"footnote-paragraph\" translate=\"ERP_SYSTEM_LABEL\"></p>\n                    <p ng-if=\"$section.labels.product\" class=\"footnote-paragraph\" translate=\"ERP_PRODUCT_LABEL\"></p>\n                    <p ng-if=\"$section.labels.boiler\" class=\"footnote-paragraph\" translate=\"B1_BOILER_LABEL\"></p>\n                </div>\n            </div>\n        </div>\n    </div>\n</section></script><script type=\"text/ng-template\" id=\"section-CATALOG_METADATA\"><catalog-metadata data=\"$section\"></catalog-metadata></script>");
$templateCache.put("component/navigation_menu.html","<span class=\"js-open-submenu icon-link-arrow-right visible-xs-block\"></span><a ocs-navigate=\"$ctrl.menu.id\" ng-bind=\"$ctrl.menu.name\">Produkte</a><ul simple-submenu class=\"nav submenu\" ng-if=\"$ctrl.menu.children.length\" ng-init=\"subLevel = $ctrl.menu.children\" ng-include=\"\'nav-level\'\"></ul><script type=\"text/ng-template\" id=\"nav-level\"><li ng-repeat=\"lvl in subLevel | limitTo: $ctrl.menu.maxNavigationItems as limitedLevel\">\n        <span ng-if=\"lvl.children.length\" class=\"js-open-submenu icon-link-arrow-right visible-xs-block\"></span>\n        <a target=\"_self\" ocs-navigate=\"lvl.id\">{{lvl.name}}</a>\n        <ul simple-submenu\n            class=\"nav submenu\"\n            ng-if=\"lvl.children.length\"\n            ng-init=\"subLevel = lvl.children\"\n            ng-include=\"\'nav-level\'\"></ul>\n    </li>\n    <li><a ng-if=\"limitedLevel.length < subLevel.length\" ocs-navigate=\"$parent.lvl.id\" class=\"btn btn-show hidden-xs hidden-sm no-animate\">Alles anzeigen</a></li></script>");
$templateCache.put("component/new_products.html","<section class=\"section fs-four-column-media-teaser\" ng-if=\"$ctrl.productsLoaded\"><div class=\"container-fluid text-center\"><div class=\"row\"><div class=\"col-md-10 col-md-offset-1\"><h2 class=\"section-title hl-3\" translate=\"NEW.HITS\"></h2></div></div></div><div class=\"container-fluid\"><slick class=\"flex-row js-slick-slider slick-content-slider\" settings=\"$ctrl.slickSettings\"><a class=\"card col-xs-6 col-sm-4 col-md-3 left no-animate\" ng-repeat=\"product in $ctrl.products\" ocs-navigate=\"product.id\"><div class=\"relative-container\"><div class=\"label-container small right\"><div class=\"label-wrapper-outer\"><div class=\"label-wrapper-inner\"><div class=\"label-content\" translate=\"NEW.LABEL\"></div></div></div></div></div><img class=\"card-img-top img-responsive img-widen\" ng-src=\"{{product.image | imageUrl}}\" alt=\"{{product.name}}\" title=\"{{product.name}}\"><div class=\"card-block\" ng-if=\"product.name\" equalize-teaser-height><h3 class=\"card-title hl-4 text-wrap\">{{product.name}}</h3><p class=\"card-text\">{{product.description}}</p><span class=\"link-more\" translate=\"MORE.DETAILS\"></span></div></a></slick></div></section>");
$templateCache.put("component/quick_search.html","<form id=\"header-search\" method=\"post\" role=\"search\" ng-submit=\"$ctrl.doSearch()\"><div class=\"form-group has-feedback\"><input active-search type=\"search\" class=\"form-control\" ng-model=\"$ctrl.quicksearch\" ng-model-options=\"{debounce: 200}\" typeahead-wait-ms=\"100\" typeahead-focus-first=\"false\" typeahead-on-select=\"$ctrl.goTo($item)\" ng-change=\"$ctrl.suggest()\" uib-typeahead=\"result as result.name for result in $ctrl.suggest()\" typeahead-loading=\"load\" placeholder=\"{{\'SEARCH.PLACEHOLDER\' | translate}}\"><span class=\"form-control-feedback icon-search\" aria-hidden=\"true\"></span><button hidden type=\"submit\"><i class=\"icon-search\"></i></button></div></form>");
$templateCache.put("component/search.html","<section class=\"section fs-search-field bg-grey\"><div class=\"container-fluid\"><h2 class=\"section-title hl-1 text-center\" translate=\"SEARCH.TERM\"></h2><form method=\"post\" role=\"form\"><div class=\"form-group has-feedback\"><input ng-keypress=\"$ctrl.onSearchInput($event)\" ng-model=\"$ctrl.searchTerm\" type=\"search\" class=\"form-control\" placeholder=\"{{\'SEARCH.PLACEHOLDER\' | translate}}\"><span class=\"form-control-feedback icon-search\" aria-hidden=\"true\"></span></div></form></div></section><section ng-if=\"$ctrl.totalLength === 0\" class=\"section fs-headline\"><div class=\"container-fluid\"><div class=\"row\"><div class=\"col-md-10\"><h4 class=\"hl-4 section-title\" translate=\"SEARCH.NO.RESULT.HEADLINE\" translate-values=\"{searchTerm: $ctrl.searchTerm}\"></h4><ul class=\"checklist margin-top\"><li ng-bind-html=\"$ctrl.contactText\"></li></ul></div></div></div></section><section ng-controller=\"ContentController as vm\" ng-if=\"$ctrl.totalLength === false\"><div class=\"loading-spinner loading-white\"><img src=\"/media/images/ajax-loader.gif\" class=\"spinner\"></div></section><section ng-if=\"$ctrl.totalLength > 0\" class=\"section fs-search-results js-waypoint-start\"><div class=\"container-fluid\"><div class=\"flex-row js-waypoint-end\"><div class=\"col-xs-12 col-md-4\"><nav hl-sticky offset-top=\"100\" id=\"nav-search-results\" class=\"hidden-print hidden-xs hidden-sm\"><h3 class=\"hl-4 m-t-0\" translate=\"SEARCH.QUICKNAVIGATION\"></h3><ul class=\"nav\"><li ng-repeat=\"(group, results) in $ctrl.finalSearchResults\"><a ng-click=\"$ctrl.goToAnchor(group)\"><span translate=\"SEARCH.CHANNEL.{{group}}\"></span>&nbsp;<span class=\"search-results-count\">({{results.length}})</span></a></li></ul></nav></div><div class=\"col-xs-12 col-md-8\"><div id=\"search-results\"><div class=\"search-results-header hidden-md hidden-lg\"><div class=\"dropdown\"><a class=\"hl-3 dropdown-toggle\" data-toggle=\"dropdown\" role=\"button\" aria-haspopup=\"true\" aria-expanded=\"false\">{{\'SEARCH.TOTAL.COUNT\' | translate}}<span class=\"search-results-count\">({{$ctrl.totalLength}})</span></a><ul id=\"nav-search-results-dropdown\" class=\"dropdown-menu\"><li class=\"active\"><a>{{\'SEARCH.TOTAL.COUNT\' | translate}}<span class=\"search-results-count\">({{$ctrl.totalLength}})</span></a></li><li ng-repeat=\"(group, results) in $ctrl.finalSearchResults\"><a ng-click=\"$ctrl.goToAnchor(group)\"><span translate=\"SEARCH.CHANNEL.{{group}}\"></span>&nbsp;<span class=\"search-results-count\">({{results.length}})</span></a></li></ul></div></div><div ng-repeat=\"(group, results) in $ctrl.finalSearchResults\" ng-if=\"results.length > 0\" id=\"{{group}}\" class=\"search-results-category\"><div class=\"category-header hidden-xs hidden-sm\"><h3><span translate=\"SEARCH.CHANNEL.{{group}}\"></span>&nbsp;<span class=\"search-results-count\">({{results.length}})</span></h3></div><div class=\"search-result media\" ng-repeat=\"item in results track by $index\"><div class=\"media-left\"><a><img src class=\"media-object\" http-src=\"item.imageUrl\" alt=\"{{item.name}}\" title=\"{{item.name}}\"></a></div><div class=\"media-body\"><h4 class=\"media-heading\">{{item.name}}</h4><p>{{item.text}}</p><a ng-click=\"$ctrl.goMore(item, group)\" class=\"link-more\" translate=\"MORE.DETAILS\"></a></div></div></div></div></div></div></div></section>");}]);
(function (angular) {
    angular.module('pds.common.route', ['ui.router', 'ncy-angular-breadcrumb', 'pds.environment']);
    angular.module('pds.common.service', []);
    angular.module('pds.common.config', ['pascalprecht.translate']);
    angular.module('pds.common.controller', ['ngAnimate', 'ngSanitize', 'datatables', 'hl.sticky', 'dcbImgFallback', 'slickCarousel']);
    angular.module('pds.common.model', []);
    angular.module('pds.common.factory', []);
    angular.module('pds.common.directive', []);
    angular.module('pds.common.filter', ['pds.environment']);
    angular.module('pds.common', ['pds.common.controller', 'pds.common.route', 'pds.common.service', 'pds.common.config', 'pds.common.model', 'pds.common.directive']);
})(angular);

(function (angular) {
    angular
        .module('pds.common.controller')
        .controller('ContentController', ContentController);

    ContentController.$inject = ['SpinnerService'];

    function ContentController(spinnerService) {
        var vm = this;

        vm.isSpinning = spinnerService.isLoading;
    }

})(angular);

(function (angular) {
    angular
        .module('pds.common.controller')
        .controller('headerController', HeaderController);

    HeaderController.$inject = ['$scope', '$location', 'locale', 'config', 'jsonFilter', '_', 'BreadcrumbService'];
    var contentGroups = ['WT.cg_n', 'WT.cg_s', 'WT.z_cg3', 'WT.z_cg4', 'WT.z_cg5', 'WT.z_cg6', 'WT.z_cg7', 'WT.z_cg8', 'WT.z_cg9', 'WT.z_cg10'];

    function HeaderController($scope, $location, locale, config, jsonFilter, _, BreadcrumbService) {
        var rootContentGroup = {name: config.metaTags.siteName};
        var vm = this;
        vm.url = $location.absUrl();
        vm.locale = locale.toString();
        vm.brand = config.metaTags.brand;
        vm.country = locale.country;
        vm.language = locale.language;

        $scope.$on('pds.header.update', function (event, params) {
            vm.title = params.title;
            vm.description = params.description;
            vm.image = params.image;
            vm.webTrends = params.webTrends;
            vm.siteName = params.siteName;
            vm.canonicalUrl = params.canonicalUrl;
        });

        $scope.$on('pds.header.update', function (event, params) {
            buildJsonLD({
                "@context": "http://schema.org/",
                "@type": "Product",
                "name" : params.title,
                "image": params.image,
                "description": params.description,
                "brand": config.metaTags.siteName
            });
        });

        //FIXME
        $scope.$on('pds.breadcrumb.update', function (event, params) {
            BreadcrumbService
                .build(params.catalogId)
                .then(function (breadcrumbs) {
                    buildJsonLD({
                        "@context": "http://schema.org/",
                        "@type": "BreadcrumbList",
                        "itemListElement": _.map(breadcrumbs, function (crumb, index) {
                            return {
                                '@type': 'ListItem',
                                position: index,
                                item: {
                                    '@id': crumb.url,
                                    name: crumb.name
                                }
                            }
                        })
                    });
                    return breadcrumbs;
                })
                .then(buildContentGroups);
        });

        function buildJsonLD(model) {
            angular
                .element('<script>')
                .attr('type', 'application/ld+json')
                .text(jsonFilter(model))
                .appendTo('head');
        }

        function buildContentGroups(tree) {
            tree.unshift(rootContentGroup);
            _.forEach(tree, function (element, idx) {
                addMeta(contentGroups[idx], element.name);
            });
        }


        function addMeta(name, content) {
            angular
                .element('meta[name="' + name + '"')
                .remove();
            angular
                .element('<meta>')
                .attr('name', name)
                .attr('content', content)
                .appendTo('head');
        }
    }

})(angular);

(function (angular) {
    angular
        .module('pds.common.controller')
        .controller('jsonLdController', JsonLdController);

    JsonLdController.$inject = ['$scope', '$location', 'BreadcrumbService', 'CatalogService', 'jsonFilter'];

    function JsonLdController($scope, $location, BreadcrumbService, CatalogService, jsonFilter) {
        var vm = this;
        vm.url = $location.absUrl();


    }

})(angular);

(function (angular, $) {
    angular
        .module('pds.common.config')
        .config(function () {
            $(document).ready(function () {
                $('a')
                    .filter(function (idx, el) {
                        return !$(el).attr('target');
                    })
                    .attr('target', '_self');
            })
        })
})(angular, $);

(function (angular, window) {
    angular
        .module('pds.common.config')
        .config(['$translateProvider', function ($translateProvider) {
            if (window.cmsTranslations) {
                $translateProvider
                    .translations('this', window.cmsTranslations)
                    .useSanitizeValueStrategy('sanitizeParameters')
                    .preferredLanguage('this')
                    .use('this');
            }
        }]);

})(angular, window);

(function (angular) {
    angular
        .module('pds.common.config')
        .provider('locale', LocaleProvider);


    function LocaleProvider() {
        var discoveryMethods = [];

        this.addDiscoveryMethod = function (method) {
            discoveryMethods.push(method);
            return this;
        };

        this.$get = ['_', function (_) {
            return new Locale(_, discoveryMethods);
        }];
    }

    function Locale(_, discoveryMethods) {
        var method = _.find(discoveryMethods, _.attempt);
        var result =  method ? method() : [];
        var country = result[1];
        var language = result[2];
        return {
            country: country,
            language: language,
            toString: function() {
                return this.language.toLowerCase() + "_" + this.country.toUpperCase();
            }
        };
    }
})(angular);

(function (angular) {
    angular
        .module('pds.common.config')
        .factory('_', ['$window', function ($window) {
            return $window._;
        }]);

})(angular);

(function (angular) {
    angular
        .module('pds.common.config')
        .factory('ocsChannel', OcsChannel);

    function OcsChannel() {
        return angular.element('meta[name="ocs-channel"]').attr('content');
    }
})(angular);

(function (angular) {
    angular
        .module('pds.common.config')
        .config(['localeProvider', function (localeProvider) {
            var localeUrlPattern = /^\/([a-zA-Z]{2})\/([a-zA-Z]{2})/;
            localeProvider.addDiscoveryMethod(function () {
                return localeUrlPattern.exec(new URI().path());
            });
        }]);

})(angular);

(function (angular) {

    angular
        .module('pds.common.config')
        .decorator('$window', ['$delegate', WindowDecorator]);

    function WindowDecorator($delegate) {
        $delegate.navigate = function (uri) {
            if (uri.indexOf('/') != 0) {
                uri = '/'.concat(uri);
            }
            $delegate.location.href = getBasePath() + uri;
        };
        $delegate.getBasePath = function getBasePath() {
            var basePath = angular.element('base').attr('href-override');

            if (!basePath)
                basePath = angular.element('base').attr('href');

            if (basePath.lastIndexOf('/') == (basePath.length - 1)) {
                basePath = basePath.slice(0, basePath.length - 1);
            }
            return basePath;
        };
        return $delegate;
    }
})(angular);

(function (angular) {
    angular
        .module('pds.common.directive')
        .directive('cliplister', CliplisterDirective);

    CliplisterDirective.$inject = ['$filter', '$sce'];

    function CliplisterDirective($filter, $sce) {
        return {
            restrict: 'E',
            template: '<div id="video" style="height:400px;"></div>',
            scope: {
                videoId: '=videoId'
            },
            link: function(scope, element, attrs) {
                new CliplisterControl.Viewer({
                    parentId: "video",
                    customer: 157893,
                    assets: [scope.videoId],
                    keyType: 10000,
                    fsk: 18,
                    autoplay: false,
                    plugins: {
                        InnerControls: {
                            layer: 2,
                            mobileDefaultControls: true,
                            id: "controls",
                            blacklist: ["share","quality","playback-speed"],
                            template: {
                                type: "external",
                                source: "https://mycliplister.com/static/viewer/assets/skins/default/controls.html"
                            }
                        },
                        ClickableVideo: {layer: 1},
                        PlayButton: {
                            id: "playButton",
                            layer: 7,
                            image: "https://mycliplister.com/static/viewer/assets/skins/default/playButton.png",
                            width: 100,
                            height: 100
                        },
                        PreviewImage: {layer: 6}
                    }
                });
            },
            replace: true
        }
    };

})(angular);

(function (angular) {
    'use strict';

    angular
        .module('pds.common.directive')
        .directive('httpSrc', HttpSrc)

    var defaultImages = {
        'img-bg_BG': '/src/media/img_Default_BG_1.jpg',
        'img-es_ES': '/src/media/img_Default_ES_1.jpg',
        'img-hu_HU': '/src/media/img_Default_HU_1.jpg',
        'img-ro_RO': '/src/media/img_Default_RO_1.jpg'
    };
    var defaultLang = 'bg_BG'

    HttpSrc.$inject = ['_', '$http', 'locale'];

    function HttpSrc(_, $http, locale) {
        return {
            scope: {
                httpSrc: '='
            },
            link: link,
            restrict: 'A'
        };

        function link(scope, element, attrs) {

            if (!scope.httpSrc) {
                return defaultImage();
            }

            $http.get(scope.httpSrc)
                .then(function(response) {
                    attrs.$set('src', scope.httpSrc)
                })
                .catch(defaultImage)

            element.bind('error', defaultImage);

            function defaultImage() {
                var image = defaultImages['img-'+locale.toString()] || defaultImages['img-'+defaultLang]
                attrs.$set('src', image);
            }

        }

    }
})(angular);

(function (angular) {
    angular
        .module('pds.common.directive')
        .directive('jsonld', JsonLdDirective);

    JsonLdDirective.$inject = ['$filter', '$sce'];

    function JsonLdDirective($filter, $sce) {
        return {
            restrict: 'E',
            template: '<script type="application/ld+json" ng-bind-html="onGetJson()"></script>',
            scope: {
                json: '=json'
            },
            link: function(scope, element, attrs) {
                scope.onGetJson = function() {
                    return $sce.trustAsHtml($filter('json')(scope.json));
                }
            },
            replace: true
        }
    };

})(angular);

(function (angular) {
    angular
        .module('pds.common.directive')
        .directive('simpleSubmenu', function () {
            return {
                restrict: 'EA',
                link: function (scope, element, attrs) {
                    // initNavCollapse(element);
                    //
                    // function initNavCollapse(submenus) {
                    //     var backLabel = window.cmsTranslations && window.cmsTranslations.MOBILE_NAVIGATION_BACK;
                    //
                    //     submenus
                    //         .append('<li class="dl-back"><a>' + backLabel + '</a></li>')
                    //         .end()
                    //         .on('click', '.js-open-submenu', function (e) {
                    //             if (Kit.bIsXs) {
                    //                 $(this).parent('li').addClass('is-open').parent('ul').addClass('nav-expanded').closest('li.is-open').addClass('trail');
                    //             }
                    //         })
                    //         .on('click', 'li.dl-back', function (e) {
                    //             if (Kit.bIsXs) {
                    //                 $(this).closest('li.is-open').removeClass('is-open').parent('ul.nav-expanded').removeClass('nav-expanded').parent('li.trail').removeClass('trail');
                    //             }
                    //         })
                    //         .on('hidden.bs.collapse', function (e) {
                    //             Kit.reset_navPrimary();
                    //         })
                    //         .on('click', 'li', function () {
                    //             var ocsNav = $('#ocs-nav').find('ul.nav');
                    //             ocsNav.addClass('hidden');
                    //             setTimeout(ocsNav.removeClass.bind(ocsNav, 'hidden'), 500);
                    //         });
                    // };
                }
            }
        })

})(angular);

(function (angular) {
    angular
        .module('pds.common.filter')
        .filter('imageUrl', ImageUrlFilter);

    ImageUrlFilter.$inject = ['env', 'locale', 'ocsChannel'];

    var defaultImages = {
        'img-sm': '/src/media/default-460x460.jpg',
        'img-md': '/src/media/default-640x372.jpg',
        'img-lg': '/src/media/default-680x440.jpg',
        'img-xlg': '/src/media/default-1600x560.jpg'
    };

    function ImageUrlFilter(env, locale, ocsChannel) {
        return function (mediaObject, size) {
            return mediaObject ? env.endPoint.ocsMediaEndpoint + ocsChannel + "/" + locale.toString() + "/" + mediaObject : defaultImages[size || 'img-sm'];
        }
    }
})(angular);

(function (angular) {
    var CHARACTER_MAP = {
        '\u002E':   '',  //.
        '\u0020':   '-', //SPACE
        '\u002C':   '-', //,
        '\u0026':   '-', //&
        '\u005C':   '-', //\
        '\u201E':   '-', //„
        '\u0022':   '-', //'
        '\u0027':   '-', //'
        '\u00B4':   '-', //´
        '\u0060':   '-', //`
        '\u00BB':   '-', //»
        '\u00AB':   '-', //«
        '\u002F':   '-', ///
        '\u003A':   '-', //:
        '\u0021':   '-', //!
        '\u002A':   '-', //*
        '\u0028':   '-', //(
        '\u0029':   '-', //)
        '\u2122':   '-', //™
        '\u00AE':   '-', //®
        '\u00E1':   'a', //á
        '\u00F3':   'o', //ó
        '\u00ED':   'i', //í
        '\u00E9':   'e', //é
        '\u00E4':   'ae',//ä
        '\u00F6':   'oe',//ö
        '\u0151':   'o', //ő
        '\u00FC':   'u', //ü
        '\u00FA':   'u', //ú
        '\u0171':   'u', //ű
        '\u00DF':   'ss',//ß
        '\u00EE':   'i', //î
        '\u00E2':   'a', //â
        '\u0103':   'a', //ă
        '\u021B':   't', //ț
        '\u0163':   't', //ţ
        '\u015F':   't', //ş
        '\u0219':   's', //ș
        '\u0159':   'r', //ř
        '\u016f':   'u', //ů
        '\u00FD':   'y', //ý
        '\u010D':   'c', //č
        '\u011B':   'e', //ě
        '\u017E':   'z', //ž
        '\u0161':   's', //š
        '\u0165':   't', //ť
        '\u0148':   'n', //ň
        '\u2019':   '-', //’
        '\u00e0':   'a'  //à
    };
    var characterRegex = _
        .map(CHARACTER_MAP, function (val, key) {
            return '\\' + key;
        })
        .join('|');
    var regExp = new RegExp(characterRegex, 'g');

    angular
        .module('pds.common.filter')
        .filter('simplifyCharacters', ['_', function (_) {
            return function (val) {
                return val && val
                        .toLowerCase()
                        .replace(regExp, function (match) {
                            return CHARACTER_MAP[match];
                        });
            }
        }])

})(angular);

(function(angular) {
    angular
        .module('pds.common.route')
        .config(RouteConfig);

    RouteConfig.$inject = ['$stateProvider', '$locationProvider', 'config'];

    function RouteConfig($stateProvider, $locationProvider, config) {
        $locationProvider.html5Mode(true);
        $stateProvider.pdsRoute = function (route) {
            route.url = urlPath(route.url);
            $stateProvider.state(route);
        };

        function urlPath(path) {
            return config.pdsPathPrefix + '/' + path;
        }

    }
})(angular);

(function (angular) {
    angular
        .module('pds.common.service')
        .service('SpinnerService', SpinnerService);

    SpinnerService.$inject = ['$http'];

    function SpinnerService($http) {
        var self = this;

        self.isLoading = function () {
            return $http.pendingRequests.length > 0;
        }

    }

})(angular);

(function (angular) {
    angular.module('pds.catalog.route', ['pds.common.route', 'ui.router', 'ncy-angular-breadcrumb']);
    angular.module('pds.catalog.service', ['pds.common.filter']);
    angular.module('pds.catalog.config', ['pds.environment', 'ngResource', 'pds.common.config']);
    angular.module('pds.catalog.controller', ['ngSanitize', 'datatables', 'hl.sticky', 'dcbImgFallback', 'slickCarousel', 'pds.catalog.service', 'pds.catalog.directive', 'pds.navigation.service']);
    angular.module('pds.catalog.model', []);
    angular.module('pds.catalog.factory', ['pds.catalog.service']);
    angular.module('pds.catalog.directive', []);
    angular.module('pds.catalog', ['pds.catalog.controller', 'pds.catalog.route', 'pds.catalog.service', 'pds.catalog.config', 'pds.catalog.model']);
})(angular);

(function (angular) {
  angular.module('pds.navigation.route', ['ui.router']);
  angular.module('pds.navigation.service', ['pds.navigation.model', 'pds.common.service']);
  angular.module('pds.navigation.config', []);
  angular.module('pds.navigation.controller', ['pds.navigation.service', 'pds.common.service']);
  angular.module('pds.navigation.model', []);
  angular.module('pds.navigation.directive', []);
  angular.module('pds.navigation', ['pds.navigation.controller', 'pds.navigation.route', 'pds.navigation.service', 'pds.navigation.config', 'pds.navigation.model']);
})(angular);

(function (angular) {
  angular.module('pds.search.route', ['pds.common.route', 'ui.router']);
  angular.module('pds.search.service', ['pds.navigation.model', 'pds.common.config']);
  angular.module('pds.search.config', []);
  angular.module('pds.search.directive', ['pds.search.service', 'ui.bootstrap']);
  angular.module('pds.search.model', []);
  angular.module('pds.search', ['pds.search.directive', 'pds.search.route', 'pds.search.service', 'pds.search.config', 'pds.search.model']);
})(angular);

(function (angular) {
    angular
        .module('pds.catalog.config')
        .config(['$sceDelegateProvider', SceConfig]);

    function SceConfig($sceDelegateProvider) {
        $sceDelegateProvider.resourceUrlWhitelist([
            'self',
            'https://services.kittelberger.net/**',
            'https://dev02.sagiton.pl/**',
            'http://localhost:8080/**',
            'https://mycliplister.com/**'
        ]);
    }

})(angular);

(function (angular) {

    angular
        .module('pds.catalog.controller')
        .controller("CatalogController", CatalogController);

    CatalogController.$inject = ['$scope', '$rootScope', 'urlParserService', '_', 'MetaService', 'CatalogService'];

    function CatalogController($scope, $rootScope, urlParserService, _, MetaService, CatalogService) {
        var vm = this;
        var PRODUCT_COUNT_LAYOUT_BREAKPOINT = 4;
        vm.catalogId = urlParserService.getCatalogId();

        vm.anyProductHasValue = anyProductHasValue;
        vm.tableDefinitionContains = tableDefinitionContains;
        vm.responsiveChange = responsiveChange;
        vm.isArray = _.isArray;

        MetaService.updateMetaByCategory(vm.catalogId);
        $rootScope.$broadcast('pds.breadcrumb.update', {catalogId: vm.catalogId});

        $scope.$on('pds.catalog.loaded', function (event, params) {
            return initCatalog(params.catalog);
        });

        $scope.$on('pds.catalog.loaded', function () {
            angular
                .element('#nav-primary-collapse')
                .find('li')
                .removeClass('active');
            angular
                .element('#ocs-nav')
                .addClass('active');
        });

        function initCatalog(catalog) {
            vm.catalog = catalog;
            if (_.get(vm.catalog, 'redirectCategory.id')) {
                return CatalogService.redirectTo(vm.catalog.redirectCategory.id);
            }
            vm.catalog.energyEfficiency = vm.catalog.energyEfficiency || {};
            var technicalDataTable = vm.catalog.technicalDataTable();
            if (technicalDataTable) {
                var tableDefinition = technicalDataTable.tableDefinition;
                technicalDataTable.tableDefinition = _
                    .chain(tableDefinition)
                    .filter(function(attr) {
                        return technicalDataTable.showAttributesWithNoValues || anyProductHasValue(technicalDataTable.products, attr);
                    })
                    .filter(isNotHeaderAttribute.bind(this, technicalDataTable.products))
                    .value();
                vm.responsiveChange();
            }
        }

        function isNotHeaderAttribute(products, attr) {
            return !isHeaderAttribute(products, attr);
        }

        function isHeaderAttribute(products, attr) {
            return _.some(products, function (product) {
                return product.header.key == attr.key;
            });
        }

        function anyProductHasValue(products, attribute) {
            return _.some(products, attribute.key);
        }

        function tableDefinitionContains(definition, key) {
            return _.some(definition, {key: key});
        }

        function responsiveChange(e, table, columns) {
            var technicalDataTable = vm.catalog.technicalDataTable();
            technicalDataTable.partitions = _.chunk(technicalDataTable.products, _.every(columns) ? PRODUCT_COUNT_LAYOUT_BREAKPOINT : Number.POSITIVE_INFINITY);
        }
    }

})(angular);

(function (angular) {
    var VALUE_TEMPLATE = '<span>{{(value || {}).value == null ? \'-\' : value.value}}</span>';
    var IMAGE_MEDIA_TEMPLATE = '<img ng-src="{{value.value}}" alt="{{alt.value}}" title="{{title.value}}"/>';
    var OTHER_MEDIA_TEMPLATE = '<span><a ng-href="{{value.value | imageUrl}}" title="{{title.value}}" target="_blank"><span translate="DOWNLOAD.NOW"></span>&nbsp;<i class="glyphicon glyphicon-download-alt"></i></a></span>';
    var LIST_TEMPLATE = '<span ng-repeat="el in value.value">{{el + (!$last ? ", ": "")}}</span>';
    var IMAGE_EXTENSIONS = ['.jpg', '.png', '.jpeg', '.gif'];
    var DOT = '.';

    var templateStrategy = [
        {
            isApplicable: function (val, type) {
                return type && type.toLowerCase() == 'string' && IMAGE_EXTENSIONS.indexOf(val.slice(val.lastIndexOf(DOT))) >= 0;
            },
            template: IMAGE_MEDIA_TEMPLATE
        },
        {
            isApplicable: function (val, type) {
                return type && type.toLowerCase() == 'asset';
            },
            template: OTHER_MEDIA_TEMPLATE
        },
        {
            isApplicable: function (val, type) {
                return type && type.toLowerCase() == 'list';
            },
            template: LIST_TEMPLATE
        },
        {
            isApplicable: function () {
                return true;
            },
            template: VALUE_TEMPLATE
        }
    ];

    angular
        .module('pds.catalog.directive')
        .directive('attributeValue', ['$compile', '$sce', function ($compile, $sce) {
            return {
                restrict: 'EA',
                scope: {
                    value: '=attributeValue',
                    alt: "=attributeAlt",
                    title: "=attributeTitle"
                },
                link: function (scope, element, attrs, ctrl) {
                    scope.$sce = $sce;
                    for (var i = 0; i < templateStrategy.length; i++) {
                        if (scope.value && templateStrategy[i].isApplicable(scope.value.value, scope.value.type)) {
                            return element.html($compile(templateStrategy[i].template)(scope));
                        }
                    }
                }
            }
        }]);

})(angular);

(function (angular, $) {
    angular
        .module('pds.catalog.directive')
        .directive('catalogMetadata', CatalogMetadata);

    function CatalogMetadata() {
        return {
            restrict: 'EA',
            controller: CatalogMetadataController,
            scope: {
                data: '=data'
            }
        }
    }

    CatalogMetadataController.$inject = ['_', '$scope', 'CatalogService'];

    function CatalogMetadataController(_, $scope, CatalogService) {

        var redirectCategoryId = _.get($scope.data, 'redirect.id')
        if (redirectCategoryId) {
            return CatalogService.redirectTo(redirectCategoryId)
        }

        var canonicalReference = _.get($scope.data, 'canonicalReference')
        if (canonicalReference) {
            angular.element('head')
                .find('link[rel=canonical]')
                .attr({'href': canonicalReference})
                .attr({'ng-href': canonicalReference})
        }

    }

})(angular, $);

(function (angular) {
    angular
        .module('pds.catalog.directive')
        .directive('catalogTemplate', ['CatalogService', '$rootScope', '_' ,function (CatalogService, $rootScope, _) {
            return {
                restrict: 'EA',
                scope: {
                    catalogId: '='
                },
                transclude: true,
                template: '<div class="catalog-template" ng-transclude></div>',
                link: function (scope, element, attrs, ctrl) {
                    scope.$watch('catalogId', function (val) {
                        val && CatalogService
                            .getCatalogTemplate(val)
                            .then(function (catalog) {
                                scope.$catalog = catalog;
                                $rootScope.$broadcast('pds.catalog.loaded', {catalog: catalog});
                            });
                    });
                }
            }
        }]);

})(angular);

(function (angular, $) {
    angular
        .module('pds.catalog.directive')
        .directive('equalizeTeaserHeight', ['$timeout', EqualizeTeaserHeight]);

    function EqualizeTeaserHeight($timeout) {
        return {
            restrict: 'EA',
            controller: ['$scope', '$element', '$attrs', function (scope, element, attrs) {
                if (scope.$last) {
                    $timeout(function() {
                        var maxHeight = 0;
                        var cardBlock = $(".card .card-block");

                        $(cardBlock).each(function() {
                            if ($(this).height() > maxHeight) {
                                maxHeight = $(this).height();
                            }
                        });

                        $(cardBlock).height(maxHeight);
                    }, 0);
                }
            }]
        }
    }

})(angular, jQuery);

(function (angular, $) {
    angular
        .module('pds.catalog.directive')
        .directive('fullWidthTable', FullWidthTable);

    FullWidthTable.$inject = [];

    function FullWidthTable() {
        return {
            restrict: 'EA',
            link: link
        }
    }

    function link(scope, element, attrs) {

        var viewportWidth = $(window).width();
        var tableSliderElements = element.find(".slick-track .card");
        var tableSliderElementsAmount = $(tableSliderElements).length;

        //desktop
        if (viewportWidth > 991) {
            if (tableSliderElementsAmount < 3) {
                element.addClass("js-full-width-slick-track");
            } else {
                element.removeClass("js-full-width-slick-track");
            }
        }

        //tablet
        if ((viewportWidth < 992) && (viewportWidth > 767)) {
            if (tableSliderElementsAmount < 2) {
                element.addClass("js-full-width-slick-track");
            } else {
                element.removeClass("js-full-width-slick-track");
            }
        }

    }

})(angular, $);

(function (angular) {
    angular
        .module('pds.catalog.directive')
        .directive('ocsBreadcrumb', OcsBreadcrumb);

    var crumbTemplate = "<li ng-repeat=\"crumb in $breadcrumbs\" ng-class=\"{'active ocs-breadcrumb-last': $last}\">"
            + "<a ocs-navigate=\"crumb.id\">{{crumb.name}}</a>"
        + "</li>";

    function OcsBreadcrumb() {
        return {
            restrict: 'EA',
            scope: {
                ocsNavigate: '='
            },
            controller: BreadcrumbController
        }
    }

    BreadcrumbController.$inject = ['$scope', '$compile', 'BreadcrumbService', '_']

    function BreadcrumbController($scope, $compile, BreadcrumbService, _) {
        $scope.$on('pds.breadcrumb.update', function (event, params) {
            BreadcrumbService
                .build(params.catalogId)
                .then(function (res) {
                    $scope.$breadcrumbs = res || {};
                    var breadcrumbs = $compile(crumbTemplate)($scope);
                    var breadcrumbsContainer = angular.element('#nav-breadcrumbs');
                    breadcrumbsContainer.find('.dropdown-menu').append(breadcrumbs);

                    //TODO Move this stuff, but where.......................................................................
                    if (_.last($scope.$breadcrumbs).type == 'PRODUCT_FAMILY') {
                        breadcrumbsContainer.addClass('dark-breadcrumb');
                    }

                    breadcrumbsContainer
                        .find('.dropdown-toggle')
                        .text(_.last($scope.$breadcrumbs).name);
                });
        });
    }

})(angular);

(function (angular) {
    angular
        .module('pds.catalog.directive')
        .directive('ocsDataTable', OcsDataTable);

    OcsDataTable.$inject = ['$timeout', '_'];


    function OcsDataTable($timeout, _) {
        return {
            restrict: 'EA',
            scope: {
                ocsDataTable: '=',
                odtResponsiveChange: '&'
            },
            link: function (scope, element, attrs) {
                scope.$watch('ocsDataTable', function (val) {
                    $timeout(function () {
                        element.DataTable();
                        element.off('responsive-resize.dt');
                        element.on('responsive-resize.dt', function (e, table, cols) {
                            scope.$apply(function () {
                                scope.odtResponsiveChange({$event: e, $table: table, $columns: cols});
                            })
                        });
                    });
                });
            }
        }
    }

})(angular);

(function (angular) {
    angular
        .module('pds.catalog.directive')
        .directive('ocsNavigate', OcsNavigateDirective);

    OcsNavigateDirective.$inject = ['CatalogService'];

    function OcsNavigateDirective(CatalogService) {
        return {
            restrict: 'EA',
            scope: {
                ocsNavigate: '='
            },
            controller: ['$scope', '$element', '$attrs', function (scope, element, attrs) {
                scope.$watch('ocsNavigate', function (val) {
                    val && CatalogService
                        .resolveUriFromHierarchy(val)
                        .then(function (uri) {
                            element.attr('href', uri);
                        });
                    element.filter(function (idx, el) {
                        return !$(el).attr('target');
                    })
                    .attr('target', '_self');
                })
            }]
        }
    }

})(angular);

(function (angular) {
    angular
        .module('pds.catalog.directive')
        .directive('ocsNavigationMenu', OcsNavigationMenu);

    OcsNavigationMenu.$inject = ['config', '$templateCache']

    function OcsNavigationMenu(config, $templateCache) {
        return {
            restrict: 'A',
            scope: true,
            template:  function() {
                return $templateCache.get('component/navigation_menu.html')
            },
            controller: NavigationMenuController,
            controllerAs: '$ctrl'
        }
    }

    NavigationMenuController.$inject = ['MenuService', '$element']

    function NavigationMenuController(MenuService, $element) {
        var self = this;

        self.menu = self.menu || {
            name: $element.children('a').text()
        };

        MenuService
            .getMenu()
            .then(function(menu) {
                self.menu = menu;
            });

    }
})(angular);

(function (angular) {
    angular
        .module('pds.catalog.directive')
        .component('ocsNewProducts', {
            template:  ['$templateCache', function($templateCache) {
                return $templateCache.get('component/new_products.html')
            }],
            controller: NewProductsController
        });

    NewProductsController.$inject = ['CatalogService']

    function NewProductsController(CatalogService) {
        var self = this;

        self.slickSettings = {
            "arrows": false,
            "dots": true,
            "infinite": false,
            "speed": 1000,
            "cssEase": "ease-in-out",
            "slidesToShow": 4,
            "slidesToScroll": 4,
            "responsive": [
                {
                    "breakpoint": 992,
                    "settings": {
                        "slidesToShow": 2,
                        "slidesToScroll": 2
                    }
                },
                {
                    "breakpoint": 768,
                    "settings": {
                        "slidesToShow": 1,
                        "slidesToScroll": 1
                    }
                }
            ]
        };

        CatalogService
            .getNewProducts()
            .then(function (data) {
                self.products = data.products
                self.productsLoaded = true;
            });
    }
})(angular);

(function (angular) {
    angular
        .module('pds.catalog.directive')
        .directive('scrollableTableCard', function() {
            return {
                restrict: 'EA',
                controller: ScrollableTableCardController
            }
        });

    ScrollableTableCardController.$inject = ['$scope', '$element', '$attrs'];

    function ScrollableTableCardController(scope, element, attrs) {

        var $thisTable = $(this);
        var viewportWidth = $(window).width();
        var tableSliderElements = $thisTable.find(".card");
        var tableSliderElementsAmount = $(tableSliderElements).length;

        function setProperColumnQuantity() {
            element.each(function() {
                //desktop
                if (viewportWidth > 991) { //FIXME
                    if (tableSliderElementsAmount < 3) {
                        $thisTable.addClass("js-full-width-slick-track");
                    } else {
                        $thisTable.removeClass("js-full-width-slick-track");
                    }
                }

                //tablet
                if ((viewportWidth < 992) && (viewportWidth > 767)) { //FIXME
                    if (tableSliderElementsAmount < 2) {
                        $thisTable.addClass("js-full-width-slick-track");
                    } else {
                        $thisTable.removeClass("js-full-width-slick-track");
                    }
                }

            });
        }
        setProperColumnQuantity()
        $(window).on("resize orientationchange", setProperColumnQuantity)
    }

})(angular);

(function (angular) {
    angular
        .module('pds.catalog.directive')
        .directive('navLang', SwitchLanguage);

    SwitchLanguage.$inject = ['urlParserService', 'CatalogService', 'locale', '$window'];

    function SwitchLanguage(urlParserService, catalogService, locale, $window) {
        return {
            restrict: 'EAC',
            controller: ['$scope', '$element', '$attrs', function (scope, element, attrs) {
                if (urlParserService.isOCS()) {
                    element
                        .children('li')
                        .each(function (index, el) {
                            var link = angular.element(el).children('a');

                            link.click(function (e) {
                                e.preventDefault();
                                var language = link.children('span').text().toLowerCase();
                                var newLocale = locale.toString().replace(locale.language, language);
                                catalogService
                                    .resolveUriFromHierarchy(catalogService.getIdFromLocation(), newLocale)
                                    .then(function (uri) {
                                        $window.location.href = urlParserService.setLanguage(uri, language);
                                    });
                            });
                        });
                }
            }]
        }
    }

})(angular);

(function (angular) {
    angular
        .module('pds.catalog.directive')
        .directive('synchronizeHeight', SynchronizeHeight);

    SynchronizeHeight.$inject = ['$timeout', '$window'];

    function SynchronizeHeight($timeout, $window) {
        return {
            restrict: 'EA',
            link: function (scope, element, attrs) {
                $timeout(function() {
                    var firstColumnRow = angular
                        .element(document)
                        .find('.card.card-column table tr')
                        .eq(scope.$index + 1)

                    scope.$watchCollection(function () {
                        return {
                            headerCellHeight: firstColumnRow[0].offsetHeight,
                            thisCellHeight: element[0].offsetHeight
                        }
                    }, synchronizeRowHeight, true)

                    function synchronizeRowHeight(newVals) {
                        var maxHeight = newVals.headerCellHeight > newVals.thisCellHeight ? newVals.headerCellHeight : newVals.thisCellHeight
                        element.height(maxHeight)
                        firstColumnRow.height(maxHeight)
                    }
                }, 500)

                angular.element($window).bind('resize', function () {
                    scope.$apply();
                });

            }
        }
    }

})(angular);

(function (angular) {

    angular
        .module('pds.catalog.factory')
        .factory('urlBuilder', UrlBuilder);

    UrlBuilder.$inject = ['$injector'];

    function UrlBuilder($injector) {
        return $injector.get('seoFriendlyUrlBuilder');
    }
})(angular);

(function (angular) {
    angular
        .module('pds.catalog.model')
        .factory('CatalogHelper', CatalogHelper);

    function CatalogHelper() {
        this.toView = function (catalog) {
            catalog.description = catalog.descriptionLong;
            catalog.title = catalog.descriptionShort;
            catalog.image = catalog.keyVisual || catalog.productimage;
            catalog.showImage = function () {
                return !!catalog.keyVisual;
            };
            catalog.showTiles = function () {
                return catalog.isRootCatalog() || catalog.isSubCatalog();
            };
            catalog.tiles = _.map(catalog.children, function (child) {
                return {
                    id: child.id,
                    name: child.name,
                    title: child.headline,
                    description: child.descriptionShort,
                    image: child.categoryImage
                }
            });
            catalog.showList = catalog.isLeafCatalog;
            catalog.list = _.map(catalog.children, function (child) {
                return {
                    id: child.id,
                    name: child.name,
                    title: child.productname,
                    image: child.productcategoryimage,
                    new: child.new,
                    bullets: _.has(child, 'highlightCatOverview.value.elements') && child.highlightCatOverview.value.elements

                }
            });
            catalog.showTeaser = catalog.isProductFamily;
            catalog.new = catalog.neuheitOcs;
            catalog.newImage = '/media/new.png';
            catalog.name = catalog.name || catalog.headline || catalog.productname;
            catalog.energyEfficiency = {
                image: catalog.mainErpLabel
            };
            catalog.showTechnicalInformation = function () {
                return _.has(catalog, 'highlights.value.elements') && catalog.highlights.value.elements.length;
            };
            catalog.technicalInformation = _.has(catalog, 'highlights.value.elements')  && catalog.highlights.value.elements;
            catalog.showMoreDetails = function () {
                return _.size(catalog.subheadlines) > 0;
            };
            catalog.subheadlines = (function (catalog) {
                var i = 1;
                var subheadline = catalog.detailsSubheadline1;
                var description = catalog.detailsDescription1;
                var image = catalog.detailsImage1;
                var subheadlines = [];
                while(subheadline != null || description != null) {
                    subheadlines.push({title: subheadline && subheadline.value, description: description && description.value, image: image && image.value});
                    i++;
                    description = catalog['detailsDescription' + i];
                    subheadline = catalog['detailsSubheadline' + i];
                    image = catalog['detailsImage' + i];
                }
                return subheadlines;
            })(catalog);
            catalog.moreDetails = {
                title: catalog.headlineOverview,
                elements: catalog.subheadlines
            };

            catalog.showTechnicalTable = function () {
                return catalog.productTableDefinition && catalog.children; //FIXME Take logic from controller, Make this customizable
            };
            catalog.showFootnotes = function () {
                return catalog.footnotesTechData;
            };
            catalog.footnotes = catalog.footnotesTechData;
            return catalog;
        };

        this.toTemplateView = function (template) {
            return template;
        };

        function findSection(sections, name) {
            return _.find(sections, {name: name});
        }

        return this;
    }

})(angular);

(function(angular) {
    angular
        .module('pds.catalog.model')
        .config(CatalogConfig);

    CatalogConfig.$inject = ['env', 'CatalogProvider'];

    function CatalogConfig(env, catalogModelProvider) {
        catalogModelProvider
            .productDataServiceEndPoint(env.endPoint.productDataService)
            .contentServiceEndPoint(env.endPoint.contentService);
    }

})(angular);

(function (angular) {
    angular
        .module('pds.catalog.model')
        .provider('Catalog', function CatalogProvider() {
            var pdsUrl = null;
            var csUrl = null;

            this.productDataServiceEndPoint = function (value) {
                pdsUrl = value;
                return this;
            };

            this.contentServiceEndPoint = function (value) {
                csUrl = value;
                return this;
            };

            this.$get = ['$resource', '$cacheFactory', 'locale', '$http', '_', 'CatalogHelper', function ($resource, $cacheFactory, locale, $http, _, CatalogHelper) {
                return new Catalog($resource, $cacheFactory, locale, pdsUrl, csUrl, $http, _, CatalogHelper);
            }];
        });

    function Catalog($resource, $cacheFactory, locale, pdsUrl, csUrl, $http, _, catalogHelper) {
        var catalogCache = $cacheFactory("catalog");
        var customTransformations = [redirectChildren];
        var transformations = $http.defaults.transformResponse.concat(customTransformations);
        var transformResponse = function (data, headers, status) {
            var result = data;
            _.each(transformations, function (t) {
                result = t(result, headers, status);
            });
            return result;
        };
        var CatalogResource = $resource(pdsUrl + 'hierarchy/:channel/:locale/:type/:id', null, {
                get: {
                    method: 'GET',
                    params: {locale: locale},
                    cache: catalogCache,
                    transformResponse: function (data, headers, status) {
                        return toCatalogView(transformResponse(data, headers, status))
                    }
                },
                query: {
                    method: 'GET',
                    isArray: true,
                    params: {locale: locale},
                    cache: catalogCache
                },
                template: {
                    method: 'POST',
                    url: csUrl + 'rest/document/display',
                    transformResponse: function (data, headers, status) {
                        return toCatalogTemplateView(transformResponse(data, headers, status));
                    }
                }
            }
        );

        function redirectChildren(data, headers, status) {
            data.children = _.map(data.children, function (child) {
                return child.redirectCategory ? child.redirectCategory : child;
            });
            return data;
        }

        function toCatalogView(catalog) {
            return catalogHelper.toView(catalog);
        }

        function toCatalogTemplateView(catalog) {
            return catalogHelper.toTemplateView(catalog);
        }

        CatalogResource.prototype.isLeafCatalog = function () {
            return this.getType() == 'leaf_category';
        };

        CatalogResource.prototype.isProductFamily = function () {
            return this.getType() == 'product_family';
        };

        CatalogResource.prototype.isSubCatalog = function () {
            return this.getType() == 'sub_category';
        };

        CatalogResource.prototype.isRootCatalog = function () {
            return this.getType() == 'root_category';
        };

        CatalogResource.prototype.getType = function() {
            return this.type ? this.type.value.toLowerCase() : String();
        };

        CatalogResource.prototype.technicalDataTable = function () {
            var section = _.find(this.sections, {name: 'TECHNICAL_DATA_TABLE'})
                       || _.find(this.sections, {name: 'TECHNICAL_DATA_TABLE_SLIDER'});
            return section && section.params;
        };

        CatalogResource.fallbackType = function () {
            return 'PRODUCT_FAMILY';
        };

        return CatalogResource;
    }

})(angular);

(function(angular) {
    angular
        .module('pds.catalog.route')
        .config(RouteConfig);

    RouteConfig.$inject = ['$stateProvider'];

    function RouteConfig($stateProvider) {
        $stateProvider.pdsRoute({
            name: 'catalog',
            url: '{catUrl:.*-[cp][/]?}',
            templateProvider: ['$templateCache', function($templateCache){
                return $templateCache.get('catalog3.html')
            }],
            controller: 'CatalogController as vm',
            resolve: {
                redirect: ['MetaService', function (metaService) {
                    return metaService.redirectOnInvalidUrl();
                }]
            }
        });
    }
})(angular);

(function(angular) {
    angular
        .module("pds.catalog.service")
        .service("BreadcrumbService", BreadcrumbService);

    BreadcrumbService.$inject = ['CatalogService', '_', '$q'];

    function BreadcrumbService(CatalogService, _, $q) {
        var templatePromise

        return {
            build: build
        };

        function build(categoryId) {
            templatePromise = templatePromise || CatalogService.getTemplate(categoryId, 'BREADCRUMBS')

            return templatePromise
                .then(decorateWithUrls)
                .then(function (tree) {
                    return _.map(tree, function (node) {
                        return _.pick(node, 'id', 'name', 'url', 'type')
                    })
                });
        }

        function decorateWithUrls(response) {
            var tree = response.nodes
            var promises = _.map(tree, function (node) {
                return CatalogService
                    .resolveUriFromHierarchy(node.id)
                    .then(function (url) {
                        node.url = url;
                        return node
                    });
            })
            return $q.all(promises)
        }
    }

})(angular);

(function(angular) {
    angular
        .module("pds.catalog.service")
        .service("CatalogService", CatalogService);

    CatalogService.$inject = ['$window', 'Catalog', 'MenuService', 'CatalogUrlSchema', 'catalogSearchListener', '_', '$q', 'locale'];

    function CatalogService($window, Catalog, menuService, catalogUrlSchema, catalogSearchListener, _, $q, locale) {
        var self = this;
        var catalogTemplate;

        catalogSearchListener
            .listen()
            .then(function (params) {
                return resolveUriFromHierarchy(params.target.resourceId);
            })
            .then(function (uri) {
                $window.location.href = uri;
            });

        return {
            getNewProducts: getNewProducts,
            getCatalogTemplate: getCatalogTemplate,
            getTemplate: getTemplate,
            redirectTo: navigateTo,
            travelUpNavigationHierarchy: travelUpNavigationHierarchy,
            getIdFromLocation: getIdFromLocation,
            resolveUriFromHierarchy: resolveUriFromHierarchy,
        };

        function getByTag(type, tag) {
            return Catalog.query({type: type, id: tag, queryType: 'tag'}).$promise;
        }

        function getNewProducts() {
            var catalog = new Catalog({
                template: {name: 'NEW_PRODUCTS'},
                model: {
                    locale: locale.toString(),
                    channel: getOCSChannel()
                }
            });
            return catalog.$template();
        }

        function getById(categoryId) {
            return getTypeFromHierarchy(categoryId)
                .then(function (type) {
                    return Catalog.get({
                        id: categoryId,
                        type: type,
                        channel: getOCSChannel()
                    }).$promise;
                });
        }

        function getCatalogTemplate(catalogId) {
            catalogTemplate = catalogTemplate || getTemplate(catalogId)
            return catalogTemplate
        }

        function getTemplate(catalogId, type) {
            return getTypeFromHierarchy(catalogId)
                .then(function (typeFromHierarchy) {
                    var catalog = new Catalog({
                        template: {name: type || typeFromHierarchy},
                        model: {
                            locale: locale.toString(),
                            channel: getOCSChannel(),
                            catalogRequest: {
                                id: catalogId,
                                channel: getOCSChannel(),
                                type: typeFromHierarchy
                            }
                        }
                    });
                    return catalog.$template();
                });
        }

        function getOCSChannel() {
            return angular.element('meta[name="ocs-channel"]').attr('content')
        }

        function getByIdAndType(id, type) {
            return Catalog.get({id: id, type: type}).$promise;
        }

        function getTypeFromHierarchy(id) {
            return menuService
                .findInNavigation(id)
                .then(function (catalog) {
                    return catalog ? catalog.type : Catalog.fallbackType();
                });
        }

        function travelUpHierarchy(categoryId, tree) {
            tree = tree || [];
            return getById(categoryId)
                .then(function (data) {
                    tree.push({
                        id: data.id,
                        type: data.type,
                        name: data.name
                    });
                    if (data && data.parentId) {
                        return travelUpHierarchy(data.parentId, tree);
                    }
                    return tree;
                });
        }

        function travelUpNavigationHierarchy(categoryId, locale) {
            return menuService
                .findInNavigation(categoryId, locale)
                .then(function (item) {
                    var tree = [];
                    while(item != null) {
                        tree.push(item);
                        item = menuService.findParentInNavigation(item.id, locale);
                    }
                    return $q.all(tree);
                });
        }

        function navigateTo(id) {
            return resolveUri(id)
                .then(function (uri) {
                    $window.location.href = uri;
                });
        }

        function resolveUri(categoryId) {
            return travelUpHierarchy(categoryId)
                .then(buildUri);
        }

        function buildUri(tree) {
            return catalogUrlSchema.build(tree);
        }

        function resolveUriFromHierarchy(categoryId, locale) {
            return travelUpNavigationHierarchy(categoryId, locale).then(buildUri);
        }

        function getIdFromLocation(uri) {
            uri = uri || new URI().toString();
            var parts = uri.split('-');
            return parts[parts.length - 2];
        }

        function getProductFamily(product) {
            if (!product) {
                return $q.resolve(null);
            }
            var elements = product.parentId.value.elements || [product.parentId.value];
            return $q
                .all(_.map(elements, function (parentId) {
                    return menuService.findInNavigation(parentId) || {};
                }))
                .then(function (nodes) {
                    return _.find(nodes, function (node) {
                        return node.type === Catalog.fallbackType();
                    });
                });
        }
    }

})(angular);

(function (angular) {
    angular
        .module('pds.catalog.service')
        .service('CatalogUrlSchema', CatalogUrlSchema);

    CatalogUrlSchema.$inject = ['SeoFriendlyUrlBuilder', '_'];

    function CatalogUrlSchema(SeoFriendlyUrlBuilder, _) {
        var productPrefix = 'p';
        var categoryPrefix = 'c';
        var productDetailsType = 'product_details';
        var schemas = {
            'comercial-e-industrial': industrialSchema //TODO Make this locale independent
        };

        function getSiteChannel() {
            return angular.element('meta[name="channel"]').attr('content') || '';
        }

        this.build = function (tree) {
            if (!_.size(tree)) {
                return String();
            }
            return getSchema(getSiteChannel())(tree);
        };

        function getSchema(name) {
            return schemas[name] || residentialSchema;
        }

        function industrialSchema(tree) {
            var builder = new SeoFriendlyUrlBuilder({ocsBasePath: getSiteChannel() + '/ocs'});
            _.forEachRight(tree, function (node, index) {
                var fragments = [node.name];
                if (index == 0) {
                    fragments.push(node.id, categoryPrefix);
                }
                builder.addPath(fragments);

                if (node.type == productDetailsType) {
                    builder.setPath([node.name, node.id, productPrefix]);
                }
            });
            return builder.build();
        }

        function residentialSchema(tree) {
            var builder = new SeoFriendlyUrlBuilder();
            _.forEachRight(tree, function (node, index) {
                var fragments = [node.name];
                if (index == 0) {
                    fragments.push(node.id, categoryPrefix);
                }
                if (index == tree.length - 1) {
                    fragments.unshift(getSiteChannel());
                }
                builder.addPath(fragments);

                if (node.type == productDetailsType) {
                    builder.setPath([node.name, node.id, productPrefix]);
                }
            });
            return builder.build();
        }
    }


})(angular);

(function (angular) {
    angular
        .module('pds.catalog.service')
        .service('MetaService', MetaService);

    MetaService.$inject = ['$rootScope', '$q', '$location', '$window', 'CatalogService', 'imageUrlFilter', 'config', 'urlParserService'];

    var TITLE_DELIMITER = ' | ';
    var LOCALE_DELIMITER = '-';
    var LOCALE_PROPER_DELIMITER = '_';
    var PATH_SEPARATOR = '/';

    function MetaService($rootScope, $q, $location, $window, CatalogService, imageUrlFilter, config, urlParserService) {

        return {
            updateMetaByCategory: updateMetaByCategory,
            redirectOnInvalidUrl: redirectOnInvalidUrl
        };

        function updateMetaByCategory(catalogId) {
            var excludeHreflangs = false;
            CatalogService
                .getCatalogTemplate(catalogId)
                .then(function (currentCatalog) {
                    return CatalogService
                        .travelUpNavigationHierarchy(catalogId)
                        .then(function (tree) {
                            tree[0] = currentCatalog;
                            return tree;
                        });
                })
                .then(function (tree) {
                    var q = $q.defer();
                    var currentNode = tree[0];
                    tree[0].name = tree[0].name.value;
                    var headerTitle = [];

                    for (var i = 0; i < tree.length; i++) {
                        if (tree[i] && tree[i].name) {
                            headerTitle.push(tree[i].name);
                        }
                    }
                    headerTitle.push(config.metaTags.siteName);

                    var image = (currentNode.keyVisual || currentNode.productimage || {}).value;
                    var event = {
                        title: headerTitle.join(TITLE_DELIMITER),
                        description: (currentNode.seoMetaText || currentNode.descriptionLong || currentNode.descriptionShort || {}).value,
                        image: image ? imageUrlFilter(image) : undefined,
                        siteName: config.metaTags.siteName,
                        webTrends: {
                            cg_s: tree[0] ? tree[0].name : null,
                            z_cg3: tree[1] ? tree[1].name : null,
                            z_cg4: tree[2] ? tree[2].name : null
                        },
                        canonicalUrl: $location.absUrl()
                    };

                    if (!(currentNode.blockCanonicalTag || {}).value) {
                        var canonicalRef = (currentNode.canonicalRef || {}).value;
                        if(canonicalRef) {
                            excludeHreflangs = canonicalRef != catalogId;
                            CatalogService
                                .resolveUriFromHierarchy(canonicalRef)
                                .then(function (url) {
                                    event.canonicalUrl = url;
                                    q.resolve(event);
                                });
                        } else {
                            q.resolve(event);
                        }
                    }

                    return q.promise;
                })
                .then(function (params) {
                    $rootScope.$broadcast('pds.header.update', params);
                })
                .then(function () {
                    if (excludeHreflangs) {
                        angular.element('link[hreflang]').remove();
                        return false;
                    }
                    angular
                        .element('link[hreflang]')
                        .each(function (index, link) {
                            var linkObject = angular.element(link);
                            var locale = linkObject.attr('hreflang');
                            locale = locale.split(LOCALE_DELIMITER);
                            CatalogService
                                .resolveUriFromHierarchy(catalogId, locale[0] + LOCALE_PROPER_DELIMITER + locale[1])
                                .then(function (url) {
                                    linkObject.attr('href', url.replace(/\/[a-z]{2}\/[a-z]{2}\//, PATH_SEPARATOR + locale[1].toLowerCase() + PATH_SEPARATOR + locale[0].toLowerCase()  + PATH_SEPARATOR));
                                    return !!url;
                                })
                                .then(function (result) {
                                    return result || linkObject.remove();
                                });
                        });
                });
        }

        function redirectOnInvalidUrl() {
            return CatalogService
                .resolveUriFromHierarchy(urlParserService.getCatalogId())
                .then(function (url) {
                    if (encodeURI(url) != URI().toString()) {
                        $window.location.href = url;
                    }
                })
        }
    }
})(angular);

(function (angular) {
    angular
        .module('pds.catalog.service')
        .service('catalogSearchListener', CatalogSearchListener);

    CatalogSearchListener.$inject = ['$rootScope', '$q', 'env'];

    function CatalogSearchListener($root, $q, env) {
        this.listen = function () {
            var def = $q.defer();
            $root.$on('pds.search.navigate', function (event, params) {
                if (params.target.channelDiscriminator == env.search.pdsChannelDiscriminator || params.target.resourceId) {
                    def.resolve(params);
                }
            });
            return def.promise;
        }
    }
})(angular);

(function (angular, URI) {
    angular
        .module('pds.catalog.service')
        .factory('SeoFriendlyUrlBuilder', SeoFriendlyUrlBuilderFactory);

    SeoFriendlyUrlBuilderFactory.$inject = ['$window', '_', 'simplifyCharactersFilter'];

    var fragmentSeparator = '-';
    var pathSeparator = '/';
    var ocsBasePath = 'ocs';

    function SeoFriendlyUrlBuilderFactory($window, _, simplifyCharactersFilter) {
        function SeoFriendlyUrlBuilder(options) {
            options = options || {};
            this.ocsBasePath = options.ocsBasePath || ocsBasePath;
            this.path = this.buildBasePath();
            this.simplifyCharactersFilter = simplifyCharactersFilter;
        }

        SeoFriendlyUrlBuilder.prototype.addPath = function(fragments) {
            if (!fragments) {
                return this;
            }
            var args = _.compact([].concat(fragments));
            this.path += pathSeparator + this.simplifyCharactersFilter(args.join(fragmentSeparator));
            return this;
        };

        SeoFriendlyUrlBuilder.prototype.setPath = function (fragments) {
            this.path = this.buildBasePath();
            this.addPath(fragments);
            return this;
        };

        SeoFriendlyUrlBuilder.prototype.build = function () {
            return this.path;
        };

        SeoFriendlyUrlBuilder.prototype.buildBasePath = function() {
            return URI().origin() + $window.getBasePath() + pathSeparator + this.ocsBasePath;
        };

        return SeoFriendlyUrlBuilder;
    }


})(angular, URI);

(function (angular) {

    angular
        .module('pds.catalog.service')
        .service('urlParserService', UrlParser);

    UrlParser.$inject = ['config'];

    var countryMatchIndex = 1;
    var languageMatchIndex = 2;
    var rootSegmentMatchIndex = 3;
    var catalogIdMatchIndex = 4;

                      /**  {1}{2}   {3}                                    {4}    **/
                      /** /ch/de/residential.html/qwe/asd/qwe/asd/poiuuy-134233-c **/
    var pathPattern = /^\/([a-z]{2})\/([a-z]{2})\/(?:ocs\/)?([^\/]*)(?:\.html)?\/(?:.*-([0-9]*)-[pc]\/?$)?/i;
    var languagePattern = /(\/[a-z]{2}\/)([a-z]{2})(.*)/i;

    function UrlParser(config) {
        this.config = config;
    }

    UrlParser.prototype.isOCS = function() {
        return !!this.getCatalogId();
    };

    UrlParser.prototype.getRootSegment = function getRootSegment() {
        return matchForIndex(rootSegmentMatchIndex) || this.config.metaTags.siteName;
    };

    UrlParser.prototype.getCatalogId = function () {
        return matchForIndex(catalogIdMatchIndex);
    };

    UrlParser.prototype.getLanguage = function () {
        return matchForIndex(languageMatchIndex);
    };

    UrlParser.prototype.setLanguage = function (url, language) {
        var uri = new URI(url);
        uri.path(uri.path().replace(languagePattern, '$1' + language + '$3'));
        return uri.toString();
    };

    function matchForIndex(index) {
        var match = new URI().path().match(pathPattern);
        return match && match[index];
    }

})(angular);

(function(angular) {
	angular
		.module("pds.navigation.service")
		.service("MenuService", MenuService);

	MenuService.$inject = ['_', 'Navigation', 'locale', '$q'];

	function MenuService(_, Navigation, locale, $q) {
        var NAVIGATION_TEMPLATE_NAME = 'CATALOG_HIERARCHY';
        var self = this;
        self.currentLocale = locale.toString();
        self.flatNavigation = {};
        self.getMenu = getMenu;
        self.findInNavigation = findInNavigation;
        self.findParentInNavigation = findParentInNavigation;

		function getMenu(locale) {
            var properLocale = locale || self.currentLocale;
            var nav = new Navigation({
                template: {
                    name: NAVIGATION_TEMPLATE_NAME,
                    channel: getOCSChannel()
                },
                model: {
                    locale: properLocale,
                    channel: getOCSChannel()
                }
            });
			return Navigation
                .get({query: nav})
                .$promise
				.then(function (res) {
                    if(!res.root) {
                        return {};
                    }
                    res.root.children[0].maxNavigationItems = res.root.maxNavigationItems;
                    return res.root.children[0];
				})
		}


        function getOCSChannel() {
            return angular.element('meta[name="ocs-channel"]').attr('content')
        }

		function getFlatMenu(locale) {
            return getMenu(locale)
                .then(function (menu) {
                    locale = locale || self.currentLocale;
                    self.flatNavigation[locale] = self.flatNavigation[locale] || flatMenu(menu);
                    return self.flatNavigation[locale];
                })
        }

        function flatMenu(menu, flat) {
            flat = flat || [];
            flat.push(menu);
            _.each(menu.children, function (item) {
                flatMenu(item, flat);
            });
            return flat;
        }

        function findInNavigation(id, locale) {
            return getFlatMenu(locale)
                .then(function(flat) {
                    return _.find(flat, {id: String(id)});
                });
        }

        function findParentInNavigation(childId, locale) {
            return _.find(self.flatNavigation[locale || self.currentLocale], function (val) {
                return !!_.find(val.children, {id: childId});
            });
        }
	}

})(angular);

(function(angular) {
    angular
        .module('pds.navigation.model')
        .config(NavigationConfig);

    NavigationConfig.$inject = ['env', 'NavigationProvider'];

    function NavigationConfig(env, NavigationProvider) {
        NavigationProvider.navigationEndpoint(env.endPoint.contentService);
    }

})(angular);

(function (angular) {
    angular
        .module('pds.navigation.model')
        .provider('Navigation', function () {
            var url = null;

            this.navigationEndpoint = function (value) {
                url = value;
                return this;
            };

            this.$get = ['$resource', '$cacheFactory', function ($resource, $cacheFactory) {
                return new Navigation($resource, $cacheFactory, url);
            }]
        });

    function Navigation($resource, $cacheFactory, url) {
        var catalogCache = $cacheFactory("navigation");
        var methods = {
            get: {method: 'GET', cache: catalogCache}
        };
        return $resource(url + 'rest/document/display', null, methods);
    }
})(angular);

(function (angular) {
    angular
        .module('pds.search.directive')
        .directive('activeSearch', function() {
            return {
                restrict: 'A',
                link: link
            }
        });

        function link(scope, element, attrs) {

            element
                .on('focus', function(e) {
                    document.body.classList.add('search-active');
                })
                .on('blur', function(e) {
                    document.body.classList.remove('search-active');
                });

            angular.element('#js-show-header-search')
                .on('click', 'a', function(e) {
                    element.trigger('focus');
                });
        }

})(angular);

(function (angular) {
    angular
        .module('pds.search.directive')
        .component('ocsQuickSearch', {
            template:  ['$templateCache', function($templateCache) {
                return $templateCache.get('component/quick_search.html')
            }],
            transclude: true,
            controller: ocsQuickSearchController
        });

    ocsQuickSearchController.$inject = ['_', '$location', '$state', '$rootScope', 'SearchService', '$window'];

    function ocsQuickSearchController(_, $location, $state, $rootScope, SearchService, $window) {
        var self = this;

        self.suggest = _.throttle(suggest, 200);
        self.goTo = goTo;
        self.doSearch = doSearch;

        //FIXME a hack to proceed to state `search` after entering search.html
        var path = $location.path();
        if (path && path.indexOf('search.html') > -1 && !$state.is('search')) {
            $state.go('search');
        }

        function suggest() {
            return SearchService
                .suggest(self.quicksearch)
                .then(function(data) {
                    return self.autosuggest = data;
                });
        }

        function goTo(target) {
            $rootScope.$broadcast('pds.search.navigate', {target: target});
        }

        function doSearch($item) {
            if (!$item || $item.which === 13) {
                $window.navigate('search.html?terms=' + self.quicksearch);
            }
        }
    }
})(angular);

(function (angular) {
    angular
        .module('pds.search.directive')
        .component('ocsSearch', {
            template:  ['$templateCache', function($templateCache) {
                return $templateCache.get('component/search.html')
            }],
            controller: ocsSearchController
        });

    ocsSearchController.$inject = ['$anchorScroll', 'SearchService', 'cmsSearchListener', '$rootScope', '$location', '$window', '_', 'translateFilter'];

    function ocsSearchController($anchorScroll, SearchService, cmsSearchListener, $rootScope, $location, $window, _, translateFilter) {
        var self = this;

        self.finalSearchResults = [];
        self.searchTerm = $location.search().terms;
        self.contactText = translateFilter('SEARCH.NO.RESULT.CHECKLIST.3', {contactLink: "<a href='" + translateFilter('SEARCH.CONTACT.URL') + "' class='link-inline' target='_self'>" + translateFilter('SEARCH.CONTACT') + "</a>"});
        self.onSearchInput = onSearchInput;
        self.goToAnchor = goToAnchor;
        self.goMore = goMore;

        cmsSearchListener
            .listen()
            .then(function (param) {
                $window.location.href = param.target.resourceLocation;
            });
        search();

        function search() {
            if (!self.searchTerm) {
                return;
            }
            self.totalLength = false;
            $location.search('terms', self.searchTerm);

            return SearchService
                .search(self.searchTerm)
                .then(function(data) {
                    self.totalLength = data.length;
                    self.finalSearchResults = _.groupBy(data, 'channelDiscriminator');
                });
        }

        function onSearchInput(keyEvent) {
            if (keyEvent.which === 13) {
                search();
            }
        }

        function goToAnchor(idToGo) {
            $location.hash(idToGo);
            $anchorScroll.yOffset = 80;
            $anchorScroll();
        }

        function goMore(param) {
            $rootScope.$broadcast('pds.search.navigate', {target: param});
        }

    }
})(angular);

(function(angular) {
    angular
        .module('pds.search.route')
        .config(RouteConfig);

    RouteConfig.$inject = ['$stateProvider'];

    function RouteConfig($stateProvider) {
        $stateProvider.pdsRoute({
            name: 'search',
            params: {
                terms: null
            },
            url: 'search.html',
            templateUrl: 'search.html'
        });
    }
})(angular);

(function(angular) {
    angular
        .module('pds.search.model')
        .config(SearchProvider);

    SearchProvider.$inject = ['env', 'SearchProvider'];

    function SearchProvider(env, SearchProvider) {
        SearchProvider.searchEndpoint(env.endPoint.searchService);
    }

})(angular);

(function (angular) {
    angular
        .module('pds.search.model')
        .provider('Search', function () {
            var url = null;

            this.searchEndpoint = function (value) {
                url = value;
                return this;
            };

            this.$get = ['$resource', 'locale', function ($resource, locale) {
                return new Search($resource, locale, url);
            }];
        });

    function Search($resource, locale, url) {
        var methods = {
            localize: {method: 'GET', isArray: true, params: {type: 'localize'}}
        };
        return $resource(url + 'resource/:type/:locale', {locale: locale}, methods);
    }
})(angular);

(function (angular) {
    angular
        .module('pds.search.service')
        .service('cmsSearchListener', CmsSearchListener);

    CmsSearchListener.$inject = ['$rootScope', '$q', 'config'];

    function CmsSearchListener($root, $q, config) {
        this.listen = function () {
            var def = $q.defer();
            $root.$on('pds.search.navigate', function (event, params) {
                if (!!params.target.resourceLocation) {
                    def.resolve(params);
                }
            });
            return def.promise;
        }
    }
})(angular);

(function(angular) {
	angular
		.module("pds.search.service")
		.service("SearchService", SearchService);

	SearchService.$inject = ['$q', 'Search', 'locale'];

    var MIN_AUTOSUGGEST_TERM_LENGTH = 2;

    function SearchService($q, Search, locale) {
		return {
			search: search,
			suggest: suggest
		};

		function search(search) {
			return Search.query({locale: locale, searchTerm: search}).$promise;
		}

		function suggest(searchTerm) {
            if (searchTerm && searchTerm.length > MIN_AUTOSUGGEST_TERM_LENGTH) {
                return Search.localize({locale: locale, searchTerm: searchTerm}).$promise;
            }
			return $q.resolve([]);
		}

	}

})(angular);

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbmZpZy5qcyIsImVudi5qcyIsInRlbXBsYXRlcy5qcyIsImNvbW1vbi9jb21tb24ubW9kdWxlLmpzIiwiY29tbW9uL2NvbnRyb2xsZXIvY29udGVudC5jb250cm9sbGVyLmpzIiwiY29tbW9uL2NvbnRyb2xsZXIvaGVhZGVyLmNvbnRyb2xsZXIuanMiLCJjb21tb24vY29udHJvbGxlci9qc29ubGQuY29udHJvbGxlci5qcyIsImNvbW1vbi9jb25maWcvYW5jaG9yLmNvbmZpZy5qcyIsImNvbW1vbi9jb25maWcvaTE4bi5jb25maWcuanMiLCJjb21tb24vY29uZmlnL2xvY2FsZS5kaXNjb3ZlcnkuanMiLCJjb21tb24vY29uZmlnL2xvZGFzaC5mYWN0b3J5LmpzIiwiY29tbW9uL2NvbmZpZy9vY3MuY2hhbm5lbC5wcm92aWRlci5qcyIsImNvbW1vbi9jb25maWcvdXJsLnBhdHRlcm4ubG9jYWxlLmRpc2NvdmVyeS5tZXRob2QuanMiLCJjb21tb24vY29uZmlnL3dpbmRvdy5kZWNvcmF0b3IuanMiLCJjb21tb24vZGlyZWN0aXZlL2NsaXBsaXN0ZXIuZGlyZWN0aXZlLmpzIiwiY29tbW9uL2RpcmVjdGl2ZS9odHRwU3JjLmRpcmVjdGl2ZS5qcyIsImNvbW1vbi9kaXJlY3RpdmUvanNvbmxkLmRpcmVjdGl2ZS5qcyIsImNvbW1vbi9kaXJlY3RpdmUvc2ltcGxlLnN1Ym1lbnUuZGlyZWN0aXZlLmpzIiwiY29tbW9uL2ZpbHRlci9pbWFnZS51cmwuZmlsdGVyLmpzIiwiY29tbW9uL2ZpbHRlci9zaW1wbGlmeS5jaGFyYWN0ZXJzLmZpbHRlci5qcyIsImNvbW1vbi9yb3V0ZS9yb3V0ZS5jb25maWcuanMiLCJjb21tb24vc2VydmljZS9zcGlubmVyLnNlcnZpY2UuanMiLCJkb21haW4vY2F0YWxvZy9jYXRhbG9nLm1vZHVsZS5qcyIsImRvbWFpbi9uYXZpZ2F0aW9uL25hdmlnYXRpb24ubW9kdWxlLmpzIiwiZG9tYWluL3NlYXJjaC9zZWFyY2gubW9kdWxlLmpzIiwiZG9tYWluL2NhdGFsb2cvY29uZmlnL3Nhbml0aXplLmNvbmZpZy5qcyIsImRvbWFpbi9jYXRhbG9nL2NvbnRyb2xsZXIvY2F0YWxvZy5jb250cm9sbGVyLmpzIiwiZG9tYWluL2NhdGFsb2cvZGlyZWN0aXZlL2F0dHJpYnV0ZS52YWx1ZS5kaXJlY3RpdmUuanMiLCJkb21haW4vY2F0YWxvZy9kaXJlY3RpdmUvY2F0YWxvZy5tZXRhZGF0YS5kaXJlY3RpdmUuanMiLCJkb21haW4vY2F0YWxvZy9kaXJlY3RpdmUvY2F0YWxvZy50ZW1wbGF0ZS5kaXJlY3RpdmUuanMiLCJkb21haW4vY2F0YWxvZy9kaXJlY3RpdmUvZXF1YWxpemUudGVhc2VyLmhlaWdodC5kaXJlY3RpdmUuanMiLCJkb21haW4vY2F0YWxvZy9kaXJlY3RpdmUvZnVsbC53aWR0aC50YWJsZS5kaXJlY3RpdmUuanMiLCJkb21haW4vY2F0YWxvZy9kaXJlY3RpdmUvb2NzLmJyZWFkY3J1bWIuZGlyZWN0aXZlLmpzIiwiZG9tYWluL2NhdGFsb2cvZGlyZWN0aXZlL29jcy5kYXRhLnRhYmxlLmRpcmVjdGl2ZS5qcyIsImRvbWFpbi9jYXRhbG9nL2RpcmVjdGl2ZS9vY3MubmF2aWdhdGUuZGlyZWN0aXZlLmpzIiwiZG9tYWluL2NhdGFsb2cvZGlyZWN0aXZlL29jcy5uYXZpZ2F0aW9uLm1lbnUuZGlyZWN0aXZlLmpzIiwiZG9tYWluL2NhdGFsb2cvZGlyZWN0aXZlL29jcy5uZXcucHJvZHVjdHMuZGlyZWN0aXZlLmpzIiwiZG9tYWluL2NhdGFsb2cvZGlyZWN0aXZlL3Njcm9sbGFibGUudGFibGUuZGlyZWN0aXZlLmpzIiwiZG9tYWluL2NhdGFsb2cvZGlyZWN0aXZlL3N3aXRjaC5sYW5ndWFnZS5kaXJlY3RpdmUuanMiLCJkb21haW4vY2F0YWxvZy9kaXJlY3RpdmUvc3luY2hyb25pemUuaGVpZ2h0LmRpcmVjdGl2ZS5qcyIsImRvbWFpbi9jYXRhbG9nL2ZhY3RvcnkvdXJsLmJ1aWxkZXIuZmFjdG9yeS5qcyIsImRvbWFpbi9jYXRhbG9nL21vZGVsL2NhdGFsb2cuaGVscGVyLmpzIiwiZG9tYWluL2NhdGFsb2cvbW9kZWwvY2F0YWxvZy5tb2RlbC5jb25maWcuanMiLCJkb21haW4vY2F0YWxvZy9tb2RlbC9jYXRhbG9nLnJlc291cmNlLmpzIiwiZG9tYWluL2NhdGFsb2cvcm91dGUvY2F0YWxvZy5yb3V0ZS5jb25maWcuanMiLCJkb21haW4vY2F0YWxvZy9zZXJ2aWNlL2JyZWFkY3J1bWIuc2VydmljZS5qcyIsImRvbWFpbi9jYXRhbG9nL3NlcnZpY2UvY2F0YWxvZy5zZXJ2aWNlLmpzIiwiZG9tYWluL2NhdGFsb2cvc2VydmljZS9jYXRhbG9nLnVybC5zY2hlbWEuanMiLCJkb21haW4vY2F0YWxvZy9zZXJ2aWNlL21ldGEuc2VydmljZS5qcyIsImRvbWFpbi9jYXRhbG9nL3NlcnZpY2Uvc2VhcmNoLmxpc3RlbmVyLmpzIiwiZG9tYWluL2NhdGFsb2cvc2VydmljZS9zZW8uZnJpZW5kbHkudXJsLmJ1aWxkZXIuanMiLCJkb21haW4vY2F0YWxvZy9zZXJ2aWNlL3VybC5wYXJzZXIuc2VydmljZS5qcyIsImRvbWFpbi9uYXZpZ2F0aW9uL3NlcnZpY2UvbWVudS5zZXJ2aWNlLmpzIiwiZG9tYWluL25hdmlnYXRpb24vbW9kZWwvbmF2aWdhdGlvbi5tb2RlbC5jb25maWcuanMiLCJkb21haW4vbmF2aWdhdGlvbi9tb2RlbC9uYXZpZ2F0aW9uLnJlc291cmNlLmpzIiwiZG9tYWluL3NlYXJjaC9kaXJlY3RpdmUvYWN0aXZlLnNlYXJjaC5kaXJlY3RpdmUuanMiLCJkb21haW4vc2VhcmNoL2RpcmVjdGl2ZS9vY3MucXVpY2tzZWFyY2guZGlyZWN0aXZlLmpzIiwiZG9tYWluL3NlYXJjaC9kaXJlY3RpdmUvb2NzLnNlYXJjaC5kaXJlY3RpdmUuanMiLCJkb21haW4vc2VhcmNoL3JvdXRlL3NlYXJjaC5yb3V0ZS5jb25maWcuanMiLCJkb21haW4vc2VhcmNoL21vZGVsL3NlYXJjaC5tb2RlbC5jb25maWcuanMiLCJkb21haW4vc2VhcmNoL21vZGVsL3NlYXJjaC5yZXNvdXJjZS5qcyIsImRvbWFpbi9zZWFyY2gvc2VydmljZS9jbXMuc2VhcmNoLmxpc3RlbmVyLmpzIiwiZG9tYWluL3NlYXJjaC9zZXJ2aWNlL3NlYXJjaC5zZXJ2aWNlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNqQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNYQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNkQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzFGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNiQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNkQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2pDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDM0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2xEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDakRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDeEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDdkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3BCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3hFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNwQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDakJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNoQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDaEZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDekRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ25DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDekJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUM1QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDekNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzVDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNoQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUM5QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNwQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2pEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDOUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNsQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3hDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDN0ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzNHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN2QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDekNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN6S0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDcEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2pIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDbkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQy9DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNsREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUM5RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNaQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzNCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzdDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUM5REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNsQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNaQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN2QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ25CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoicGRzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoYW5ndWxhcikge1xuICAgIGFuZ3VsYXIubW9kdWxlKCdwZHMuZW52aXJvbm1lbnQnLCBbXSk7XG4gICAgYW5ndWxhci5tb2R1bGUoJ3Byb2R1Y3QtZGF0YS1zZXJ2aWNlJywgWydwZHMuY2F0YWxvZycsICdwZHMubmF2aWdhdGlvbicsICdwZHMuZW52aXJvbm1lbnQnLCAncGRzLnNlYXJjaCcsICdwZHMuY29tbW9uJywgJ3VpLnJvdXRlcicsICduZ1Nhbml0aXplJ10pO1xufSkoYW5ndWxhcik7XG4iLCIoZnVuY3Rpb24gKCkgeyBcbiByZXR1cm4gYW5ndWxhci5tb2R1bGUoXCJwZHMuZW52aXJvbm1lbnRcIilcbi5jb25zdGFudChcImNvbmZpZ1wiLCB7XG4gIFwibWV0YVRhZ3NcIjoge1xuICAgIFwic2l0ZU5hbWVcIjogXCJCb3NjaFRUXCJcbiAgfSxcbiAgXCJ1cmxTY2hlbWFcIjoge1xuICAgIFwidHJhaWxpbmdTbGFzaFwiOiBmYWxzZVxuICB9LFxuICBcInBkc1BhdGhQcmVmaXhcIjogXCIvcmVzaWRlbnRpYWxcIixcbiAgXCJmb3JjZUxhbmd1YWdlXCI6IG51bGwsXG4gIFwic2VhcmNoXCI6IHtcbiAgICBcImRlZmF1bHRJbWFnZVwiOiBcImRlZmF1bHQtc2VhcmNoXCJcbiAgfVxufSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkgeyBcbiByZXR1cm4gYW5ndWxhci5tb2R1bGUoXCJwZHMuZW52aXJvbm1lbnRcIilcbi5jb25zdGFudChcImVudlwiLCB7XG4gIFwiZW5kUG9pbnRcIjoge1xuICAgIFwicHJvZHVjdERhdGFTZXJ2aWNlXCI6IFwiaHR0cHM6Ly9kZXYwMi5zYWdpdG9uLnBsL2NhdGFsb2ctc2VydmljZS1kZXYvXCIsXG4gICAgXCJjb250ZW50U2VydmljZVwiOiBcImh0dHBzOi8vc2VydmljZXMtcnZ3LmtpdHRlbGJlcmdlci5uZXQvY29udGVudC9cIixcbiAgICBcInNlYXJjaFNlcnZpY2VcIjogXCJodHRwczovL3NlcnZpY2VzLmtpdHRlbGJlcmdlci5uZXQvc2VhcmNoL3YxL1wiLFxuICAgIFwib2NzTWVkaWFFbmRwb2ludFwiOiBcImh0dHBzOi8vZGV2MDIuc2FnaXRvbi5wbC9hc3NldC1zZXJ2aWNlLWRldi9hc3NldC9cIlxuICB9LFxuICBcInNlYXJjaFwiOiB7XG4gICAgXCJjbXNDaGFubmVsRGlzY3JpbWluYXRvclwiOiBcImRlQ0hDbXNEaXNjcmltaW5hdG9yXCIsXG4gICAgXCJwZHNDaGFubmVsRGlzY3JpbWluYXRvclwiOiBcImJ1ZGVydXNQZHNEaXNjcmltaW5hdG9yXCJcbiAgfVxufSk7XG5cbn0pKCk7XG4iLCJhbmd1bGFyLm1vZHVsZShcInBkcy5lbnZpcm9ubWVudFwiKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIiwgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHskdGVtcGxhdGVDYWNoZS5wdXQoXCJjYXRhbG9nLmh0bWxcIixcIjxjYXRhbG9nLXRlbXBsYXRlIGNhdGFsb2ctaWQ9XFxcInZtLmNhdGFsb2dJZFxcXCI+PHNlY3Rpb24gbmctaWY9XFxcInZtLmNhdGFsb2cuc2hvd0ltYWdlKClcXFwiIGNsYXNzPVxcXCJzZWN0aW9uIGZzLWtleXZpc3VhbCBwLWEtMFxcXCI+PGRpdiBjbGFzcz1cXFwic2xpZGVcXFwiPjxkaXYgY2xhc3M9XFxcInNsaWRlLWltYWdlIHNsaWRlLWltYWdlLXRyYW5zcGFyZW50LTMwXFxcIj48aW1nIGNsYXNzPVxcXCJpbWctcmVzcG9uc2l2ZVxcXCIgbmctc3JjPVxcXCJ7e3ZtLmNhdGFsb2cuaW1hZ2UudmFsdWUgfCBpbWFnZVVybDogXFwnaW1nLWxnXFwnfX1cXFwiIGFsdD1cXFwie3t2bS5jYXRhbG9nLm5hbWUudmFsdWV9fVxcXCIgdGl0bGU9XFxcInt7dm0uY2F0YWxvZy5uYW1lLnZhbHVlfX1cXFwiPjwvZGl2PjxkaXYgY2xhc3M9XFxcInNsaWRlLWNhcHRpb24gdGV4dC1jZW50ZXJcXFwiPjxoMSBjbGFzcz1cXFwiaGwtMSBzbGlkZS10aXRsZVxcXCIgbmctaWY9XFxcInZtLmNhdGFsb2cubmFtZVxcXCI+e3t2bS5jYXRhbG9nLm5hbWUudmFsdWV9fTwvaDE+PHAgbmctaWY9XFxcInZtLmNhdGFsb2cudGl0bGVcXFwiPnt7dm0uY2F0YWxvZy50aXRsZS52YWx1ZX19PC9wPjwvZGl2PjwvZGl2Pjwvc2VjdGlvbj48c2VjdGlvbiBjbGFzcz1cXFwic2VjdGlvbiBmcy1oZWFkbGluZVxcXCIgbmctaWY9XFxcInZtLmNhdGFsb2cuZGVzY3JpcHRpb25cXFwiPjxkaXYgY2xhc3M9XFxcImNvbnRhaW5lci1mbHVpZCB0ZXh0LWNlbnRlclxcXCI+PGRpdiBjbGFzcz1cXFwicm93XFxcIj48ZGl2IGNsYXNzPVxcXCJjb2wtbWQtMTAgY29sLW1kLW9mZnNldC0xXFxcIj48cD57e3ZtLmNhdGFsb2cuZGVzY3JpcHRpb24udmFsdWV9fTwvcD48L2Rpdj48L2Rpdj48L2Rpdj48L3NlY3Rpb24+PHNlY3Rpb24gbmctaWY9XFxcInZtLmNhdGFsb2cuc2hvd1RpbGVzKClcXFwiIGNsYXNzPVxcXCJzZWN0aW9uIGZzLWZvdXItY29sdW1uLW1lZGlhLXRlYXNlclxcXCI+PGRpdiBjbGFzcz1cXFwiY29udGFpbmVyLWZsdWlkXFxcIj48ZGl2IGNsYXNzPVxcXCJmbGV4LXJvd1xcXCI+PGEgY2xhc3M9XFxcImNhcmQgY29sLXhzLTYgY29sLXNtLTQgY29sLW1kLTNcXFwiIG5nLXJlcGVhdD1cXFwidGlsZSBpbiB2bS5jYXRhbG9nLnRpbGVzXFxcIiBvY3MtbmF2aWdhdGU9XFxcInRpbGUuaWQudmFsdWVcXFwiPjxpbWcgY2xhc3M9XFxcImNhcmQtaW1nLXRvcCBpbWctcmVzcG9uc2l2ZSBpbWctd2lkZW5cXFwiIG5nLXNyYz1cXFwie3t0aWxlLmltYWdlLnZhbHVlIHwgaW1hZ2VVcmw6IFxcJ2ltZy1zbVxcJ319XFxcIiBhbHQ9XFxcInt7dGlsZS5uYW1lLnZhbHVlfX1cXFwiIHRpdGxlPVxcXCJ7e3RpbGUubmFtZS52YWx1ZX19XFxcIj48ZGl2IGNsYXNzPVxcXCJjYXJkLWJsb2NrXFxcIiBuZy1pZj1cXFwidGlsZS50aXRsZVxcXCIgZXF1YWxpemUtdGVhc2VyLWhlaWdodD48ZGl2IGNsYXNzPVxcXCJjYXJkLXRpdGxlIGhsLTQgdGV4dC13cmFwXFxcIj57e3RpbGUudGl0bGUudmFsdWV9fTwvZGl2PjxwIGNsYXNzPVxcXCJjYXJkLXRleHRcXFwiPnt7dGlsZS5kZXNjcmlwdGlvbi52YWx1ZX19PC9wPjwvZGl2PjxkaXYgY2xhc3M9XFxcImNhcmQtYmxvY2stbGlua1xcXCI+PHNwYW4gY2xhc3M9XFxcImxpbmstbW9yZVxcXCIgdHJhbnNsYXRlPVxcXCJNT1JFLkRFVEFJTFNcXFwiPjwvc3Bhbj48L2Rpdj48L2E+PC9kaXY+PC9kaXY+PC9zZWN0aW9uPjxzZWN0aW9uIG5nLWlmPVxcXCJ2bS5jYXRhbG9nLnNob3dMaXN0KClcXFwiIGNsYXNzPVxcXCJzZWN0aW9uIGZzLXR3by1jb2x1bW4tc3F1YXJlLW1lZGlhLXRleHRcXFwiPjxkaXYgY2xhc3M9XFxcImNvbnRhaW5lci1mbHVpZCBiZy1ncmV5LWxpZ2h0XFxcIiBuZy1yZXBlYXQ9XFxcIml0ZW0gaW4gdm0uY2F0YWxvZy5saXN0XFxcIj48ZGl2IGNsYXNzPVxcXCJmbGV4LXJvd1xcXCI+PGRpdiBjbGFzcz1cXFwiY29sLXNtLTQgY29sLW1lZGlhXFxcIj48ZGl2IGNsYXNzPVxcXCJyZWxhdGl2ZS1jb250YWluZXJcXFwiIG5nLWlmPVxcXCJpdGVtLm5ldy52YWx1ZVxcXCI+PGRpdiBjbGFzcz1cXFwibGFiZWwtY29udGFpbmVyIHNtYWxsIGxlZnRcXFwiPjxkaXYgY2xhc3M9XFxcImxhYmVsLXdyYXBwZXItb3V0ZXJcXFwiPjxkaXYgY2xhc3M9XFxcImxhYmVsLXdyYXBwZXItaW5uZXJcXFwiPjxkaXYgY2xhc3M9XFxcImxhYmVsLWNvbnRlbnRcXFwiIHRyYW5zbGF0ZT1cXFwiTkVXLkxBQkVMXFxcIj48L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj48aW1nIGNsYXNzPVxcXCJpbWctcmVzcG9uc2l2ZSBpbWctd2lkZW5cXFwiIG5nLXNyYz1cXFwie3tpdGVtLmltYWdlLnZhbHVlIHwgaW1hZ2VVcmw6IFxcJ2ltZy1tZFxcJ319XFxcIiBhbHQ9XFxcInt7aXRlbS5uYW1lLnZhbHVlfX1cXFwiIHRpdGxlPVxcXCJ7e2l0ZW0ubmFtZS52YWx1ZX19XFxcIj48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtc20tOCBjb2wtdGV4dFxcXCI+PGRpdiBjbGFzcz1cXFwiaGwtMyBjb2x1bW4tdGl0bGUgdGV4dC1wcmltYXJ5XFxcIj48YSBvY3MtbmF2aWdhdGU9XFxcIml0ZW0uaWQudmFsdWVcXFwiPnt7aXRlbS50aXRsZS52YWx1ZX19PC9hPjwvZGl2Pjx1bCBjbGFzcz1cXFwiY2hlY2tsaXN0XFxcIiBuZy1pZj1cXFwiaXRlbS5idWxsZXRzLmxlbmd0aFxcXCI+PGxpIG5nLXJlcGVhdD1cXFwiYnVsbGV0IGluIGl0ZW0uYnVsbGV0c1xcXCI+e3tidWxsZXR9fTwvbGk+PC91bD48dWwgY2xhc3M9XFxcImxpc3QtaW5saW5lIGJ1dHRvbi1saXN0XFxcIj48bGk+PGEgY2xhc3M9XFxcImJ0biBidG4tcHJpbWFyeVxcXCIgb2NzLW5hdmlnYXRlPVxcXCJpdGVtLmlkLnZhbHVlXFxcIj48c3BhbiB0cmFuc2xhdGU9XFxcIk1PUkUuREVUQUlMU1xcXCI+PC9zcGFuPjwvYT48L2xpPjwvdWw+PC9kaXY+PC9kaXY+PC9kaXY+PC9zZWN0aW9uPjxzZWN0aW9uIG5nLWlmPVxcXCJ2bS5jYXRhbG9nLnNob3dUZWFzZXIoKVxcXCIgY2xhc3M9XFxcInNlY3Rpb24gZnMtdHdvLWNvbHVtbi1tZWRpYS10ZXh0LXdpdGgtbG9nbyBiZy1ncmV5XFxcIj48ZGl2IGNsYXNzPVxcXCJjb250YWluZXItZmx1aWRcXFwiPjxkaXYgY2xhc3M9XFxcInJvd1xcXCIgbmctaWY9XFxcInZtLmNhdGFsb2cubmV3LnZhbHVlXFxcIj48ZGl2IGNsYXNzPVxcXCJyZWxhdGl2ZS1jb250YWluZXJcXFwiPjxkaXYgY2xhc3M9XFxcImxhYmVsLWNvbnRhaW5lciBsYXJnZSByaWdodFxcXCI+PGRpdiBjbGFzcz1cXFwibGFiZWwtd3JhcHBlci1vdXRlclxcXCI+PGRpdiBjbGFzcz1cXFwibGFiZWwtd3JhcHBlci1pbm5lclxcXCI+PGRpdiBjbGFzcz1cXFwibGFiZWwtY29udGVudFxcXCIgdHJhbnNsYXRlPVxcXCJORVcuTEFCRUxcXFwiPjwvZGl2PjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9XFxcImxhYmVsLXdyYXBwZXItb3V0ZXJcXFwiPjxpbWcgY2xhc3M9XFxcIlxcXCIgbmctc3JjPVxcXCJ7e3ZtLmNhdGFsb2cubmV3SW1hZ2V9fVxcXCIgYWx0PVxcXCJcXFwiIHRpdGxlPVxcXCJcXFwiPjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9XFxcInJvd1xcXCI+PGRpdiBjbGFzcz1cXFwiY29sLXNtLTYgY29sLW1lZGlhXFxcIj48ZGl2IGNsYXNzPVxcXCJqcy1zbGljay1zbGlkZXIgc2xpY2staW1hZ2Utc2xpZGVyXFxcIiBkYXRhLXNsaWNrPVxcJ3tcXFwiYXJyb3dzXFxcIjogZmFsc2UsIFxcXCJkb3RzXFxcIjogdHJ1ZSwgXFxcImF1dG9wbGF5XFxcIjogdHJ1ZSwgXFxcImF1dG9wbGF5U3BlZWRcXFwiOiA0MDAwLCBcXFwic3BlZWRcXFwiOiAxMDAwLCBcXFwiY3NzRWFzZVxcXCI6IFxcXCJlYXNlLWluLW91dFxcXCJ9XFwnPjxkaXYgY2xhc3M9XFxcInNsaWRlXFxcIj48aW1nIGNsYXNzPVxcXCJpbWctcmVzcG9uc2l2ZSBpbWctd2lkZW5cXFwiIG5nLXNyYz1cXFwie3t2bS5jYXRhbG9nLmltYWdlLnZhbHVlIHwgaW1hZ2VVcmw6IFxcJ2ltZy1tZFxcJ319XFxcIiBhbHQ9XFxcInt7dm0uY2F0YWxvZy5uYW1lLnZhbHVlfX1cXFwiIHRpdGxlPVxcXCJ7e3ZtLmNhdGFsb2cubmFtZS52YWx1ZX19XFxcIj4gPGltZyBjbGFzcz1cXFwiaW1nLW92ZXJsYXlcXFwiIG5nLWlmPVxcXCJ2bS5jYXRhbG9nLmVuZXJneUVmZmljaWVuY3kuaW1hZ2VcXFwiIG5nLXNyYz1cXFwie3t2bS5jYXRhbG9nLmVuZXJneUVmZmljaWVuY3kuaW1hZ2UudmFsdWV9fVxcXCI+PC9kaXY+PC9kaXY+PC9kaXY+PGRpdiBjbGFzcz1cXFwiY29sLXNtLTYgY29sLXRleHRcXFwiPjxoMSBjbGFzcz1cXFwiaGwtMiBwcm9kdWN0LW5hbWVcXFwiPnt7dm0uY2F0YWxvZy5uYW1lLnZhbHVlfX08L2gxPjxwPnt7dm0uY2F0YWxvZy50aXRsZS52YWx1ZX19PC9wPjwvZGl2PjwvZGl2PjwvZGl2Pjwvc2VjdGlvbj48c2VjdGlvbiBjbGFzcz1cXFwic2VjdGlvbiBmcy10d28tY29sdW1uLWhlYWRsaW5lLXRleHQgYmctZ3JleS1kYXJrXFxcIiBuZy1pZj1cXFwidm0uY2F0YWxvZy5zaG93VGVjaG5pY2FsSW5mb3JtYXRpb24oKVxcXCI+PGRpdiBjbGFzcz1cXFwiY29udGFpbmVyLWZsdWlkXFxcIj48ZGl2IGNsYXNzPVxcXCJyb3dcXFwiPjxkaXYgY2xhc3M9XFxcImNvbC1zbS00XFxcIj48aDIgY2xhc3M9XFxcInNlY3Rpb24tdGl0bGVcXFwiIHRyYW5zbGF0ZT1cXFwiVEVDSE5JQ0FMLklORk9STUFUSU9OXFxcIj48L2gyPjwvZGl2PjxkaXYgY2xhc3M9XFxcImNvbC1zbS04XFxcIj48dWwgY2xhc3M9XFxcImNoZWNrbGlzdFxcXCI+PGxpIG5nLXJlcGVhdD1cXFwiaW5mbyBpbiB2bS5jYXRhbG9nLnRlY2huaWNhbEluZm9ybWF0aW9uXFxcIj57e2luZm99fTwvbGk+PC91bD48L2Rpdj48L2Rpdj48L2Rpdj48L3NlY3Rpb24+PHNlY3Rpb24gY2xhc3M9XFxcInNlY3Rpb24gZnMtdHdvLWNvbHVtbi1pY29uLWFjY29yZGlvblxcXCIgbmctaWY9XFxcInZtLmNhdGFsb2cuc2hvd01vcmVEZXRhaWxzKClcXFwiPjxkaXYgY2xhc3M9XFxcImNvbnRhaW5lci1mbHVpZFxcXCI+PGgyIGNsYXNzPVxcXCJzZWN0aW9uLXRpdGxlIHRleHQtcHJpbWFyeSB0ZXh0LWNlbnRlclxcXCI+e3t2bS5jYXRhbG9nLm1vcmVEZXRhaWxzLnRpdGxlLnZhbHVlfX08L2gyPjxkaXYgaWQ9XFxcImFjcmQtODcyOTIxNTg3XFxcIiBjbGFzcz1cXFwiYWNjb3JkaW9uIHBhbmVsLWdyb3VwIG0tYi0wXFxcIiByb2xlPVxcXCJ0YWJsaXN0XFxcIiBhcmlhLW11bHRpc2VsZWN0YWJsZT1cXFwidHJ1ZVxcXCI+PGRpdiBjbGFzcz1cXFwicGFuZWxcXFwiIG5nLXJlcGVhdD1cXFwiaXRlbSBpbiB2bS5jYXRhbG9nLm1vcmVEZXRhaWxzLmVsZW1lbnRzXFxcIj48ZGl2IGlkPVxcXCJhY3JkLTg3MjkyMTU4Ny1oZWFkaW5nLXt7JGluZGV4fX1cXFwiIGNsYXNzPVxcXCJwYW5lbC1oZWFkaW5nXFxcIiByb2xlPVxcXCJ0YWJcXFwiPjxoMyBjbGFzcz1cXFwicGFuZWwtdGl0bGVcXFwiPjxhIGNsYXNzPVxcXCJjb2xsYXBzZWRcXFwiIHJvbGU9XFxcImJ1dHRvblxcXCIgZGF0YS10b2dnbGU9XFxcImNvbGxhcHNlXFxcIiBkYXRhLXBhcmVudD1cXFwiI2FjcmQtODcyOTIxNTg3XFxcIiBkYXRhLXRhcmdldD1cXFwiI2FjcmQtODcyOTIxNTg3LXBhbmVsLXt7JGluZGV4fX1cXFwiIGFyaWEtY29udHJvbHM9XFxcImFjcmQtODcyOTIxNTg3LXBhbmVsLXt7JGluZGV4fX1cXFwiIGFyaWEtZXhwYW5kZWQ9XFxcImZhbHNlXFxcIj57e2l0ZW0udGl0bGV9fTwvYT48L2gzPjwvZGl2PjxkaXYgaWQ9XFxcImFjcmQtODcyOTIxNTg3LXBhbmVsLXt7JGluZGV4fX1cXFwiIGNsYXNzPVxcXCJwYW5lbC1jb2xsYXBzZSBjb2xsYXBzZVxcXCIgcm9sZT1cXFwidGFicGFuZWxcXFwiIGFyaWEtbGFiZWxsZWRieT1cXFwiYWNyZC04NzI5MjE1ODctaGVhZGluZy17eyRpbmRleH19XFxcIj48YXJ0aWNsZSBjbGFzcz1cXFwicGFuZWwtYm9keSBhcnRpY2xlXFxcIj48cCBuZy1pZj1cXFwiIWl0ZW0uZGVzY3JpcHRpb24uZWxlbWVudHNcXFwiIG5nLWJpbmQtaHRtbD1cXFwiaXRlbS5kZXNjcmlwdGlvbiB8IGNvbnZlcnRXaGl0ZXNwYWNlc1xcXCI+PC9wPjx1bCBuZy1pZj1cXFwiaXRlbS5kZXNjcmlwdGlvbi5lbGVtZW50c1xcXCI+PGxpIG5nLXJlcGVhdD1cXFwiZWwgaW4gaXRlbS5kZXNjcmlwdGlvbi5lbGVtZW50c1xcXCI+e3tlbH19PC9saT48L3VsPjxpbWcgbmctaWY9XFxcIml0ZW0uaW1hZ2VcXFwiIGNsYXNzPVxcXCJpbWctcmVzcG9uc2l2ZSBpbWctd2lkZW4gbS1iLTFcXFwiIG5nLXNyYz1cXFwie3tpdGVtLmltYWdlIHwgaW1hZ2VVcmx9fVxcXCIgYWx0PVxcXCJ7e2l0ZW0udGl0bGV9fVxcXCIgdGl0bGU9XFxcInt7aXRlbS50aXRsZX19XFxcIj48L2FydGljbGU+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+PC9zZWN0aW9uPjxzZWN0aW9uIGNsYXNzPVxcXCJzZWN0aW9uIGZzLXRhYmxlLXNjcm9sbGFibGVcXFwiIG5nLWlmPVxcXCJ2bS5jYXRhbG9nLnNob3dUZWNobmljYWxUYWJsZSgpXFxcIj48ZGl2IGNsYXNzPVxcXCJjb250YWluZXItZmx1aWRcXFwiPjxoMiBjbGFzcz1cXFwic2VjdGlvbi10aXRsZSB0ZXh0LXByaW1hcnkgdGV4dC1jZW50ZXJcXFwiIHRyYW5zbGF0ZT1cXFwiVEVDSE5JQ0FMLkRBVEFcXFwiPjwvaDI+PGRpdiBjbGFzcz1cXFwicm93IHNjcm9sbGFibGUtdGFibGUtd3JhcHBlclxcXCI+PGRpdiBjbGFzcz1cXFwiY29sLXhzLTYgY29sLXNtLTQgY29sLW1kLTMgcC1yLTBcXFwiPjxhIGNsYXNzPVxcXCJjYXJkIGNhcmQtc3RpY2t5XFxcIj48dGFibGUgY2xhc3M9XFxcInRhYmxlIGpzLWRhdGEtdGFibGVcXFwiIGRhdGEtb3JkZXJpbmc9XFxcImZhbHNlXFxcIiBkYXRhLXBhZ2luZz1cXFwiZmFsc2VcXFwiIGRhdGEtc2VhcmNoaW5nPVxcXCJmYWxzZVxcXCIgZGF0YS1pbmZvPVxcXCJmYWxzZVxcXCIgZGF0YS1hdXRvLXdpZHRoPVxcXCJmYWxzZVxcXCIgZGF0YS1yZXNwb25zaXZlPVxcXCJ0cnVlXFxcIj48dGhlYWQ+PHRyPjx0aCBjbGFzcz1cXFwidGFibGUtY2VudGVyXFxcIj4mbmJzcDs8L3RoPjwvdHI+PC90aGVhZD48dGJvZHk+PHRyIG5nLXJlcGVhdD1cXFwiYXR0cmlidXRlIGluIHZtLmNhdGFsb2cudGFibGUuYXR0cmlidXRlc1xcXCI+PHRkPjxzcGFuIGNsYXNzPVxcXCJ0ZC1oZWFkbGluZVxcXCI+e3thdHRyaWJ1dGUubmFtZX19PC9zcGFuPjwvdGQ+PC90cj48L3Rib2R5PjwvdGFibGU+PC9hPjwvZGl2PjxkaXYgY2xhc3M9XFxcImNvbC14cy02IGNvbC1zbS04IGNvbC1tZC05IHAtbC0wXFxcIj48ZGl2IGNsYXNzPVxcXCJqcy1zbGljay1zbGlkZXIgc2xpY2stY29udGVudC1zbGlkZXIganMtZnVsbC13aWR0aC1zbGljay10cmFja1xcXCIgZGF0YS1zbGljaz1cXCd7XFxcImFycm93c1xcXCI6IHRydWUsIFxcXCJhcHBlbmRBcnJvd3NcXFwiOiBcXFwiLnNjcm9sbGFibGUtdGFibGUtd3JhcHBlclxcXCIsIFxcXCJhcHBlbmREb3RzXFxcIjogXFxcIi5zY3JvbGxhYmxlLXRhYmxlLXdyYXBwZXJcXFwiLCBcXFwiZG90c1xcXCI6IHRydWUsIFxcXCJpbmZpbml0ZVxcXCI6IGZhbHNlLCBcXFwic3BlZWRcXFwiOiA1MDAsIFxcXCJjc3NFYXNlXFxcIjogXFxcImVhc2UtaW4tb3V0XFxcIiwgXFxcInNsaWRlc1RvU2hvd1xcXCI6IDMsIFxcXCJzbGlkZXNUb1Njcm9sbFxcXCI6IDEsIFxcXCJyZXNwb25zaXZlXFxcIjogW3sgXFxcImJyZWFrcG9pbnRcXFwiOiA5OTIsIFxcXCJzZXR0aW5nc1xcXCI6IHsgXFxcImFycm93c1xcXCI6IGZhbHNlLCBcXFwic2xpZGVzVG9TaG93XFxcIjogMiwgXFxcInNsaWRlc1RvU2Nyb2xsXFxcIjogMn19LCB7IFxcXCJicmVha3BvaW50XFxcIjogNzY4LCBcXFwic2V0dGluZ3NcXFwiOiB7IFxcXCJhcnJvd3NcXFwiOiBmYWxzZSwgXFxcInNsaWRlc1RvU2hvd1xcXCI6IDEsIFxcXCJzbGlkZXNUb1Njcm9sbFxcXCI6IDF9fV19XFwnPjxkaXYgY2xhc3M9XFxcImNhcmRcXFwiIG5nLXJlcGVhdD1cXFwicHJvZHVjdCBpbiB2bS5jYXRhbG9nLnRhYmxlLnByb2R1Y3RzXFxcIj48dGFibGUgY2xhc3M9XFxcInRhYmxlIGpzLWRhdGEtdGFibGVcXFwiIGRhdGEtb3JkZXJpbmc9XFxcImZhbHNlXFxcIiBkYXRhLXBhZ2luZz1cXFwiZmFsc2VcXFwiIGRhdGEtc2VhcmNoaW5nPVxcXCJmYWxzZVxcXCIgZGF0YS1pbmZvPVxcXCJmYWxzZVxcXCIgZGF0YS1hdXRvLXdpZHRoPVxcXCJmYWxzZVxcXCIgZGF0YS1yZXNwb25zaXZlPVxcXCJ0cnVlXFxcIj48dGhlYWQ+PHRyPjx0aCBjbGFzcz1cXFwidGFibGUtY2VudGVyXFxcIj57e3Byb2R1Y3QuaGVhZGVyfX08L3RoPjwvdHI+PC90aGVhZD48dGJvZHk+PHRyIG5nLXJlcGVhdD1cXFwiYXR0cmlidXRlIGluIHByb2R1Y3QuYXR0cmlidXRlc1xcXCIgc3luY2hyb25pemUtaGVpZ2h0Pjx0ZD48c3BhbiBhdHRyaWJ1dGUtdmFsdWU9XFxcImF0dHJpYnV0ZVxcXCIgYXR0cmlidXRlLWFsdD1cXFwicHJvZHVjdC5uYW1lXFxcIiBhdHRyaWJ1dGUtdGl0bGU9XFxcInByb2R1Y3QubmFtZVxcXCI+PC9zcGFuPjxzcGFuIG5nLWlmPVxcXCJhdHRyaWJ1dGUudW5pdCAhPSBudWxsXFxcIj57e2F0dHJpYnV0ZS51bml0fX08L3NwYW4+PC90ZD48L3RyPjwvdGJvZHk+PC90YWJsZT48L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj48L3NlY3Rpb24+PHNlY3Rpb24gY2xhc3M9XFxcInNlY3Rpb25cXFwiIG5nLWlmPVxcXCJ2bS5jYXRhbG9nLnNob3dGb290bm90ZXMoKVxcXCI+PGRpdiBjbGFzcz1cXFwiY29udGFpbmVyLWZsdWlkXFxcIj48ZGl2IGNsYXNzPVxcXCJyb3dcXFwiPjxkaXYgY2xhc3M9XFxcImNvbC1tZC0xMFxcXCI+PGRpdiBjbGFzcz1cXFwiZm9vdG5vdGVzXFxcIj48b2wgY2xhc3M9XFxcImZvb3Rub3RlLW9yZGVyZWQtbGlzdFxcXCIgbmctaWY9XFxcInZtLmNhdGFsb2cuZm9vdG5vdGVzLnR5cGUgPT0gXFwnbGlzdFxcJ1xcXCI+PGxpIG5nLXJlcGVhdD1cXFwiaXRlbSBpbiB2bS5jYXRhbG9nLmZvb3Rub3Rlcy52YWx1ZS5lbGVtZW50c1xcXCI+e3tpdGVtfX08L2xpPjwvb2w+PHAgY2xhc3M9XFxcImZvb3Rub3RlLXBhcmFncmFwaFxcXCIgbmctaWY9XFxcInZtLmNhdGFsb2cuZm9vdG5vdGVzLnR5cGUgPT0gXFwnc3RyaW5nXFwnXFxcIj57e3ZtLmNhdGFsb2cuZm9vdG5vdGVzLnZhbHVlfX08L3A+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+PC9zZWN0aW9uPjwvY2F0YWxvZy10ZW1wbGF0ZT5cIik7XG4kdGVtcGxhdGVDYWNoZS5wdXQoXCJjYXRhbG9nMy5odG1sXCIsXCI8Y2F0YWxvZy10ZW1wbGF0ZSBjYXRhbG9nLWlkPVxcXCJ2bS5jYXRhbG9nSWRcXFwiPjxkaXYgbmctcmVwZWF0PVxcXCJzZWN0aW9uIGluIHZtLmNhdGFsb2cuc2VjdGlvbnNcXFwiPjxkaXYgbmctaW5pdD1cXFwiJHNlY3Rpb24gPSBzZWN0aW9uLnBhcmFtc1xcXCIgbmctaW5jbHVkZT1cXFwiXFwnc2VjdGlvbi1cXCcgKyBzZWN0aW9uLm5hbWVcXFwiPjwvZGl2PjwvZGl2PjwvY2F0YWxvZy10ZW1wbGF0ZT48c2NyaXB0IHR5cGU9XFxcInRleHQvbmctdGVtcGxhdGVcXFwiIGlkPVxcXCJzZWN0aW9uLUtFWVZJU1VBTFxcXCI+PHNlY3Rpb24gY2xhc3M9XFxcInNlY3Rpb24gZnMta2V5dmlzdWFsIHAtYS0wXFxcIj5cXG4gICAgPGRpdiBjbGFzcz1cXFwic2xpZGVcXFwiPlxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwic2xpZGUtaW1hZ2Ugc2xpZGUtaW1hZ2UtdHJhbnNwYXJlbnQtMzBcXFwiPlxcbiAgICAgICAgICAgIDxpbWcgY2xhc3M9XFxcImltZy1yZXNwb25zaXZlXFxcIiBuZy1zcmM9XFxcInt7JHNlY3Rpb24uYmFja2dyb3VuZEltZ1VybCB8IGltYWdlVXJsOiBcXCdpbWcteGxnXFwnfX1cXFwiIGFsdD1cXFwie3skc2VjdGlvbi5uYW1lfX1cXFwiIHRpdGxlPVxcXCJ7eyRzZWN0aW9uLm5hbWV9fVxcXCI+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcInNsaWRlLWNhcHRpb24gdGV4dC1jZW50ZXJcXFwiPlxcbiAgICAgICAgICAgIDxoMSBjbGFzcz1cXFwiaGwtMSBzbGlkZS10aXRsZVxcXCIgbmctaWY9XFxcIiRzZWN0aW9uLnRpdGxlXFxcIj57eyRzZWN0aW9uLnRpdGxlfX08L2gxPlxcbiAgICAgICAgICAgIDxwIG5nLWlmPVxcXCIkc2VjdGlvbi5zdWJ0aXRsZVxcXCI+e3skc2VjdGlvbi5zdWJ0aXRsZX19PC9wPlxcbiAgICAgICAgPC9kaXY+XFxuICAgIDwvZGl2Plxcbjwvc2VjdGlvbj48L3NjcmlwdD48c2NyaXB0IHR5cGU9XFxcInRleHQvbmctdGVtcGxhdGVcXFwiIGlkPVxcXCJzZWN0aW9uLUNBVEVHT1JZX0RFU0NSSVBUSU9OXFxcIj48c2VjdGlvbiBjbGFzcz1cXFwic2VjdGlvbiBmcy1oZWFkbGluZVxcXCIgbmctaWY9XFxcIiRzZWN0aW9uLnRleHRcXFwiPlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJjb250YWluZXItZmx1aWQgdGV4dC1jZW50ZXJcXFwiPlxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwicm93XFxcIj5cXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb2wtbWQtMTAgY29sLW1kLW9mZnNldC0xXFxcIj5cXG4gICAgICAgICAgICAgICAgPHA+e3skc2VjdGlvbi50ZXh0fX08L3A+XFxuICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgPC9kaXY+XFxuPC9zZWN0aW9uPjwvc2NyaXB0PjxzY3JpcHQgdHlwZT1cXFwidGV4dC9uZy10ZW1wbGF0ZVxcXCIgaWQ9XFxcInNlY3Rpb24tVElMRVNcXFwiPjxzZWN0aW9uIGNsYXNzPVxcXCJzZWN0aW9uIGZzLWZvdXItY29sdW1uLW1lZGlhLXRlYXNlclxcXCIgbmctaWY9XFxcIiRzZWN0aW9uLml0ZW1zLmxlbmd0aFxcXCI+XFxuICAgIDxkaXYgY2xhc3M9XFxcImNvbnRhaW5lci1mbHVpZFxcXCI+XFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmbGV4LXJvd1xcXCI+XFxuICAgICAgICAgICAgPGEgY2xhc3M9XFxcImNhcmQgY29sLXhzLTYgY29sLXNtLTQgY29sLW1kLTNcXFwiIG5nLXJlcGVhdD1cXFwidGlsZSBpbiAkc2VjdGlvbi5pdGVtc1xcXCIgb2NzLW5hdmlnYXRlPVxcXCJ0aWxlLmNhdGFsb2dJZFxcXCI+XFxuICAgICAgICAgICAgICAgIDxpbWcgY2xhc3M9XFxcImNhcmQtaW1nLXRvcCBpbWctcmVzcG9uc2l2ZSBpbWctd2lkZW5cXFwiIG5nLXNyYz1cXFwie3t0aWxlLmltYWdlVXJsIHwgaW1hZ2VVcmw6IFxcJ2ltZy1tZFxcJ319XFxcIiBhbHQ9XFxcInt7dGlsZS50aXRsZX19XFxcIiB0aXRsZT1cXFwie3t0aWxlLnRpdGxlfX1cXFwiPlxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjYXJkLWJsb2NrXFxcIiBuZy1pZj1cXFwidGlsZS50aXRsZVxcXCIgZXF1YWxpemUtdGVhc2VyLWhlaWdodD5cXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNhcmQtdGl0bGUgaGwtNFxcXCI+e3t0aWxlLnRpdGxlfX08L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVxcXCJjYXJkLXRleHRcXFwiPnt7dGlsZS5zdWJ0aXRsZX19PC9wPlxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY2FyZC1ibG9jay1saW5rXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJsaW5rLW1vcmVcXFwiIHRyYW5zbGF0ZT1cXFwiTU9SRS5ERVRBSUxTXFxcIj48L3NwYW4+XFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgIDwvYT5cXG4gICAgICAgIDwvZGl2PlxcbiAgICA8L2Rpdj5cXG48L3NlY3Rpb24+PC9zY3JpcHQ+PHNjcmlwdCB0eXBlPVxcXCJ0ZXh0L25nLXRlbXBsYXRlXFxcIiBpZD1cXFwic2VjdGlvbi1MSVNUXFxcIj48c2VjdGlvbiBjbGFzcz1cXFwic2VjdGlvbiBmcy10d28tY29sdW1uLXNxdWFyZS1tZWRpYS10ZXh0XFxcIj5cXG4gICAgPGRpdiBjbGFzcz1cXFwiY29udGFpbmVyLWZsdWlkIGJnLWdyZXktbGlnaHRcXFwiIG5nLXJlcGVhdD1cXFwiaXRlbSBpbiAkc2VjdGlvbi5pdGVtc1xcXCI+XFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmbGV4LXJvd1xcXCI+XFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29sLXNtLTQgY29sLW1lZGlhXFxcIj5cXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwicmVsYXRpdmUtY29udGFpbmVyXFxcIiBuZy1pZj1cXFwiaXRlbS5uZXdcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwibGFiZWwtY29udGFpbmVyIHNtYWxsIGxlZnRcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImxhYmVsLXdyYXBwZXItb3V0ZXJcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJsYWJlbC13cmFwcGVyLWlubmVyXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImxhYmVsLWNvbnRlbnRcXFwiIHRyYW5zbGF0ZT1cXFwiTkVXLkxBQkVMXFxcIj48L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgIDxpbWcgY2xhc3M9XFxcImltZy1yZXNwb25zaXZlIGltZy13aWRlblxcXCIgbmctc3JjPVxcXCJ7e2l0ZW0uaW1hZ2VVcmwgfCBpbWFnZVVybDogXFwnaW1nLWxnXFwnfX1cXFwiIGFsdD1cXFwie3tpdGVtLnRpdGxlfX1cXFwiIHRpdGxlPVxcXCJ7e2l0ZW0udGl0bGV9fVxcXCI+XFxuICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29sLXNtLTggY29sLXRleHRcXFwiPlxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJwcm9kdWN0LXR5cGUgdGV4dC1wcmltYXJ5XFxcIiBuZy1pZj1cXFwiaXRlbS50eXBlXFxcIj57e2l0ZW0udHlwZX19PC9kaXY+XFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImhsLTMgY29sdW1uLXRpdGxlIHRleHQtcHJpbWFyeVxcXCI+XFxuICAgICAgICAgICAgICAgICAgICA8YSBuZy1pZj1cXFwiIWl0ZW0uZGV0YWlsc0hpZGRlblxcXCIgb2NzLW5hdmlnYXRlPVxcXCJpdGVtLmNhdGFsb2dJZFxcXCI+e3tpdGVtLnRpdGxlfX08L2E+XFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IG5nLWlmPVxcXCJpdGVtLmRldGFpbHNIaWRkZW5cXFwiPnt7aXRlbS50aXRsZX19PC9kaXY+XFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICA8cCBuZy1pZj1cXFwiIXZtLmlzQXJyYXkoaXRlbS5zdWJ0aXRsZSlcXFwiPnt7aXRlbS5zdWJ0aXRsZX19PC9wPlxcbiAgICAgICAgICAgICAgICA8dWwgbmctaWY9XFxcInZtLmlzQXJyYXkoaXRlbS5zdWJ0aXRsZSlcXFwiIGNsYXNzPVxcXCJjaGlsZHJlbi1saXN0XFxcIj5cXG4gICAgICAgICAgICAgICAgICAgIDxsaSBuZy1yZXBlYXQ9XFxcImJ1bGxldCBpbiBpdGVtLnN1YnRpdGxlXFxcIj57e2J1bGxldH19PC9saT5cXG4gICAgICAgICAgICAgICAgPC91bD5cXG4gICAgICAgICAgICAgICAgPHVsIGNsYXNzPVxcXCJsaXN0LWlubGluZSBidXR0b24tbGlzdFxcXCI+XFxuICAgICAgICAgICAgICAgICAgICA8bGk+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgbmctaWY9XFxcIiFpdGVtLmRldGFpbHNIaWRkZW5cXFwiIGNsYXNzPVxcXCJidG4gYnRuLXByaW1hcnlcXFwiIG9jcy1uYXZpZ2F0ZT1cXFwiaXRlbS5jYXRhbG9nSWRcXFwiPjxzcGFuIHRyYW5zbGF0ZT1cXFwiTU9SRS5ERVRBSUxTXFxcIj48L3NwYW4+PC9hPlxcbiAgICAgICAgICAgICAgICAgICAgPC9saT5cXG4gICAgICAgICAgICAgICAgPC91bD5cXG4gICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgIDwvZGl2PlxcbiAgICA8L2Rpdj5cXG48L3NlY3Rpb24+PC9zY3JpcHQ+PHNjcmlwdCB0eXBlPVxcXCJ0ZXh0L25nLXRlbXBsYXRlXFxcIiBpZD1cXFwic2VjdGlvbi1MSVNUX0NBUkRcXFwiPjxzZWN0aW9uIGNsYXNzPVxcXCJzZWN0aW9uIGZzLXR3by1jb2x1bW4tbWVkaWEtdGV4dFxcXCIgbmctcmVwZWF0PVxcXCJpdGVtIGluICRzZWN0aW9uLml0ZW1zXFxcIj5cXG4gICAgPGRpdiBjbGFzcz1cXFwiY29udGFpbmVyLWZsdWlkXFxcIj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcInJvd1xcXCI+XFxuICAgICAgICAgICAgPGEgbmctaWY9XFxcIiFpdGVtLmRldGFpbHNIaWRkZW5cXFwiIGNsYXNzPVxcXCJjYXJkXFxcIiBvY3MtbmF2aWdhdGU9XFxcIml0ZW0uY2F0YWxvZ0lkXFxcIiBuZy1pbmNsdWRlPVxcXCJcXCdwcm9kdWN0LWNhcmQtaW1hZ2VcXCdcXFwiPjwvYT5cXG4gICAgICAgICAgICA8ZGl2IG5nLWlmPVxcXCJpdGVtLmRldGFpbHNIaWRkZW5cXFwiIGNsYXNzPVxcXCJjYXJkXFxcIiBuZy1pbmNsdWRlPVxcXCJcXCdwcm9kdWN0LWNhcmQtaW1hZ2VcXCdcXFwiPjwvZGl2PlxcblxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbC1zbS02IGNvbC10ZXh0XFxcIj5cXG4gICAgICAgICAgICAgICAgPGEgbmctaWY9XFxcIiFpdGVtLmRldGFpbHNIaWRkZW5cXFwiIGNsYXNzPVxcXCJjYXJkXFxcIiBvY3MtbmF2aWdhdGU9XFxcIml0ZW0uY2F0YWxvZ0lkXFxcIiBuZy1pbmNsdWRlPVxcXCJcXCdwcm9kdWN0LWNhcmQtZGV0YWlsc1xcJ1xcXCI+PC9hPlxcbiAgICAgICAgICAgICAgICA8ZGl2IG5nLWlmPVxcXCJpdGVtLmRldGFpbHNIaWRkZW5cXFwiIGNsYXNzPVxcXCJjYXJkXFxcIiBuZy1pbmNsdWRlPVxcXCJcXCdwcm9kdWN0LWNhcmQtZGV0YWlsc1xcJ1xcXCI+PC9kaXY+XFxuICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgPC9kaXY+XFxuPC9zZWN0aW9uPjwvc2NyaXB0PjxzY3JpcHQgdHlwZT1cXFwidGV4dC9uZy10ZW1wbGF0ZVxcXCIgaWQ9XFxcInByb2R1Y3QtY2FyZC1pbWFnZVxcXCI+PGRpdiBjbGFzcz1cXFwiY29sLXNtLTYgY29sLW1lZGlhXFxcIj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcInJlbGF0aXZlLWNvbnRhaW5lclxcXCIgbmctaWY9XFxcIml0ZW0ubmV3XFxcIj5cXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJsYWJlbC1jb250YWluZXIgc21hbGwgbGVmdFxcXCI+XFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImxhYmVsLXdyYXBwZXItb3V0ZXJcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwibGFiZWwtd3JhcHBlci1pbm5lclxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwibGFiZWwtY29udGVudFxcXCIgdHJhbnNsYXRlPVxcXCJORVcuTEFCRUxcXFwiPjwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgPC9kaXY+XFxuICAgICAgICA8aW1nIGNsYXNzPVxcXCJpbWctcmVzcG9uc2l2ZSBpbWctd2lkZW5cXFwiIG5nLXNyYz1cXFwie3tpdGVtLmltYWdlVXJsIHwgaW1hZ2VVcmw6IFxcJ2ltZy1sZ1xcJ319XFxcIiBhbHQ9XFxcInt7aXRlbS50aXRsZX19XFxcIiB0aXRsZT1cXFwie3tpdGVtLnRpdGxlfX1cXFwiIC8+XFxuICAgIDwvZGl2Pjwvc2NyaXB0PjxzY3JpcHQgdHlwZT1cXFwidGV4dC9uZy10ZW1wbGF0ZVxcXCIgaWQ9XFxcInByb2R1Y3QtY2FyZC1kZXRhaWxzXFxcIj48ZGl2IGNsYXNzPVxcXCJwcm9kdWN0LXR5cGUgdGV4dC1wcmltYXJ5XFxcIj57e2l0ZW0udHlwZX19PC9kaXY+XFxuICAgIDxkaXYgY2xhc3M9XFxcImhsLTMgcHJvZHVjdC1uYW1lIHRleHQtcHJpbWFyeVxcXCI+e3tpdGVtLnRpdGxlfX08L2Rpdj5cXG5cXG4gICAgPHVsIGNsYXNzPVxcXCJwcm9kdWN0LWJlbmVmaXRzXFxcIiBuZy1pZj1cXFwiaXRlbS5zdWJ0aXRsZS5sZW5ndGhcXFwiPlxcbiAgICAgICAgPGxpIG5nLXJlcGVhdD1cXFwic3ViIGluIGl0ZW0uc3VidGl0bGVcXFwiPnt7c3VifX08L2xpPlxcbiAgICA8L3VsPlxcbiAgICA8ZGl2IG5nLWlmPVxcXCIhaXRlbS5zdWJ0aXRsZS5sZW5ndGhcXFwiPnt7aXRlbS5zdWJ0aXRsZX19PC9kaXY+XFxuXFxuICAgIDxhIGNsYXNzPVxcXCJsaW5rLW1vcmVcXFwiIG5nLWlmPVxcXCIhaXRlbS5kZXRhaWxzSGlkZGVuXFxcIiBvY3MtbmF2aWdhdGU9XFxcIml0ZW0uY2F0YWxvZ0lkXFxcIj48c3BhbiB0cmFuc2xhdGU9XFxcIkRFVEFJTEVEX1BST0RVQ1RfREVTQ1JJUFRJT05cXFwiPjwvc3Bhbj4mbmJzcDt7e2l0ZW0udGl0bGV9fTwvYT48L3NjcmlwdD48c2NyaXB0IHR5cGU9XFxcInRleHQvbmctdGVtcGxhdGVcXFwiIGlkPVxcXCJzZWN0aW9uLVBST0RVQ1RfSEVBREVSXFxcIj48c2VjdGlvbiBjbGFzcz1cXFwic2VjdGlvbiBmcy10d28tY29sdW1uLW1lZGlhLXRleHQtd2l0aC1sb2dvIGJnLWdyZXlcXFwiPlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJjb250YWluZXItZmx1aWRcXFwiPlxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwicm93XFxcIiBuZy1pZj1cXFwiJHNlY3Rpb24ubmV3XFxcIj5cXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJyZWxhdGl2ZS1jb250YWluZXJcXFwiPlxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJsYWJlbC1jb250YWluZXIgbGFyZ2UgcmlnaHRcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwibGFiZWwtd3JhcHBlci1vdXRlclxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwibGFiZWwtd3JhcHBlci1pbm5lclxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImxhYmVsLWNvbnRlbnRcXFwiIHRyYW5zbGF0ZT1cXFwiTkVXLkxBQkVMXFxcIj48L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwibGFiZWwtd3JhcHBlci1vdXRlclxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBjbGFzcz1cXFwiXFxcIiBuZy1zcmM9XFxcInt7dm0uY2F0YWxvZy5uZXdJbWFnZX19XFxcIiBhbHQ9XFxcIlxcXCIgdGl0bGU9XFxcIlxcXCI+XFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcInJvd1xcXCI+XFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29sLXNtLTYgY29sLW1lZGlhXFxcIj5cXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwianMtc2xpY2stc2xpZGVyIHNsaWNrLWltYWdlLXNsaWRlclxcXCJcXG4gICAgICAgICAgICAgICAgICAgICBkYXRhLXNsaWNrPVxcJ3tcXFwiYXJyb3dzXFxcIjogZmFsc2UsIFxcXCJkb3RzXFxcIjogdHJ1ZSwgXFxcImF1dG9wbGF5XFxcIjogdHJ1ZSwgXFxcImF1dG9wbGF5U3BlZWRcXFwiOiA0MDAwLCBcXFwic3BlZWRcXFwiOiAxMDAwLCBcXFwiY3NzRWFzZVxcXCI6IFxcXCJlYXNlLWluLW91dFxcXCJ9XFwnPlxcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwic2xpZGVcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgY2xhc3M9XFxcImltZy1yZXNwb25zaXZlIGltZy13aWRlblxcXCIgbmctc3JjPVxcXCJ7eyRzZWN0aW9uLnByb2R1Y3RJbWdVcmwgfCBpbWFnZVVybDogXFwnaW1nLWxnXFwnfX1cXFwiIGFsdD1cXFwie3skc2VjdGlvbi5wcm9kdWN0TmFtZX19XFxcIiB0aXRsZT1cXFwie3skc2VjdGlvbi5wcm9kdWN0TmFtZX19XFxcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICA8aW1nIGNsYXNzPVxcXCJpbWctb3ZlcmxheVxcXCIgbmctaWY9XFxcIiRzZWN0aW9uLmVuZXJneUVmZmljaWVuY3kuaW1hZ2VcXFwiIG5nLXNyYz1cXFwie3skc2VjdGlvbi5lbmVyZ3lFZmZpY2llbmN5LmltYWdlfX1cXFwiIC8+XFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29sLXNtLTYgY29sLXRleHRcXFwiPlxcbiAgICAgICAgICAgICAgICA8aDEgY2xhc3M9XFxcImhsLTIgcHJvZHVjdC1uYW1lXFxcIj57eyRzZWN0aW9uLnByb2R1Y3ROYW1lfX08L2gxPlxcbiAgICAgICAgICAgICAgICA8cD57eyRzZWN0aW9uLnN1YnRpdGxlfX08L3A+XFxuICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgPC9kaXY+XFxuPC9zZWN0aW9uPjwvc2NyaXB0PjxzY3JpcHQgdHlwZT1cXFwidGV4dC9uZy10ZW1wbGF0ZVxcXCIgaWQ9XFxcInNlY3Rpb24tVEVDSE5JQ0FMX0lORk9STUFUSU9OXFxcIj48c2VjdGlvbiBjbGFzcz1cXFwic2VjdGlvbiBmcy10d28tY29sdW1uLWhlYWRsaW5lLXRleHQgYmctZ3JleS1kYXJrIGJnLWJsdWVcXFwiPlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJjb250YWluZXItZmx1aWRcXFwiPlxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwicm93XFxcIj5cXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb2wtc20tM1xcXCI+XFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImhsLTMgc2VjdGlvbi10aXRsZVxcXCI+XFxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBuZy1pZj1cXFwiJHNlY3Rpb24udGl0bGVcXFwiPnt7JHNlY3Rpb24udGl0bGV9fTwvc3Bhbj5cXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIG5nLWlmPVxcXCIhJHNlY3Rpb24udGl0bGVcXFwiIHRyYW5zbGF0ZT1cXFwiVEVDSE5JQ0FMLklORk9STUFUSU9OXFxcIj48L3NwYW4+XFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICA8YSBuZy1pZj1cXFwiJHNlY3Rpb24ubGlua1xcXCIgY2xhc3M9XFxcImxpbmstbW9yZVxcXCIgbmctaHJlZj1cXFwie3skc2VjdGlvbi5saW5rIHwgaW1hZ2VVcmx9fVxcXCIgdGFyZ2V0PVxcXCJfYmxhbmtcXFwiPnt7XFwnUFJPRFVDVC5MRUFGTEVUXFwnIHwgdHJhbnNsYXRlfX08L2E+XFxuICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29sLXNtLW9mZnNldC0xIGNvbC1zbS04XFxcIj5cXG4gICAgICAgICAgICAgICAgPCEtLVRPRE8gU3R5bGUgZGVwZW5kaW5nIG9uIGNvbnN1bWVyIChjaGVja2xpc3QsIGJ1bGxldHMpLS0+XFxuICAgICAgICAgICAgICAgIDx1bCBjbGFzcz1cXFwidGVjaG5pY2FsLWluZm9ybWF0aW9uLWxpc3RcXFwiIG5nLWlmPVxcXCIkc2VjdGlvbi5saXN0XFxcIj5cXG4gICAgICAgICAgICAgICAgICAgIDxsaSBuZy1yZXBlYXQ9XFxcImluZm8gaW4gJHNlY3Rpb24ubGlzdFxcXCI+e3tpbmZvfX08L2xpPlxcbiAgICAgICAgICAgICAgICA8L3VsPlxcbiAgICAgICAgICAgICAgICA8c3BhbiBuZy1pZj1cXFwiJHNlY3Rpb24uZGVzY3JpcHRpb25cXFwiIG5nLWJpbmQtaHRtbD1cXFwiJHNlY3Rpb24uZGVzY3JpcHRpb25cXFwiPjwvc3Bhbj5cXG4gICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgIDwvZGl2PlxcbiAgICA8L2Rpdj5cXG48L3NlY3Rpb24+PC9zY3JpcHQ+PHNjcmlwdCB0eXBlPVxcXCJ0ZXh0L25nLXRlbXBsYXRlXFxcIiBpZD1cXFwic2VjdGlvbi1NT1JFX0lORk9STUFUSU9OXFxcIj48c2VjdGlvbiBjbGFzcz1cXFwic2VjdGlvbiBmcy10d28tY29sdW1uLWljb24tYWNjb3JkaW9uXFxcIj5cXG4gICAgPGRpdiBjbGFzcz1cXFwiY29udGFpbmVyLWZsdWlkXFxcIj5cXG4gICAgICAgIDxoMiBjbGFzcz1cXFwic2VjdGlvbi10aXRsZSB0ZXh0LXByaW1hcnkgdGV4dC1jZW50ZXJcXFwiPnt7JHNlY3Rpb24uaGVhZGxpbmVEZXRhaWxzfX08L2gyPlxcbiAgICAgICAgPGRpdiBpZD1cXFwiYWNyZC04NzI5MjE1ODdcXFwiIGNsYXNzPVxcXCJhY2NvcmRpb24gcGFuZWwtZ3JvdXAgbS1iLTBcXFwiIHJvbGU9XFxcInRhYmxpc3RcXFwiIGFyaWEtbXVsdGlzZWxlY3RhYmxlPVxcXCJ0cnVlXFxcIj5cXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJwYW5lbFxcXCIgbmctcmVwZWF0PVxcXCJpdGVtIGluICRzZWN0aW9uLml0ZW1zXFxcIj5cXG4gICAgICAgICAgICAgICAgPGRpdiBpZD1cXFwiYWNyZC04NzI5MjE1ODctaGVhZGluZy17eyRpbmRleH19XFxcIiBjbGFzcz1cXFwicGFuZWwtaGVhZGluZ1xcXCIgcm9sZT1cXFwidGFiXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzcz1cXFwicGFuZWwtdGl0bGVcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPVxcXCJjb2xsYXBzZWRcXFwiIHJvbGU9XFxcImJ1dHRvblxcXCIgZGF0YS10b2dnbGU9XFxcImNvbGxhcHNlXFxcIiBkYXRhLXBhcmVudD1cXFwiI2FjcmQtODcyOTIxNTg3XFxcIiBkYXRhLXRhcmdldD1cXFwiI2FjcmQtODcyOTIxNTg3LXBhbmVsLXt7JGluZGV4fX1cXFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1jb250cm9scz1cXFwiYWNyZC04NzI5MjE1ODctcGFuZWwte3skaW5kZXh9fVxcXCIgYXJpYS1leHBhbmRlZD1cXFwiZmFsc2VcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7e2l0ZW0uc3ViSGVhZGxpbmV9fVxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cXG4gICAgICAgICAgICAgICAgICAgIDwvaDM+XFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICA8ZGl2IGlkPVxcXCJhY3JkLTg3MjkyMTU4Ny1wYW5lbC17eyRpbmRleH19XFxcIiBjbGFzcz1cXFwicGFuZWwtY29sbGFwc2UgY29sbGFwc2VcXFwiIHJvbGU9XFxcInRhYnBhbmVsXFxcIiBhcmlhLWxhYmVsbGVkYnk9XFxcImFjcmQtODcyOTIxNTg3LWhlYWRpbmcte3skaW5kZXh9fVxcXCI+XFxuICAgICAgICAgICAgICAgICAgICA8YXJ0aWNsZSBjbGFzcz1cXFwicGFuZWwtYm9keSBhcnRpY2xlXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBuZy1pZj1cXFwiIXZtLmlzQXJyYXkoaXRlbS5kZXNjcmlwdGlvbilcXFwiIG5nLWJpbmQtaHRtbD1cXFwiaXRlbS5kZXNjcmlwdGlvblxcXCI+PC9wPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBuZy1pZj1cXFwidm0uaXNBcnJheShpdGVtLmRlc2NyaXB0aW9uKVxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBuZy1yZXBlYXQ9XFxcImVsIGluIGl0ZW0uZGVzY3JpcHRpb25cXFwiPnt7ZWx9fTwvbGk+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPC91bD5cXG4gICAgICAgICAgICAgICAgICAgICAgICA8aW1nIG5nLWlmPVxcXCJpdGVtLmltYWdlVXJsXFxcIiBjbGFzcz1cXFwiaW1nLXJlc3BvbnNpdmUgaW1nLXdpZGVuIG0tYi0xXFxcIiBuZy1zcmM9XFxcInt7aXRlbS5pbWFnZVVybCB8IGltYWdlVXJsfX1cXFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbHQ9XFxcInt7aXRlbS50aXRsZX19XFxcIiB0aXRsZT1cXFwie3tpdGVtLnRpdGxlfX1cXFwiIC8+XFxuICAgICAgICAgICAgICAgICAgICA8L2FydGljbGU+XFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgPC9kaXY+XFxuICAgIDwvZGl2Plxcbjwvc2VjdGlvbj48L3NjcmlwdD48c2NyaXB0IHR5cGU9XFxcInRleHQvbmctdGVtcGxhdGVcXFwiIGlkPVxcXCJzZWN0aW9uLVRFQ0hOSUNBTF9EQVRBX1RBQkxFX1NMSURFUlxcXCI+PHNlY3Rpb24gY2xhc3M9XFxcInNlY3Rpb24gZnMtdGFibGUtc2Nyb2xsYWJsZVxcXCIgZnVsbC13aWR0aC10YWJsZT5cXG4gICAgPGRpdiBjbGFzcz1cXFwiY29udGFpbmVyLWZsdWlkXFxcIj5cXG4gICAgICAgIDxoMiBjbGFzcz1cXFwic2VjdGlvbi10aXRsZSB0ZXh0LXByaW1hcnkgdGV4dC1jZW50ZXJcXFwiIHRyYW5zbGF0ZT1cXFwiVEVDSE5JQ0FMLkRBVEFcXFwiPjwvaDI+XFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJyb3cgc2Nyb2xsYWJsZS10YWJsZS13cmFwcGVyXFxcIj5cXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb2wteHMtNiBjb2wtc20tNCBjb2wtbWQtMyBwLXItMFxcXCI+XFxuICAgICAgICAgICAgICAgIDxhIGNsYXNzPVxcXCJjYXJkIGNhcmQtY29sdW1uIGNhcmQtc3RpY2t5XFxcIj5cXG4gICAgICAgICAgICAgICAgICAgIDx0YWJsZSBjbGFzcz1cXFwidGFibGUganMtZGF0YS10YWJsZVxcXCIgZGF0YS1vcmRlcmluZz1cXFwiZmFsc2VcXFwiIGRhdGEtcGFnaW5nPVxcXCJmYWxzZVxcXCIgZGF0YS1zZWFyY2hpbmc9XFxcImZhbHNlXFxcIiBkYXRhLWluZm89XFxcImZhbHNlXFxcIiBkYXRhLWF1dG8td2lkdGg9XFxcImZhbHNlXFxcIiBkYXRhLXJlc3BvbnNpdmU9XFxcInRydWVcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0aGVhZD48dHI+PHRoIGNsYXNzPVxcXCJ0YWJsZS1jZW50ZXJcXFwiPiZuYnNwOzwvdGg+PC90cj48L3RoZWFkPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0Ym9keT5cXG4gICAgICAgICAgICAgICAgICAgICAgICA8dHIgbmctcmVwZWF0PVxcXCJhdHRyaWJ1dGUgaW4gJHNlY3Rpb24udGFibGVEZWZpbml0aW9uXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPjxzcGFuIGNsYXNzPVxcXCJ0ZC1oZWFkbGluZVxcXCI+e3thdHRyaWJ1dGUudmFsdWUubmFtZX19PC9zcGFuPjwvdGQ+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3Rib2R5PlxcbiAgICAgICAgICAgICAgICAgICAgPC90YWJsZT5cXG4gICAgICAgICAgICAgICAgPC9hPlxcbiAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbC14cy02IGNvbC1zbS04IGNvbC1tZC05IHAtbC0wXFxcIj5cXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwianMtc2xpY2stc2xpZGVyIHNsaWNrLWNvbnRlbnQtc2xpZGVyIGpzLWZ1bGwtd2lkdGgtc2xpY2stdHJhY2tcXFwiXFxuICAgICAgICAgICAgICAgICAgICAgZGF0YS1zbGljaz1cXCd7XFxcImFycm93c1xcXCI6IHRydWUsIFxcXCJhcHBlbmRBcnJvd3NcXFwiOiBcXFwiLnNjcm9sbGFibGUtdGFibGUtd3JhcHBlclxcXCIsIFxcXCJhcHBlbmREb3RzXFxcIjogXFxcIi5zY3JvbGxhYmxlLXRhYmxlLXdyYXBwZXJcXFwiLFxcbiAgICAgICAgICAgICAgICAgICAgICBcXFwiZG90c1xcXCI6IHRydWUsIFxcXCJpbmZpbml0ZVxcXCI6IGZhbHNlLCBcXFwic3BlZWRcXFwiOiA1MDAsIFxcXCJjc3NFYXNlXFxcIjogXFxcImVhc2UtaW4tb3V0XFxcIiwgXFxcInNsaWRlc1RvU2hvd1xcXCI6IDMsIFxcXCJzbGlkZXNUb1Njcm9sbFxcXCI6IDEsIFxcXCJyZXNwb25zaXZlXFxcIjogW1xcbiAgICAgICAgICAgICAgICAgICAgICAgICB7IFxcXCJicmVha3BvaW50XFxcIjogOTkyLCBcXFwic2V0dGluZ3NcXFwiOiB7IFxcXCJhcnJvd3NcXFwiOiBmYWxzZSwgXFxcInNsaWRlc1RvU2hvd1xcXCI6IDIsIFxcXCJzbGlkZXNUb1Njcm9sbFxcXCI6IDJ9fSxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgeyBcXFwiYnJlYWtwb2ludFxcXCI6IDc2OCwgXFxcInNldHRpbmdzXFxcIjogeyBcXFwiYXJyb3dzXFxcIjogZmFsc2UsIFxcXCJzbGlkZXNUb1Nob3dcXFwiOiAxLCBcXFwic2xpZGVzVG9TY3JvbGxcXFwiOiAxfX1cXG4gICAgICAgICAgICAgICAgICAgICAgXX1cXCdcXG4gICAgICAgICAgICAgICAgICAgICBmdWxsLXdpZHRoLXRhYmxlPlxcblxcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY2FyZCBjYXJkLWNvbHVtblxcXCIgbmctcmVwZWF0PVxcXCJwcm9kdWN0IGluICRzZWN0aW9uLnByb2R1Y3RzXFxcIiBzY3JvbGxhYmxlLXRhYmxlLWNhcmQ+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzPVxcXCJ0YWJsZSBqcy1kYXRhLXRhYmxlXFxcIiBkYXRhLW9yZGVyaW5nPVxcXCJmYWxzZVxcXCIgZGF0YS1wYWdpbmc9XFxcImZhbHNlXFxcIiBkYXRhLXNlYXJjaGluZz1cXFwiZmFsc2VcXFwiIGRhdGEtaW5mbz1cXFwiZmFsc2VcXFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtYXV0by13aWR0aD1cXFwiZmFsc2VcXFwiIGRhdGEtcmVzcG9uc2l2ZT1cXFwidHJ1ZVxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aGVhZD5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIGNsYXNzPVxcXCJ0YWJsZS1jZW50ZXJcXFwiPnt7cHJvZHVjdC5oZWFkZXIudmFsdWV9fTwvdGg+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGhlYWQ+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0Ym9keT5cXG5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyIG5nLXJlcGVhdD1cXFwiYXR0cmlidXRlIGluICRzZWN0aW9uLnRhYmxlRGVmaW5pdGlvblxcXCIgc3luY2hyb25pemUtaGVpZ2h0PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIG5nLWluaXQ9XFxcInZhbHVlID0gcHJvZHVjdFthdHRyaWJ1dGUua2V5XSB8fCB7fVxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gYXR0cmlidXRlLXZhbHVlPVxcXCJ2YWx1ZVxcXCIgYXR0cmlidXRlLWFsdD1cXFwicHJvZHVjdC5uYW1lXFxcIiBhdHRyaWJ1dGUtdGl0bGU9XFxcInByb2R1Y3QubmFtZVxcXCI+PC9zcGFuPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIG5nLWlmPVxcXCJhdHRyaWJ1dGUudmFsdWUudW5pdFxcXCI+e3thdHRyaWJ1dGUudmFsdWUudW5pdH19PC9zcGFuPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90Ym9keT5cXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RhYmxlPlxcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgPC9kaXY+XFxuICAgIDwvZGl2Plxcbjwvc2VjdGlvbj48L3NjcmlwdD48c2NyaXB0IHR5cGU9XFxcInRleHQvbmctdGVtcGxhdGVcXFwiIGlkPVxcXCJzZWN0aW9uLVRFQ0hOSUNBTF9EQVRBX1RBQkxFXFxcIj48c2VjdGlvbiBjbGFzcz1cXFwic2VjdGlvbiBmcy10YWJsZVxcXCI+XFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250YWluZXItZmx1aWRcXFwiPlxcbiAgICAgICAgICAgIDxoMiBjbGFzcz1cXFwiaGwtMiBzZWN0aW9uLXRpdGxlIHRleHQtcHJpbWFyeSB0ZXh0LWNlbnRlclxcXCIgdHJhbnNsYXRlPVxcXCJURUNITklDQUwuREFUQVxcXCI+PC9oMj5cXG5cXG4gICAgICAgICAgICA8dGFibGUgb2NzLWRhdGEtdGFibGU9XFxcIiRzZWN0aW9uLnByb2R1Y3RzXFxcIiBvZHQtcmVzcG9uc2l2ZS1jaGFuZ2U9XFxcInZtLnJlc3BvbnNpdmVDaGFuZ2UoJGV2ZW50LCAkdGFibGUsICRjb2x1bW5zKVxcXCJcXG4gICAgICAgICAgICAgICAgICAgbmctcmVwZWF0PVxcXCJwYXJ0aXRpb24gaW4gJHNlY3Rpb24ucGFydGl0aW9uc1xcXCIgY2xhc3M9XFxcInRhYmxlIGpzLWRhdGEtdGFibGVcXFwiIGRhdGEtb3JkZXJpbmc9XFxcImZhbHNlXFxcIlxcbiAgICAgICAgICAgICAgICAgICBkYXRhLXBhZ2luZz1cXFwiZmFsc2VcXFwiIGRhdGEtc2VhcmNoaW5nPVxcXCJmYWxzZVxcXCIgZGF0YS1pbmZvPVxcXCJmYWxzZVxcXCIgZGF0YS1hdXRvLXdpZHRoPVxcXCJmYWxzZVxcXCIgZGF0YS1yZXNwb25zaXZlPVxcXCJ0cnVlXFxcIj5cXG4gICAgICAgICAgICAgICAgPHRoZWFkPlxcbiAgICAgICAgICAgICAgICA8dHI+XFxuICAgICAgICAgICAgICAgICAgICA8dGg+Jm5ic3A7PC90aD5cXG4gICAgICAgICAgICAgICAgICAgIDx0aCBuZy1yZXBlYXQ9XFxcImhlYWRlciBpbiBwYXJ0aXRpb25cXFwiPnt7aGVhZGVyLnRpdGxlLnZhbHVlfX08L3RoPlxcbiAgICAgICAgICAgICAgICA8L3RyPlxcbiAgICAgICAgICAgICAgICA8L3RoZWFkPlxcbiAgICAgICAgICAgICAgICA8dGJvZHk+XFxuICAgICAgICAgICAgICAgIDx0ciBuZy1yZXBlYXQ9XFxcImF0dHJpYnV0ZSBpbiAkc2VjdGlvbi50YWJsZURlZmluaXRpb25cXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgPHRkPnt7YXR0cmlidXRlLnZhbHVlLm5hbWV9fSZuYnNwOzwvdGQ+XFxuICAgICAgICAgICAgICAgICAgICA8dGQgbmctcmVwZWF0PVxcXCJwcm9kdWN0IGluIHBhcnRpdGlvblxcXCIgbmctaW5pdD1cXFwidmFsdWUgPSBwcm9kdWN0W2F0dHJpYnV0ZS5rZXldXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBhdHRyaWJ1dGUtdmFsdWU9XFxcInZhbHVlXFxcIiBhdHRyaWJ1dGUtYWx0PVxcXCJwcm9kdWN0Lm5hbWVcXFwiIGF0dHJpYnV0ZS10aXRsZT1cXFwicHJvZHVjdC5uYW1lXFxcIj48L3NwYW4+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gbmctaWY9XFxcImF0dHJpYnV0ZS52YWx1ZS51bml0XFxcIj57e2F0dHJpYnV0ZS52YWx1ZS51bml0fX08L3NwYW4+XFxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxcbiAgICAgICAgICAgICAgICA8L3RyPlxcbiAgICAgICAgICAgICAgICA8L3Rib2R5PlxcbiAgICAgICAgICAgIDwvdGFibGU+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgPC9zZWN0aW9uPjwvc2NyaXB0PjxzY3JpcHQgdHlwZT1cXFwidGV4dC9uZy10ZW1wbGF0ZVxcXCIgaWQ9XFxcInNlY3Rpb24tUkVMQVRFRF9QUk9EVUNUU1xcXCI+PHNlY3Rpb24gY2xhc3M9XFxcInNlY3Rpb24gZnMtdGhyZWUtY29sdW1uLW1lZGlhLXRlYXNlciBiZy1wYXR0ZXJuXFxcIj5cXG4gICAgPGRpdiBjbGFzcz1cXFwiY29udGFpbmVyLWZsdWlkXFxcIj5cXG4gICAgICAgIDxoMiBjbGFzcz1cXFwiaGwtMiBzZWN0aW9uLXRpdGxlIHRleHQtcHJpbWFyeSB0ZXh0LWNlbnRlclxcXCI+e3s6OiRzZWN0aW9uLnRpdGxlfX08L2gyPlxcblxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiZmxleC1yb3cganMtc2xpY2stc2xpZGVyIHNsaWNrLWNvbnRlbnQtc2xpZGVyXFxcIlxcbiAgICAgICAgICAgICBkYXRhLXNsaWNrPVxcJ3tcXFwiYXJyb3dzXFxcIjogZmFsc2UsIFxcXCJkb3RzXFxcIjogdHJ1ZSwgXFxcImluZmluaXRlXFxcIjogZmFsc2UsIFxcXCJzcGVlZFxcXCI6IDEwMDAsIFxcXCJjc3NFYXNlXFxcIjogXFxcImVhc2UtaW4tb3V0XFxcIiwgXFxcInNsaWRlc1RvU2hvd1xcXCI6IDMsIFxcXCJzbGlkZXNUb1Njcm9sbFxcXCI6IDMsIFxcXCJyZXNwb25zaXZlXFxcIjogW3sgXFxcImJyZWFrcG9pbnRcXFwiOiA5OTIsIFxcXCJzZXR0aW5nc1xcXCI6IHsgXFxcInNsaWRlc1RvU2hvd1xcXCI6IDIsIFxcXCJzbGlkZXNUb1Njcm9sbFxcXCI6IDJ9fSwgeyBcXFwiYnJlYWtwb2ludFxcXCI6IDc2OCwgXFxcInNldHRpbmdzXFxcIjogeyBcXFwic2xpZGVzVG9TaG93XFxcIjogMSwgXFxcInNsaWRlc1RvU2Nyb2xsXFxcIjogMX19XX1cXCc+XFxuXFxuICAgICAgICAgICAgPGEgbmctcmVwZWF0PVxcXCJyZWxhdGVkIGluICRzZWN0aW9uLnByb2R1Y3RzXFxcIiBjbGFzcz1cXFwiY2FyZCBjb2wteHMtMTIgY29sLXNtLTYgY29sLW1kLTRcXFwiIG9jcy1uYXZpZ2F0ZT1cXFwicmVsYXRlZC5jYXRlZ29yeUlkXFxcIj5cXG4gICAgICAgICAgICAgICAgPGltZyBjbGFzcz1cXFwiY2FyZC1pbWctdG9wIGltZy1yZXNwb25zaXZlIGltZy13aWRlblxcXCIgbmctc3JjPVxcXCJ7ezo6cmVsYXRlZC5jb21wb25lbnRJbWFnZVVybCB8IGltYWdlVXJsfX1cXFwiIGFsdD1cXFwie3tyZWxhdGVkLnByb2R1Y3ROYW1lfX1cXFwiIHRpdGxlPVxcXCJ7e3JlbGF0ZWQucHJvZHVjdE5hbWV9fVxcXCI+XFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNhcmQtYmxvY2tcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPVxcXCJobC00IGNhcmQtdGl0bGVcXFwiPnt7OjpyZWxhdGVkLnByb2R1Y3ROYW1lfX08L2gzPlxcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XFxcImxpbmstbW9yZVxcXCIgdHJhbnNsYXRlPVxcXCJNT1JFLkRFVEFJTFNcXFwiPjwvc3Bhbj5cXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgPC9hPlxcbiAgICAgICAgPC9kaXY+XFxuICAgIDwvZGl2Plxcbjwvc2VjdGlvbj48L3NjcmlwdD48c2NyaXB0IHR5cGU9XFxcInRleHQvbmctdGVtcGxhdGVcXFwiIGlkPVxcXCJzZWN0aW9uLVNFT19URVhUXFxcIj48c2VjdGlvbiBuZy1pZj1cXFwiJHNlY3Rpb24uc2VvVGV4dFxcXCIgY2xhc3M9XFxcInNlY3Rpb24gZnMtY2F0ZWdvcnktdGV4dFxcXCI+XFxuICAgIDxkaXYgY2xhc3M9XFxcImNvbnRhaW5lci1mbHVpZFxcXCI+XFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJyb3dcXFwiPlxcbiAgICAgICAgICAgIDxkaXYgbmctaW5jbHVkZT1cXFwiJHNlY3Rpb24uc2VvVGV4dCB8IGltYWdlVXJsXFxcIj48L2Rpdj5cXG4gICAgICAgIDwvZGl2PlxcbiAgICA8L2Rpdj5cXG48L3NlY3Rpb24+PC9zY3JpcHQ+PHNjcmlwdCB0eXBlPVxcXCJ0ZXh0L25nLXRlbXBsYXRlXFxcIiBpZD1cXFwic2VjdGlvbi1GT09UTk9URVNcXFwiPjxzZWN0aW9uIGNsYXNzPVxcXCJzZWN0aW9uXFxcIj5cXG4gICAgPGRpdiBjbGFzcz1cXFwiY29udGFpbmVyLWZsdWlkXFxcIj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcInJvd1xcXCI+XFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29sLW1kLTEwXFxcIj5cXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZm9vdG5vdGVzXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgIDxvbCBjbGFzcz1cXFwiZm9vdG5vdGUtb3JkZXJlZC1saXN0XFxcIiBuZy1pZj1cXFwiIXZtLmlzQXJyYXkoJHNlY3Rpb24ubGlzdCkgJiYgJHNlY3Rpb24ubGlzdFxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPGxpPnt7JHNlY3Rpb24ubGlzdH19PC9saT5cXG4gICAgICAgICAgICAgICAgICAgIDwvb2w+XFxuICAgICAgICAgICAgICAgICAgICA8b2wgY2xhc3M9XFxcImZvb3Rub3RlLW9yZGVyZWQtbGlzdFxcXCIgbmctaWY9XFxcInZtLmlzQXJyYXkoJHNlY3Rpb24ubGlzdClcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBuZy1yZXBlYXQ9XFxcIml0ZW0gaW4gJHNlY3Rpb24ubGlzdFxcXCI+e3tpdGVtfX08L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgPC9vbD5cXG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVxcXCJmb290bm90ZS1wYXJhZ3JhcGhcXFwiIG5nLWlmPVxcXCIkc2VjdGlvbi52YWx1ZVxcXCI+e3skc2VjdGlvbi52YWx1ZX19PC9wPlxcbiAgICAgICAgICAgICAgICAgICAgPHAgbmctaWY9XFxcIiRzZWN0aW9uLmxhYmVscy5zeXN0ZW1cXFwiIGNsYXNzPVxcXCJmb290bm90ZS1wYXJhZ3JhcGhcXFwiIHRyYW5zbGF0ZT1cXFwiRVJQX1NZU1RFTV9MQUJFTFxcXCI+PC9wPlxcbiAgICAgICAgICAgICAgICAgICAgPHAgbmctaWY9XFxcIiRzZWN0aW9uLmxhYmVscy5wcm9kdWN0XFxcIiBjbGFzcz1cXFwiZm9vdG5vdGUtcGFyYWdyYXBoXFxcIiB0cmFuc2xhdGU9XFxcIkVSUF9QUk9EVUNUX0xBQkVMXFxcIj48L3A+XFxuICAgICAgICAgICAgICAgICAgICA8cCBuZy1pZj1cXFwiJHNlY3Rpb24ubGFiZWxzLmJvaWxlclxcXCIgY2xhc3M9XFxcImZvb3Rub3RlLXBhcmFncmFwaFxcXCIgdHJhbnNsYXRlPVxcXCJCMV9CT0lMRVJfTEFCRUxcXFwiPjwvcD5cXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgPC9kaXY+XFxuPC9zZWN0aW9uPjwvc2NyaXB0PjxzY3JpcHQgdHlwZT1cXFwidGV4dC9uZy10ZW1wbGF0ZVxcXCIgaWQ9XFxcInNlY3Rpb24tQ0FUQUxPR19NRVRBREFUQVxcXCI+PGNhdGFsb2ctbWV0YWRhdGEgZGF0YT1cXFwiJHNlY3Rpb25cXFwiPjwvY2F0YWxvZy1tZXRhZGF0YT48L3NjcmlwdD5cIik7XG4kdGVtcGxhdGVDYWNoZS5wdXQoXCJjb21wb25lbnQvbmF2aWdhdGlvbl9tZW51Lmh0bWxcIixcIjxzcGFuIGNsYXNzPVxcXCJqcy1vcGVuLXN1Ym1lbnUgaWNvbi1saW5rLWFycm93LXJpZ2h0IHZpc2libGUteHMtYmxvY2tcXFwiPjwvc3Bhbj48YSBvY3MtbmF2aWdhdGU9XFxcIiRjdHJsLm1lbnUuaWRcXFwiIG5nLWJpbmQ9XFxcIiRjdHJsLm1lbnUubmFtZVxcXCI+UHJvZHVrdGU8L2E+PHVsIHNpbXBsZS1zdWJtZW51IGNsYXNzPVxcXCJuYXYgc3VibWVudVxcXCIgbmctaWY9XFxcIiRjdHJsLm1lbnUuY2hpbGRyZW4ubGVuZ3RoXFxcIiBuZy1pbml0PVxcXCJzdWJMZXZlbCA9ICRjdHJsLm1lbnUuY2hpbGRyZW5cXFwiIG5nLWluY2x1ZGU9XFxcIlxcJ25hdi1sZXZlbFxcJ1xcXCI+PC91bD48c2NyaXB0IHR5cGU9XFxcInRleHQvbmctdGVtcGxhdGVcXFwiIGlkPVxcXCJuYXYtbGV2ZWxcXFwiPjxsaSBuZy1yZXBlYXQ9XFxcImx2bCBpbiBzdWJMZXZlbCB8IGxpbWl0VG86ICRjdHJsLm1lbnUubWF4TmF2aWdhdGlvbkl0ZW1zIGFzIGxpbWl0ZWRMZXZlbFxcXCI+XFxuICAgICAgICA8c3BhbiBuZy1pZj1cXFwibHZsLmNoaWxkcmVuLmxlbmd0aFxcXCIgY2xhc3M9XFxcImpzLW9wZW4tc3VibWVudSBpY29uLWxpbmstYXJyb3ctcmlnaHQgdmlzaWJsZS14cy1ibG9ja1xcXCI+PC9zcGFuPlxcbiAgICAgICAgPGEgdGFyZ2V0PVxcXCJfc2VsZlxcXCIgb2NzLW5hdmlnYXRlPVxcXCJsdmwuaWRcXFwiPnt7bHZsLm5hbWV9fTwvYT5cXG4gICAgICAgIDx1bCBzaW1wbGUtc3VibWVudVxcbiAgICAgICAgICAgIGNsYXNzPVxcXCJuYXYgc3VibWVudVxcXCJcXG4gICAgICAgICAgICBuZy1pZj1cXFwibHZsLmNoaWxkcmVuLmxlbmd0aFxcXCJcXG4gICAgICAgICAgICBuZy1pbml0PVxcXCJzdWJMZXZlbCA9IGx2bC5jaGlsZHJlblxcXCJcXG4gICAgICAgICAgICBuZy1pbmNsdWRlPVxcXCJcXCduYXYtbGV2ZWxcXCdcXFwiPjwvdWw+XFxuICAgIDwvbGk+XFxuICAgIDxsaT48YSBuZy1pZj1cXFwibGltaXRlZExldmVsLmxlbmd0aCA8IHN1YkxldmVsLmxlbmd0aFxcXCIgb2NzLW5hdmlnYXRlPVxcXCIkcGFyZW50Lmx2bC5pZFxcXCIgY2xhc3M9XFxcImJ0biBidG4tc2hvdyBoaWRkZW4teHMgaGlkZGVuLXNtIG5vLWFuaW1hdGVcXFwiPkFsbGVzIGFuemVpZ2VuPC9hPjwvbGk+PC9zY3JpcHQ+XCIpO1xuJHRlbXBsYXRlQ2FjaGUucHV0KFwiY29tcG9uZW50L25ld19wcm9kdWN0cy5odG1sXCIsXCI8c2VjdGlvbiBjbGFzcz1cXFwic2VjdGlvbiBmcy1mb3VyLWNvbHVtbi1tZWRpYS10ZWFzZXJcXFwiIG5nLWlmPVxcXCIkY3RybC5wcm9kdWN0c0xvYWRlZFxcXCI+PGRpdiBjbGFzcz1cXFwiY29udGFpbmVyLWZsdWlkIHRleHQtY2VudGVyXFxcIj48ZGl2IGNsYXNzPVxcXCJyb3dcXFwiPjxkaXYgY2xhc3M9XFxcImNvbC1tZC0xMCBjb2wtbWQtb2Zmc2V0LTFcXFwiPjxoMiBjbGFzcz1cXFwic2VjdGlvbi10aXRsZSBobC0zXFxcIiB0cmFuc2xhdGU9XFxcIk5FVy5ISVRTXFxcIj48L2gyPjwvZGl2PjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9XFxcImNvbnRhaW5lci1mbHVpZFxcXCI+PHNsaWNrIGNsYXNzPVxcXCJmbGV4LXJvdyBqcy1zbGljay1zbGlkZXIgc2xpY2stY29udGVudC1zbGlkZXJcXFwiIHNldHRpbmdzPVxcXCIkY3RybC5zbGlja1NldHRpbmdzXFxcIj48YSBjbGFzcz1cXFwiY2FyZCBjb2wteHMtNiBjb2wtc20tNCBjb2wtbWQtMyBsZWZ0IG5vLWFuaW1hdGVcXFwiIG5nLXJlcGVhdD1cXFwicHJvZHVjdCBpbiAkY3RybC5wcm9kdWN0c1xcXCIgb2NzLW5hdmlnYXRlPVxcXCJwcm9kdWN0LmlkXFxcIj48ZGl2IGNsYXNzPVxcXCJyZWxhdGl2ZS1jb250YWluZXJcXFwiPjxkaXYgY2xhc3M9XFxcImxhYmVsLWNvbnRhaW5lciBzbWFsbCByaWdodFxcXCI+PGRpdiBjbGFzcz1cXFwibGFiZWwtd3JhcHBlci1vdXRlclxcXCI+PGRpdiBjbGFzcz1cXFwibGFiZWwtd3JhcHBlci1pbm5lclxcXCI+PGRpdiBjbGFzcz1cXFwibGFiZWwtY29udGVudFxcXCIgdHJhbnNsYXRlPVxcXCJORVcuTEFCRUxcXFwiPjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PjxpbWcgY2xhc3M9XFxcImNhcmQtaW1nLXRvcCBpbWctcmVzcG9uc2l2ZSBpbWctd2lkZW5cXFwiIG5nLXNyYz1cXFwie3twcm9kdWN0LmltYWdlIHwgaW1hZ2VVcmx9fVxcXCIgYWx0PVxcXCJ7e3Byb2R1Y3QubmFtZX19XFxcIiB0aXRsZT1cXFwie3twcm9kdWN0Lm5hbWV9fVxcXCI+PGRpdiBjbGFzcz1cXFwiY2FyZC1ibG9ja1xcXCIgbmctaWY9XFxcInByb2R1Y3QubmFtZVxcXCIgZXF1YWxpemUtdGVhc2VyLWhlaWdodD48aDMgY2xhc3M9XFxcImNhcmQtdGl0bGUgaGwtNCB0ZXh0LXdyYXBcXFwiPnt7cHJvZHVjdC5uYW1lfX08L2gzPjxwIGNsYXNzPVxcXCJjYXJkLXRleHRcXFwiPnt7cHJvZHVjdC5kZXNjcmlwdGlvbn19PC9wPjxzcGFuIGNsYXNzPVxcXCJsaW5rLW1vcmVcXFwiIHRyYW5zbGF0ZT1cXFwiTU9SRS5ERVRBSUxTXFxcIj48L3NwYW4+PC9kaXY+PC9hPjwvc2xpY2s+PC9kaXY+PC9zZWN0aW9uPlwiKTtcbiR0ZW1wbGF0ZUNhY2hlLnB1dChcImNvbXBvbmVudC9xdWlja19zZWFyY2guaHRtbFwiLFwiPGZvcm0gaWQ9XFxcImhlYWRlci1zZWFyY2hcXFwiIG1ldGhvZD1cXFwicG9zdFxcXCIgcm9sZT1cXFwic2VhcmNoXFxcIiBuZy1zdWJtaXQ9XFxcIiRjdHJsLmRvU2VhcmNoKClcXFwiPjxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXAgaGFzLWZlZWRiYWNrXFxcIj48aW5wdXQgYWN0aXZlLXNlYXJjaCB0eXBlPVxcXCJzZWFyY2hcXFwiIGNsYXNzPVxcXCJmb3JtLWNvbnRyb2xcXFwiIG5nLW1vZGVsPVxcXCIkY3RybC5xdWlja3NlYXJjaFxcXCIgbmctbW9kZWwtb3B0aW9ucz1cXFwie2RlYm91bmNlOiAyMDB9XFxcIiB0eXBlYWhlYWQtd2FpdC1tcz1cXFwiMTAwXFxcIiB0eXBlYWhlYWQtZm9jdXMtZmlyc3Q9XFxcImZhbHNlXFxcIiB0eXBlYWhlYWQtb24tc2VsZWN0PVxcXCIkY3RybC5nb1RvKCRpdGVtKVxcXCIgbmctY2hhbmdlPVxcXCIkY3RybC5zdWdnZXN0KClcXFwiIHVpYi10eXBlYWhlYWQ9XFxcInJlc3VsdCBhcyByZXN1bHQubmFtZSBmb3IgcmVzdWx0IGluICRjdHJsLnN1Z2dlc3QoKVxcXCIgdHlwZWFoZWFkLWxvYWRpbmc9XFxcImxvYWRcXFwiIHBsYWNlaG9sZGVyPVxcXCJ7e1xcJ1NFQVJDSC5QTEFDRUhPTERFUlxcJyB8IHRyYW5zbGF0ZX19XFxcIj48c3BhbiBjbGFzcz1cXFwiZm9ybS1jb250cm9sLWZlZWRiYWNrIGljb24tc2VhcmNoXFxcIiBhcmlhLWhpZGRlbj1cXFwidHJ1ZVxcXCI+PC9zcGFuPjxidXR0b24gaGlkZGVuIHR5cGU9XFxcInN1Ym1pdFxcXCI+PGkgY2xhc3M9XFxcImljb24tc2VhcmNoXFxcIj48L2k+PC9idXR0b24+PC9kaXY+PC9mb3JtPlwiKTtcbiR0ZW1wbGF0ZUNhY2hlLnB1dChcImNvbXBvbmVudC9zZWFyY2guaHRtbFwiLFwiPHNlY3Rpb24gY2xhc3M9XFxcInNlY3Rpb24gZnMtc2VhcmNoLWZpZWxkIGJnLWdyZXlcXFwiPjxkaXYgY2xhc3M9XFxcImNvbnRhaW5lci1mbHVpZFxcXCI+PGgyIGNsYXNzPVxcXCJzZWN0aW9uLXRpdGxlIGhsLTEgdGV4dC1jZW50ZXJcXFwiIHRyYW5zbGF0ZT1cXFwiU0VBUkNILlRFUk1cXFwiPjwvaDI+PGZvcm0gbWV0aG9kPVxcXCJwb3N0XFxcIiByb2xlPVxcXCJmb3JtXFxcIj48ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwIGhhcy1mZWVkYmFja1xcXCI+PGlucHV0IG5nLWtleXByZXNzPVxcXCIkY3RybC5vblNlYXJjaElucHV0KCRldmVudClcXFwiIG5nLW1vZGVsPVxcXCIkY3RybC5zZWFyY2hUZXJtXFxcIiB0eXBlPVxcXCJzZWFyY2hcXFwiIGNsYXNzPVxcXCJmb3JtLWNvbnRyb2xcXFwiIHBsYWNlaG9sZGVyPVxcXCJ7e1xcJ1NFQVJDSC5QTEFDRUhPTERFUlxcJyB8IHRyYW5zbGF0ZX19XFxcIj48c3BhbiBjbGFzcz1cXFwiZm9ybS1jb250cm9sLWZlZWRiYWNrIGljb24tc2VhcmNoXFxcIiBhcmlhLWhpZGRlbj1cXFwidHJ1ZVxcXCI+PC9zcGFuPjwvZGl2PjwvZm9ybT48L2Rpdj48L3NlY3Rpb24+PHNlY3Rpb24gbmctaWY9XFxcIiRjdHJsLnRvdGFsTGVuZ3RoID09PSAwXFxcIiBjbGFzcz1cXFwic2VjdGlvbiBmcy1oZWFkbGluZVxcXCI+PGRpdiBjbGFzcz1cXFwiY29udGFpbmVyLWZsdWlkXFxcIj48ZGl2IGNsYXNzPVxcXCJyb3dcXFwiPjxkaXYgY2xhc3M9XFxcImNvbC1tZC0xMFxcXCI+PGg0IGNsYXNzPVxcXCJobC00IHNlY3Rpb24tdGl0bGVcXFwiIHRyYW5zbGF0ZT1cXFwiU0VBUkNILk5PLlJFU1VMVC5IRUFETElORVxcXCIgdHJhbnNsYXRlLXZhbHVlcz1cXFwie3NlYXJjaFRlcm06ICRjdHJsLnNlYXJjaFRlcm19XFxcIj48L2g0Pjx1bCBjbGFzcz1cXFwiY2hlY2tsaXN0IG1hcmdpbi10b3BcXFwiPjxsaSBuZy1iaW5kLWh0bWw9XFxcIiRjdHJsLmNvbnRhY3RUZXh0XFxcIj48L2xpPjwvdWw+PC9kaXY+PC9kaXY+PC9kaXY+PC9zZWN0aW9uPjxzZWN0aW9uIG5nLWNvbnRyb2xsZXI9XFxcIkNvbnRlbnRDb250cm9sbGVyIGFzIHZtXFxcIiBuZy1pZj1cXFwiJGN0cmwudG90YWxMZW5ndGggPT09IGZhbHNlXFxcIj48ZGl2IGNsYXNzPVxcXCJsb2FkaW5nLXNwaW5uZXIgbG9hZGluZy13aGl0ZVxcXCI+PGltZyBzcmM9XFxcIi9tZWRpYS9pbWFnZXMvYWpheC1sb2FkZXIuZ2lmXFxcIiBjbGFzcz1cXFwic3Bpbm5lclxcXCI+PC9kaXY+PC9zZWN0aW9uPjxzZWN0aW9uIG5nLWlmPVxcXCIkY3RybC50b3RhbExlbmd0aCA+IDBcXFwiIGNsYXNzPVxcXCJzZWN0aW9uIGZzLXNlYXJjaC1yZXN1bHRzIGpzLXdheXBvaW50LXN0YXJ0XFxcIj48ZGl2IGNsYXNzPVxcXCJjb250YWluZXItZmx1aWRcXFwiPjxkaXYgY2xhc3M9XFxcImZsZXgtcm93IGpzLXdheXBvaW50LWVuZFxcXCI+PGRpdiBjbGFzcz1cXFwiY29sLXhzLTEyIGNvbC1tZC00XFxcIj48bmF2IGhsLXN0aWNreSBvZmZzZXQtdG9wPVxcXCIxMDBcXFwiIGlkPVxcXCJuYXYtc2VhcmNoLXJlc3VsdHNcXFwiIGNsYXNzPVxcXCJoaWRkZW4tcHJpbnQgaGlkZGVuLXhzIGhpZGRlbi1zbVxcXCI+PGgzIGNsYXNzPVxcXCJobC00IG0tdC0wXFxcIiB0cmFuc2xhdGU9XFxcIlNFQVJDSC5RVUlDS05BVklHQVRJT05cXFwiPjwvaDM+PHVsIGNsYXNzPVxcXCJuYXZcXFwiPjxsaSBuZy1yZXBlYXQ9XFxcIihncm91cCwgcmVzdWx0cykgaW4gJGN0cmwuZmluYWxTZWFyY2hSZXN1bHRzXFxcIj48YSBuZy1jbGljaz1cXFwiJGN0cmwuZ29Ub0FuY2hvcihncm91cClcXFwiPjxzcGFuIHRyYW5zbGF0ZT1cXFwiU0VBUkNILkNIQU5ORUwue3tncm91cH19XFxcIj48L3NwYW4+Jm5ic3A7PHNwYW4gY2xhc3M9XFxcInNlYXJjaC1yZXN1bHRzLWNvdW50XFxcIj4oe3tyZXN1bHRzLmxlbmd0aH19KTwvc3Bhbj48L2E+PC9saT48L3VsPjwvbmF2PjwvZGl2PjxkaXYgY2xhc3M9XFxcImNvbC14cy0xMiBjb2wtbWQtOFxcXCI+PGRpdiBpZD1cXFwic2VhcmNoLXJlc3VsdHNcXFwiPjxkaXYgY2xhc3M9XFxcInNlYXJjaC1yZXN1bHRzLWhlYWRlciBoaWRkZW4tbWQgaGlkZGVuLWxnXFxcIj48ZGl2IGNsYXNzPVxcXCJkcm9wZG93blxcXCI+PGEgY2xhc3M9XFxcImhsLTMgZHJvcGRvd24tdG9nZ2xlXFxcIiBkYXRhLXRvZ2dsZT1cXFwiZHJvcGRvd25cXFwiIHJvbGU9XFxcImJ1dHRvblxcXCIgYXJpYS1oYXNwb3B1cD1cXFwidHJ1ZVxcXCIgYXJpYS1leHBhbmRlZD1cXFwiZmFsc2VcXFwiPnt7XFwnU0VBUkNILlRPVEFMLkNPVU5UXFwnIHwgdHJhbnNsYXRlfX08c3BhbiBjbGFzcz1cXFwic2VhcmNoLXJlc3VsdHMtY291bnRcXFwiPih7eyRjdHJsLnRvdGFsTGVuZ3RofX0pPC9zcGFuPjwvYT48dWwgaWQ9XFxcIm5hdi1zZWFyY2gtcmVzdWx0cy1kcm9wZG93blxcXCIgY2xhc3M9XFxcImRyb3Bkb3duLW1lbnVcXFwiPjxsaSBjbGFzcz1cXFwiYWN0aXZlXFxcIj48YT57e1xcJ1NFQVJDSC5UT1RBTC5DT1VOVFxcJyB8IHRyYW5zbGF0ZX19PHNwYW4gY2xhc3M9XFxcInNlYXJjaC1yZXN1bHRzLWNvdW50XFxcIj4oe3skY3RybC50b3RhbExlbmd0aH19KTwvc3Bhbj48L2E+PC9saT48bGkgbmctcmVwZWF0PVxcXCIoZ3JvdXAsIHJlc3VsdHMpIGluICRjdHJsLmZpbmFsU2VhcmNoUmVzdWx0c1xcXCI+PGEgbmctY2xpY2s9XFxcIiRjdHJsLmdvVG9BbmNob3IoZ3JvdXApXFxcIj48c3BhbiB0cmFuc2xhdGU9XFxcIlNFQVJDSC5DSEFOTkVMLnt7Z3JvdXB9fVxcXCI+PC9zcGFuPiZuYnNwOzxzcGFuIGNsYXNzPVxcXCJzZWFyY2gtcmVzdWx0cy1jb3VudFxcXCI+KHt7cmVzdWx0cy5sZW5ndGh9fSk8L3NwYW4+PC9hPjwvbGk+PC91bD48L2Rpdj48L2Rpdj48ZGl2IG5nLXJlcGVhdD1cXFwiKGdyb3VwLCByZXN1bHRzKSBpbiAkY3RybC5maW5hbFNlYXJjaFJlc3VsdHNcXFwiIG5nLWlmPVxcXCJyZXN1bHRzLmxlbmd0aCA+IDBcXFwiIGlkPVxcXCJ7e2dyb3VwfX1cXFwiIGNsYXNzPVxcXCJzZWFyY2gtcmVzdWx0cy1jYXRlZ29yeVxcXCI+PGRpdiBjbGFzcz1cXFwiY2F0ZWdvcnktaGVhZGVyIGhpZGRlbi14cyBoaWRkZW4tc21cXFwiPjxoMz48c3BhbiB0cmFuc2xhdGU9XFxcIlNFQVJDSC5DSEFOTkVMLnt7Z3JvdXB9fVxcXCI+PC9zcGFuPiZuYnNwOzxzcGFuIGNsYXNzPVxcXCJzZWFyY2gtcmVzdWx0cy1jb3VudFxcXCI+KHt7cmVzdWx0cy5sZW5ndGh9fSk8L3NwYW4+PC9oMz48L2Rpdj48ZGl2IGNsYXNzPVxcXCJzZWFyY2gtcmVzdWx0IG1lZGlhXFxcIiBuZy1yZXBlYXQ9XFxcIml0ZW0gaW4gcmVzdWx0cyB0cmFjayBieSAkaW5kZXhcXFwiPjxkaXYgY2xhc3M9XFxcIm1lZGlhLWxlZnRcXFwiPjxhPjxpbWcgc3JjIGNsYXNzPVxcXCJtZWRpYS1vYmplY3RcXFwiIGh0dHAtc3JjPVxcXCJpdGVtLmltYWdlVXJsXFxcIiBhbHQ9XFxcInt7aXRlbS5uYW1lfX1cXFwiIHRpdGxlPVxcXCJ7e2l0ZW0ubmFtZX19XFxcIj48L2E+PC9kaXY+PGRpdiBjbGFzcz1cXFwibWVkaWEtYm9keVxcXCI+PGg0IGNsYXNzPVxcXCJtZWRpYS1oZWFkaW5nXFxcIj57e2l0ZW0ubmFtZX19PC9oND48cD57e2l0ZW0udGV4dH19PC9wPjxhIG5nLWNsaWNrPVxcXCIkY3RybC5nb01vcmUoaXRlbSwgZ3JvdXApXFxcIiBjbGFzcz1cXFwibGluay1tb3JlXFxcIiB0cmFuc2xhdGU9XFxcIk1PUkUuREVUQUlMU1xcXCI+PC9hPjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2Pjwvc2VjdGlvbj5cIik7fV0pOyIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuICAgIGFuZ3VsYXIubW9kdWxlKCdwZHMuY29tbW9uLnJvdXRlJywgWyd1aS5yb3V0ZXInLCAnbmN5LWFuZ3VsYXItYnJlYWRjcnVtYicsICdwZHMuZW52aXJvbm1lbnQnXSk7XG4gICAgYW5ndWxhci5tb2R1bGUoJ3Bkcy5jb21tb24uc2VydmljZScsIFtdKTtcbiAgICBhbmd1bGFyLm1vZHVsZSgncGRzLmNvbW1vbi5jb25maWcnLCBbJ3Bhc2NhbHByZWNodC50cmFuc2xhdGUnXSk7XG4gICAgYW5ndWxhci5tb2R1bGUoJ3Bkcy5jb21tb24uY29udHJvbGxlcicsIFsnbmdBbmltYXRlJywgJ25nU2FuaXRpemUnLCAnZGF0YXRhYmxlcycsICdobC5zdGlja3knLCAnZGNiSW1nRmFsbGJhY2snLCAnc2xpY2tDYXJvdXNlbCddKTtcbiAgICBhbmd1bGFyLm1vZHVsZSgncGRzLmNvbW1vbi5tb2RlbCcsIFtdKTtcbiAgICBhbmd1bGFyLm1vZHVsZSgncGRzLmNvbW1vbi5mYWN0b3J5JywgW10pO1xuICAgIGFuZ3VsYXIubW9kdWxlKCdwZHMuY29tbW9uLmRpcmVjdGl2ZScsIFtdKTtcbiAgICBhbmd1bGFyLm1vZHVsZSgncGRzLmNvbW1vbi5maWx0ZXInLCBbJ3Bkcy5lbnZpcm9ubWVudCddKTtcbiAgICBhbmd1bGFyLm1vZHVsZSgncGRzLmNvbW1vbicsIFsncGRzLmNvbW1vbi5jb250cm9sbGVyJywgJ3Bkcy5jb21tb24ucm91dGUnLCAncGRzLmNvbW1vbi5zZXJ2aWNlJywgJ3Bkcy5jb21tb24uY29uZmlnJywgJ3Bkcy5jb21tb24ubW9kZWwnLCAncGRzLmNvbW1vbi5kaXJlY3RpdmUnXSk7XG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgncGRzLmNvbW1vbi5jb250cm9sbGVyJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0NvbnRlbnRDb250cm9sbGVyJywgQ29udGVudENvbnRyb2xsZXIpO1xuXG4gICAgQ29udGVudENvbnRyb2xsZXIuJGluamVjdCA9IFsnU3Bpbm5lclNlcnZpY2UnXTtcblxuICAgIGZ1bmN0aW9uIENvbnRlbnRDb250cm9sbGVyKHNwaW5uZXJTZXJ2aWNlKSB7XG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICAgICAgdm0uaXNTcGlubmluZyA9IHNwaW5uZXJTZXJ2aWNlLmlzTG9hZGluZztcbiAgICB9XG5cbn0pKGFuZ3VsYXIpO1xuIiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdwZHMuY29tbW9uLmNvbnRyb2xsZXInKVxuICAgICAgICAuY29udHJvbGxlcignaGVhZGVyQ29udHJvbGxlcicsIEhlYWRlckNvbnRyb2xsZXIpO1xuXG4gICAgSGVhZGVyQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvY2F0aW9uJywgJ2xvY2FsZScsICdjb25maWcnLCAnanNvbkZpbHRlcicsICdfJywgJ0JyZWFkY3J1bWJTZXJ2aWNlJ107XG4gICAgdmFyIGNvbnRlbnRHcm91cHMgPSBbJ1dULmNnX24nLCAnV1QuY2dfcycsICdXVC56X2NnMycsICdXVC56X2NnNCcsICdXVC56X2NnNScsICdXVC56X2NnNicsICdXVC56X2NnNycsICdXVC56X2NnOCcsICdXVC56X2NnOScsICdXVC56X2NnMTAnXTtcblxuICAgIGZ1bmN0aW9uIEhlYWRlckNvbnRyb2xsZXIoJHNjb3BlLCAkbG9jYXRpb24sIGxvY2FsZSwgY29uZmlnLCBqc29uRmlsdGVyLCBfLCBCcmVhZGNydW1iU2VydmljZSkge1xuICAgICAgICB2YXIgcm9vdENvbnRlbnRHcm91cCA9IHtuYW1lOiBjb25maWcubWV0YVRhZ3Muc2l0ZU5hbWV9O1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgICB2bS51cmwgPSAkbG9jYXRpb24uYWJzVXJsKCk7XG4gICAgICAgIHZtLmxvY2FsZSA9IGxvY2FsZS50b1N0cmluZygpO1xuICAgICAgICB2bS5icmFuZCA9IGNvbmZpZy5tZXRhVGFncy5icmFuZDtcbiAgICAgICAgdm0uY291bnRyeSA9IGxvY2FsZS5jb3VudHJ5O1xuICAgICAgICB2bS5sYW5ndWFnZSA9IGxvY2FsZS5sYW5ndWFnZTtcblxuICAgICAgICAkc2NvcGUuJG9uKCdwZHMuaGVhZGVyLnVwZGF0ZScsIGZ1bmN0aW9uIChldmVudCwgcGFyYW1zKSB7XG4gICAgICAgICAgICB2bS50aXRsZSA9IHBhcmFtcy50aXRsZTtcbiAgICAgICAgICAgIHZtLmRlc2NyaXB0aW9uID0gcGFyYW1zLmRlc2NyaXB0aW9uO1xuICAgICAgICAgICAgdm0uaW1hZ2UgPSBwYXJhbXMuaW1hZ2U7XG4gICAgICAgICAgICB2bS53ZWJUcmVuZHMgPSBwYXJhbXMud2ViVHJlbmRzO1xuICAgICAgICAgICAgdm0uc2l0ZU5hbWUgPSBwYXJhbXMuc2l0ZU5hbWU7XG4gICAgICAgICAgICB2bS5jYW5vbmljYWxVcmwgPSBwYXJhbXMuY2Fub25pY2FsVXJsO1xuICAgICAgICB9KTtcblxuICAgICAgICAkc2NvcGUuJG9uKCdwZHMuaGVhZGVyLnVwZGF0ZScsIGZ1bmN0aW9uIChldmVudCwgcGFyYW1zKSB7XG4gICAgICAgICAgICBidWlsZEpzb25MRCh7XG4gICAgICAgICAgICAgICAgXCJAY29udGV4dFwiOiBcImh0dHA6Ly9zY2hlbWEub3JnL1wiLFxuICAgICAgICAgICAgICAgIFwiQHR5cGVcIjogXCJQcm9kdWN0XCIsXG4gICAgICAgICAgICAgICAgXCJuYW1lXCIgOiBwYXJhbXMudGl0bGUsXG4gICAgICAgICAgICAgICAgXCJpbWFnZVwiOiBwYXJhbXMuaW1hZ2UsXG4gICAgICAgICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBwYXJhbXMuZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgXCJicmFuZFwiOiBjb25maWcubWV0YVRhZ3Muc2l0ZU5hbWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICAvL0ZJWE1FXG4gICAgICAgICRzY29wZS4kb24oJ3Bkcy5icmVhZGNydW1iLnVwZGF0ZScsIGZ1bmN0aW9uIChldmVudCwgcGFyYW1zKSB7XG4gICAgICAgICAgICBCcmVhZGNydW1iU2VydmljZVxuICAgICAgICAgICAgICAgIC5idWlsZChwYXJhbXMuY2F0YWxvZ0lkKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChicmVhZGNydW1icykge1xuICAgICAgICAgICAgICAgICAgICBidWlsZEpzb25MRCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBcIkBjb250ZXh0XCI6IFwiaHR0cDovL3NjaGVtYS5vcmcvXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkB0eXBlXCI6IFwiQnJlYWRjcnVtYkxpc3RcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaXRlbUxpc3RFbGVtZW50XCI6IF8ubWFwKGJyZWFkY3J1bWJzLCBmdW5jdGlvbiAoY3J1bWIsIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0B0eXBlJzogJ0xpc3RJdGVtJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQGlkJzogY3J1bWIudXJsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogY3J1bWIubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBicmVhZGNydW1icztcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC50aGVuKGJ1aWxkQ29udGVudEdyb3Vwcyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZ1bmN0aW9uIGJ1aWxkSnNvbkxEKG1vZGVsKSB7XG4gICAgICAgICAgICBhbmd1bGFyXG4gICAgICAgICAgICAgICAgLmVsZW1lbnQoJzxzY3JpcHQ+JylcbiAgICAgICAgICAgICAgICAuYXR0cigndHlwZScsICdhcHBsaWNhdGlvbi9sZCtqc29uJylcbiAgICAgICAgICAgICAgICAudGV4dChqc29uRmlsdGVyKG1vZGVsKSlcbiAgICAgICAgICAgICAgICAuYXBwZW5kVG8oJ2hlYWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGJ1aWxkQ29udGVudEdyb3Vwcyh0cmVlKSB7XG4gICAgICAgICAgICB0cmVlLnVuc2hpZnQocm9vdENvbnRlbnRHcm91cCk7XG4gICAgICAgICAgICBfLmZvckVhY2godHJlZSwgZnVuY3Rpb24gKGVsZW1lbnQsIGlkeCkge1xuICAgICAgICAgICAgICAgIGFkZE1ldGEoY29udGVudEdyb3Vwc1tpZHhdLCBlbGVtZW50Lm5hbWUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGZ1bmN0aW9uIGFkZE1ldGEobmFtZSwgY29udGVudCkge1xuICAgICAgICAgICAgYW5ndWxhclxuICAgICAgICAgICAgICAgIC5lbGVtZW50KCdtZXRhW25hbWU9XCInICsgbmFtZSArICdcIicpXG4gICAgICAgICAgICAgICAgLnJlbW92ZSgpO1xuICAgICAgICAgICAgYW5ndWxhclxuICAgICAgICAgICAgICAgIC5lbGVtZW50KCc8bWV0YT4nKVxuICAgICAgICAgICAgICAgIC5hdHRyKCduYW1lJywgbmFtZSlcbiAgICAgICAgICAgICAgICAuYXR0cignY29udGVudCcsIGNvbnRlbnQpXG4gICAgICAgICAgICAgICAgLmFwcGVuZFRvKCdoZWFkJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbn0pKGFuZ3VsYXIpO1xuIiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdwZHMuY29tbW9uLmNvbnRyb2xsZXInKVxuICAgICAgICAuY29udHJvbGxlcignanNvbkxkQ29udHJvbGxlcicsIEpzb25MZENvbnRyb2xsZXIpO1xuXG4gICAgSnNvbkxkQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvY2F0aW9uJywgJ0JyZWFkY3J1bWJTZXJ2aWNlJywgJ0NhdGFsb2dTZXJ2aWNlJywgJ2pzb25GaWx0ZXInXTtcblxuICAgIGZ1bmN0aW9uIEpzb25MZENvbnRyb2xsZXIoJHNjb3BlLCAkbG9jYXRpb24sIEJyZWFkY3J1bWJTZXJ2aWNlLCBDYXRhbG9nU2VydmljZSwganNvbkZpbHRlcikge1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgICB2bS51cmwgPSAkbG9jYXRpb24uYWJzVXJsKCk7XG5cblxuICAgIH1cblxufSkoYW5ndWxhcik7XG4iLCIoZnVuY3Rpb24gKGFuZ3VsYXIsICQpIHtcbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3Bkcy5jb21tb24uY29uZmlnJylcbiAgICAgICAgLmNvbmZpZyhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJCgnYScpXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGlkeCwgZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhJChlbCkuYXR0cigndGFyZ2V0Jyk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCd0YXJnZXQnLCAnX3NlbGYnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG59KShhbmd1bGFyLCAkKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhciwgd2luZG93KSB7XG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdwZHMuY29tbW9uLmNvbmZpZycpXG4gICAgICAgIC5jb25maWcoWyckdHJhbnNsYXRlUHJvdmlkZXInLCBmdW5jdGlvbiAoJHRyYW5zbGF0ZVByb3ZpZGVyKSB7XG4gICAgICAgICAgICBpZiAod2luZG93LmNtc1RyYW5zbGF0aW9ucykge1xuICAgICAgICAgICAgICAgICR0cmFuc2xhdGVQcm92aWRlclxuICAgICAgICAgICAgICAgICAgICAudHJhbnNsYXRpb25zKCd0aGlzJywgd2luZG93LmNtc1RyYW5zbGF0aW9ucylcbiAgICAgICAgICAgICAgICAgICAgLnVzZVNhbml0aXplVmFsdWVTdHJhdGVneSgnc2FuaXRpemVQYXJhbWV0ZXJzJylcbiAgICAgICAgICAgICAgICAgICAgLnByZWZlcnJlZExhbmd1YWdlKCd0aGlzJylcbiAgICAgICAgICAgICAgICAgICAgLnVzZSgndGhpcycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XSk7XG5cbn0pKGFuZ3VsYXIsIHdpbmRvdyk7XG4iLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3Bkcy5jb21tb24uY29uZmlnJylcbiAgICAgICAgLnByb3ZpZGVyKCdsb2NhbGUnLCBMb2NhbGVQcm92aWRlcik7XG5cblxuICAgIGZ1bmN0aW9uIExvY2FsZVByb3ZpZGVyKCkge1xuICAgICAgICB2YXIgZGlzY292ZXJ5TWV0aG9kcyA9IFtdO1xuXG4gICAgICAgIHRoaXMuYWRkRGlzY292ZXJ5TWV0aG9kID0gZnVuY3Rpb24gKG1ldGhvZCkge1xuICAgICAgICAgICAgZGlzY292ZXJ5TWV0aG9kcy5wdXNoKG1ldGhvZCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLiRnZXQgPSBbJ18nLCBmdW5jdGlvbiAoXykge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBMb2NhbGUoXywgZGlzY292ZXJ5TWV0aG9kcyk7XG4gICAgICAgIH1dO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIExvY2FsZShfLCBkaXNjb3ZlcnlNZXRob2RzKSB7XG4gICAgICAgIHZhciBtZXRob2QgPSBfLmZpbmQoZGlzY292ZXJ5TWV0aG9kcywgXy5hdHRlbXB0KTtcbiAgICAgICAgdmFyIHJlc3VsdCA9ICBtZXRob2QgPyBtZXRob2QoKSA6IFtdO1xuICAgICAgICB2YXIgY291bnRyeSA9IHJlc3VsdFsxXTtcbiAgICAgICAgdmFyIGxhbmd1YWdlID0gcmVzdWx0WzJdO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY291bnRyeTogY291bnRyeSxcbiAgICAgICAgICAgIGxhbmd1YWdlOiBsYW5ndWFnZSxcbiAgICAgICAgICAgIHRvU3RyaW5nOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5sYW5ndWFnZS50b0xvd2VyQ2FzZSgpICsgXCJfXCIgKyB0aGlzLmNvdW50cnkudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgncGRzLmNvbW1vbi5jb25maWcnKVxuICAgICAgICAuZmFjdG9yeSgnXycsIFsnJHdpbmRvdycsIGZ1bmN0aW9uICgkd2luZG93KSB7XG4gICAgICAgICAgICByZXR1cm4gJHdpbmRvdy5fO1xuICAgICAgICB9XSk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdwZHMuY29tbW9uLmNvbmZpZycpXG4gICAgICAgIC5mYWN0b3J5KCdvY3NDaGFubmVsJywgT2NzQ2hhbm5lbCk7XG5cbiAgICBmdW5jdGlvbiBPY3NDaGFubmVsKCkge1xuICAgICAgICByZXR1cm4gYW5ndWxhci5lbGVtZW50KCdtZXRhW25hbWU9XCJvY3MtY2hhbm5lbFwiXScpLmF0dHIoJ2NvbnRlbnQnKTtcbiAgICB9XG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgncGRzLmNvbW1vbi5jb25maWcnKVxuICAgICAgICAuY29uZmlnKFsnbG9jYWxlUHJvdmlkZXInLCBmdW5jdGlvbiAobG9jYWxlUHJvdmlkZXIpIHtcbiAgICAgICAgICAgIHZhciBsb2NhbGVVcmxQYXR0ZXJuID0gL15cXC8oW2EtekEtWl17Mn0pXFwvKFthLXpBLVpdezJ9KS87XG4gICAgICAgICAgICBsb2NhbGVQcm92aWRlci5hZGREaXNjb3ZlcnlNZXRob2QoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBsb2NhbGVVcmxQYXR0ZXJuLmV4ZWMobmV3IFVSSSgpLnBhdGgoKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfV0pO1xuXG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdwZHMuY29tbW9uLmNvbmZpZycpXG4gICAgICAgIC5kZWNvcmF0b3IoJyR3aW5kb3cnLCBbJyRkZWxlZ2F0ZScsIFdpbmRvd0RlY29yYXRvcl0pO1xuXG4gICAgZnVuY3Rpb24gV2luZG93RGVjb3JhdG9yKCRkZWxlZ2F0ZSkge1xuICAgICAgICAkZGVsZWdhdGUubmF2aWdhdGUgPSBmdW5jdGlvbiAodXJpKSB7XG4gICAgICAgICAgICBpZiAodXJpLmluZGV4T2YoJy8nKSAhPSAwKSB7XG4gICAgICAgICAgICAgICAgdXJpID0gJy8nLmNvbmNhdCh1cmkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJGRlbGVnYXRlLmxvY2F0aW9uLmhyZWYgPSBnZXRCYXNlUGF0aCgpICsgdXJpO1xuICAgICAgICB9O1xuICAgICAgICAkZGVsZWdhdGUuZ2V0QmFzZVBhdGggPSBmdW5jdGlvbiBnZXRCYXNlUGF0aCgpIHtcbiAgICAgICAgICAgIHZhciBiYXNlUGF0aCA9IGFuZ3VsYXIuZWxlbWVudCgnYmFzZScpLmF0dHIoJ2hyZWYtb3ZlcnJpZGUnKTtcblxuICAgICAgICAgICAgaWYgKCFiYXNlUGF0aClcbiAgICAgICAgICAgICAgICBiYXNlUGF0aCA9IGFuZ3VsYXIuZWxlbWVudCgnYmFzZScpLmF0dHIoJ2hyZWYnKTtcblxuICAgICAgICAgICAgaWYgKGJhc2VQYXRoLmxhc3RJbmRleE9mKCcvJykgPT0gKGJhc2VQYXRoLmxlbmd0aCAtIDEpKSB7XG4gICAgICAgICAgICAgICAgYmFzZVBhdGggPSBiYXNlUGF0aC5zbGljZSgwLCBiYXNlUGF0aC5sZW5ndGggLSAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBiYXNlUGF0aDtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuICRkZWxlZ2F0ZTtcbiAgICB9XG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgncGRzLmNvbW1vbi5kaXJlY3RpdmUnKVxuICAgICAgICAuZGlyZWN0aXZlKCdjbGlwbGlzdGVyJywgQ2xpcGxpc3RlckRpcmVjdGl2ZSk7XG5cbiAgICBDbGlwbGlzdGVyRGlyZWN0aXZlLiRpbmplY3QgPSBbJyRmaWx0ZXInLCAnJHNjZSddO1xuXG4gICAgZnVuY3Rpb24gQ2xpcGxpc3RlckRpcmVjdGl2ZSgkZmlsdGVyLCAkc2NlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAgICAgdGVtcGxhdGU6ICc8ZGl2IGlkPVwidmlkZW9cIiBzdHlsZT1cImhlaWdodDo0MDBweDtcIj48L2Rpdj4nLFxuICAgICAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgICAgICB2aWRlb0lkOiAnPXZpZGVvSWQnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICAgICAgICAgICAgbmV3IENsaXBsaXN0ZXJDb250cm9sLlZpZXdlcih7XG4gICAgICAgICAgICAgICAgICAgIHBhcmVudElkOiBcInZpZGVvXCIsXG4gICAgICAgICAgICAgICAgICAgIGN1c3RvbWVyOiAxNTc4OTMsXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0czogW3Njb3BlLnZpZGVvSWRdLFxuICAgICAgICAgICAgICAgICAgICBrZXlUeXBlOiAxMDAwMCxcbiAgICAgICAgICAgICAgICAgICAgZnNrOiAxOCxcbiAgICAgICAgICAgICAgICAgICAgYXV0b3BsYXk6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBwbHVnaW5zOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBJbm5lckNvbnRyb2xzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXI6IDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9iaWxlRGVmYXVsdENvbnRyb2xzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBcImNvbnRyb2xzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhY2tsaXN0OiBbXCJzaGFyZVwiLFwicXVhbGl0eVwiLFwicGxheWJhY2stc3BlZWRcIl0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJleHRlcm5hbFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IFwiaHR0cHM6Ly9teWNsaXBsaXN0ZXIuY29tL3N0YXRpYy92aWV3ZXIvYXNzZXRzL3NraW5zL2RlZmF1bHQvY29udHJvbHMuaHRtbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIENsaWNrYWJsZVZpZGVvOiB7bGF5ZXI6IDF9LFxuICAgICAgICAgICAgICAgICAgICAgICAgUGxheUJ1dHRvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBcInBsYXlCdXR0b25cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllcjogNyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWFnZTogXCJodHRwczovL215Y2xpcGxpc3Rlci5jb20vc3RhdGljL3ZpZXdlci9hc3NldHMvc2tpbnMvZGVmYXVsdC9wbGF5QnV0dG9uLnBuZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDBcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBQcmV2aWV3SW1hZ2U6IHtsYXllcjogNn1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlcGxhY2U6IHRydWVcbiAgICAgICAgfVxuICAgIH07XG5cbn0pKGFuZ3VsYXIpO1xuIiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdwZHMuY29tbW9uLmRpcmVjdGl2ZScpXG4gICAgICAgIC5kaXJlY3RpdmUoJ2h0dHBTcmMnLCBIdHRwU3JjKVxuXG4gICAgdmFyIGRlZmF1bHRJbWFnZXMgPSB7XG4gICAgICAgICdpbWctYmdfQkcnOiAnL3NyYy9tZWRpYS9pbWdfRGVmYXVsdF9CR18xLmpwZycsXG4gICAgICAgICdpbWctZXNfRVMnOiAnL3NyYy9tZWRpYS9pbWdfRGVmYXVsdF9FU18xLmpwZycsXG4gICAgICAgICdpbWctaHVfSFUnOiAnL3NyYy9tZWRpYS9pbWdfRGVmYXVsdF9IVV8xLmpwZycsXG4gICAgICAgICdpbWctcm9fUk8nOiAnL3NyYy9tZWRpYS9pbWdfRGVmYXVsdF9ST18xLmpwZydcbiAgICB9O1xuICAgIHZhciBkZWZhdWx0TGFuZyA9ICdiZ19CRydcblxuICAgIEh0dHBTcmMuJGluamVjdCA9IFsnXycsICckaHR0cCcsICdsb2NhbGUnXTtcblxuICAgIGZ1bmN0aW9uIEh0dHBTcmMoXywgJGh0dHAsIGxvY2FsZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgICAgICBodHRwU3JjOiAnPSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsaW5rOiBsaW5rLFxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJ1xuICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG5cbiAgICAgICAgICAgIGlmICghc2NvcGUuaHR0cFNyYykge1xuICAgICAgICAgICAgICAgIHJldHVybiBkZWZhdWx0SW1hZ2UoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJGh0dHAuZ2V0KHNjb3BlLmh0dHBTcmMpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgYXR0cnMuJHNldCgnc3JjJywgc2NvcGUuaHR0cFNyYylcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaChkZWZhdWx0SW1hZ2UpXG5cbiAgICAgICAgICAgIGVsZW1lbnQuYmluZCgnZXJyb3InLCBkZWZhdWx0SW1hZ2UpO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBkZWZhdWx0SW1hZ2UoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGltYWdlID0gZGVmYXVsdEltYWdlc1snaW1nLScrbG9jYWxlLnRvU3RyaW5nKCldIHx8IGRlZmF1bHRJbWFnZXNbJ2ltZy0nK2RlZmF1bHRMYW5nXVxuICAgICAgICAgICAgICAgIGF0dHJzLiRzZXQoJ3NyYycsIGltYWdlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG5cbiAgICB9XG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgncGRzLmNvbW1vbi5kaXJlY3RpdmUnKVxuICAgICAgICAuZGlyZWN0aXZlKCdqc29ubGQnLCBKc29uTGREaXJlY3RpdmUpO1xuXG4gICAgSnNvbkxkRGlyZWN0aXZlLiRpbmplY3QgPSBbJyRmaWx0ZXInLCAnJHNjZSddO1xuXG4gICAgZnVuY3Rpb24gSnNvbkxkRGlyZWN0aXZlKCRmaWx0ZXIsICRzY2UpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogJzxzY3JpcHQgdHlwZT1cImFwcGxpY2F0aW9uL2xkK2pzb25cIiBuZy1iaW5kLWh0bWw9XCJvbkdldEpzb24oKVwiPjwvc2NyaXB0PicsXG4gICAgICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgICAgIGpzb246ICc9anNvbidcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcbiAgICAgICAgICAgICAgICBzY29wZS5vbkdldEpzb24gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRzY2UudHJ1c3RBc0h0bWwoJGZpbHRlcignanNvbicpKHNjb3BlLmpzb24pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZVxuICAgICAgICB9XG4gICAgfTtcblxufSkoYW5ndWxhcik7XG4iLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3Bkcy5jb21tb24uZGlyZWN0aXZlJylcbiAgICAgICAgLmRpcmVjdGl2ZSgnc2ltcGxlU3VibWVudScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgICAgICAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgICAgICAgICAgICAgICAvLyBpbml0TmF2Q29sbGFwc2UoZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgIC8vIGZ1bmN0aW9uIGluaXROYXZDb2xsYXBzZShzdWJtZW51cykge1xuICAgICAgICAgICAgICAgICAgICAvLyAgICAgdmFyIGJhY2tMYWJlbCA9IHdpbmRvdy5jbXNUcmFuc2xhdGlvbnMgJiYgd2luZG93LmNtc1RyYW5zbGF0aW9ucy5NT0JJTEVfTkFWSUdBVElPTl9CQUNLO1xuICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAvLyAgICAgc3VibWVudXNcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAuYXBwZW5kKCc8bGkgY2xhc3M9XCJkbC1iYWNrXCI+PGE+JyArIGJhY2tMYWJlbCArICc8L2E+PC9saT4nKVxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIC5lbmQoKVxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIC5vbignY2xpY2snLCAnLmpzLW9wZW4tc3VibWVudScsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIGlmIChLaXQuYklzWHMpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50KCdsaScpLmFkZENsYXNzKCdpcy1vcGVuJykucGFyZW50KCd1bCcpLmFkZENsYXNzKCduYXYtZXhwYW5kZWQnKS5jbG9zZXN0KCdsaS5pcy1vcGVuJykuYWRkQ2xhc3MoJ3RyYWlsJyk7XG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIC5vbignY2xpY2snLCAnbGkuZGwtYmFjaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIGlmIChLaXQuYklzWHMpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnbGkuaXMtb3BlbicpLnJlbW92ZUNsYXNzKCdpcy1vcGVuJykucGFyZW50KCd1bC5uYXYtZXhwYW5kZWQnKS5yZW1vdmVDbGFzcygnbmF2LWV4cGFuZGVkJykucGFyZW50KCdsaS50cmFpbCcpLnJlbW92ZUNsYXNzKCd0cmFpbCcpO1xuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAub24oJ2hpZGRlbi5icy5jb2xsYXBzZScsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIEtpdC5yZXNldF9uYXZQcmltYXJ5KCk7XG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAub24oJ2NsaWNrJywgJ2xpJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICB2YXIgb2NzTmF2ID0gJCgnI29jcy1uYXYnKS5maW5kKCd1bC5uYXYnKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgb2NzTmF2LmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgc2V0VGltZW91dChvY3NOYXYucmVtb3ZlQ2xhc3MuYmluZChvY3NOYXYsICdoaWRkZW4nKSwgNTAwKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbn0pKGFuZ3VsYXIpO1xuIiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdwZHMuY29tbW9uLmZpbHRlcicpXG4gICAgICAgIC5maWx0ZXIoJ2ltYWdlVXJsJywgSW1hZ2VVcmxGaWx0ZXIpO1xuXG4gICAgSW1hZ2VVcmxGaWx0ZXIuJGluamVjdCA9IFsnZW52JywgJ2xvY2FsZScsICdvY3NDaGFubmVsJ107XG5cbiAgICB2YXIgZGVmYXVsdEltYWdlcyA9IHtcbiAgICAgICAgJ2ltZy1zbSc6ICcvc3JjL21lZGlhL2RlZmF1bHQtNDYweDQ2MC5qcGcnLFxuICAgICAgICAnaW1nLW1kJzogJy9zcmMvbWVkaWEvZGVmYXVsdC02NDB4MzcyLmpwZycsXG4gICAgICAgICdpbWctbGcnOiAnL3NyYy9tZWRpYS9kZWZhdWx0LTY4MHg0NDAuanBnJyxcbiAgICAgICAgJ2ltZy14bGcnOiAnL3NyYy9tZWRpYS9kZWZhdWx0LTE2MDB4NTYwLmpwZydcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gSW1hZ2VVcmxGaWx0ZXIoZW52LCBsb2NhbGUsIG9jc0NoYW5uZWwpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChtZWRpYU9iamVjdCwgc2l6ZSkge1xuICAgICAgICAgICAgcmV0dXJuIG1lZGlhT2JqZWN0ID8gZW52LmVuZFBvaW50Lm9jc01lZGlhRW5kcG9pbnQgKyBvY3NDaGFubmVsICsgXCIvXCIgKyBsb2NhbGUudG9TdHJpbmcoKSArIFwiL1wiICsgbWVkaWFPYmplY3QgOiBkZWZhdWx0SW1hZ2VzW3NpemUgfHwgJ2ltZy1zbSddO1xuICAgICAgICB9XG4gICAgfVxufSkoYW5ndWxhcik7XG4iLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcbiAgICB2YXIgQ0hBUkFDVEVSX01BUCA9IHtcbiAgICAgICAgJ1xcdTAwMkUnOiAgICcnLCAgLy8uXG4gICAgICAgICdcXHUwMDIwJzogICAnLScsIC8vU1BBQ0VcbiAgICAgICAgJ1xcdTAwMkMnOiAgICctJywgLy8sXG4gICAgICAgICdcXHUwMDI2JzogICAnLScsIC8vJlxuICAgICAgICAnXFx1MDA1Qyc6ICAgJy0nLCAvL1xcXG4gICAgICAgICdcXHUyMDFFJzogICAnLScsIC8v4oCeXG4gICAgICAgICdcXHUwMDIyJzogICAnLScsIC8vJ1xuICAgICAgICAnXFx1MDAyNyc6ICAgJy0nLCAvLydcbiAgICAgICAgJ1xcdTAwQjQnOiAgICctJywgLy/CtFxuICAgICAgICAnXFx1MDA2MCc6ICAgJy0nLCAvL2BcbiAgICAgICAgJ1xcdTAwQkInOiAgICctJywgLy/Cu1xuICAgICAgICAnXFx1MDBBQic6ICAgJy0nLCAvL8KrXG4gICAgICAgICdcXHUwMDJGJzogICAnLScsIC8vL1xuICAgICAgICAnXFx1MDAzQSc6ICAgJy0nLCAvLzpcbiAgICAgICAgJ1xcdTAwMjEnOiAgICctJywgLy8hXG4gICAgICAgICdcXHUwMDJBJzogICAnLScsIC8vKlxuICAgICAgICAnXFx1MDAyOCc6ICAgJy0nLCAvLyhcbiAgICAgICAgJ1xcdTAwMjknOiAgICctJywgLy8pXG4gICAgICAgICdcXHUyMTIyJzogICAnLScsIC8v4oSiXG4gICAgICAgICdcXHUwMEFFJzogICAnLScsIC8vwq5cbiAgICAgICAgJ1xcdTAwRTEnOiAgICdhJywgLy/DoVxuICAgICAgICAnXFx1MDBGMyc6ICAgJ28nLCAvL8OzXG4gICAgICAgICdcXHUwMEVEJzogICAnaScsIC8vw61cbiAgICAgICAgJ1xcdTAwRTknOiAgICdlJywgLy/DqVxuICAgICAgICAnXFx1MDBFNCc6ICAgJ2FlJywvL8OkXG4gICAgICAgICdcXHUwMEY2JzogICAnb2UnLC8vw7ZcbiAgICAgICAgJ1xcdTAxNTEnOiAgICdvJywgLy/FkVxuICAgICAgICAnXFx1MDBGQyc6ICAgJ3UnLCAvL8O8XG4gICAgICAgICdcXHUwMEZBJzogICAndScsIC8vw7pcbiAgICAgICAgJ1xcdTAxNzEnOiAgICd1JywgLy/FsVxuICAgICAgICAnXFx1MDBERic6ICAgJ3NzJywvL8OfXG4gICAgICAgICdcXHUwMEVFJzogICAnaScsIC8vw65cbiAgICAgICAgJ1xcdTAwRTInOiAgICdhJywgLy/DolxuICAgICAgICAnXFx1MDEwMyc6ICAgJ2EnLCAvL8SDXG4gICAgICAgICdcXHUwMjFCJzogICAndCcsIC8vyJtcbiAgICAgICAgJ1xcdTAxNjMnOiAgICd0JywgLy/Fo1xuICAgICAgICAnXFx1MDE1Ric6ICAgJ3QnLCAvL8WfXG4gICAgICAgICdcXHUwMjE5JzogICAncycsIC8vyJlcbiAgICAgICAgJ1xcdTAxNTknOiAgICdyJywgLy/FmVxuICAgICAgICAnXFx1MDE2Zic6ICAgJ3UnLCAvL8WvXG4gICAgICAgICdcXHUwMEZEJzogICAneScsIC8vw71cbiAgICAgICAgJ1xcdTAxMEQnOiAgICdjJywgLy/EjVxuICAgICAgICAnXFx1MDExQic6ICAgJ2UnLCAvL8SbXG4gICAgICAgICdcXHUwMTdFJzogICAneicsIC8vxb5cbiAgICAgICAgJ1xcdTAxNjEnOiAgICdzJywgLy/FoVxuICAgICAgICAnXFx1MDE2NSc6ICAgJ3QnLCAvL8WlXG4gICAgICAgICdcXHUwMTQ4JzogICAnbicsIC8vxYhcbiAgICAgICAgJ1xcdTIwMTknOiAgICctJywgLy/igJlcbiAgICAgICAgJ1xcdTAwZTAnOiAgICdhJyAgLy/DoFxuICAgIH07XG4gICAgdmFyIGNoYXJhY3RlclJlZ2V4ID0gX1xuICAgICAgICAubWFwKENIQVJBQ1RFUl9NQVAsIGZ1bmN0aW9uICh2YWwsIGtleSkge1xuICAgICAgICAgICAgcmV0dXJuICdcXFxcJyArIGtleTtcbiAgICAgICAgfSlcbiAgICAgICAgLmpvaW4oJ3wnKTtcbiAgICB2YXIgcmVnRXhwID0gbmV3IFJlZ0V4cChjaGFyYWN0ZXJSZWdleCwgJ2cnKTtcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgncGRzLmNvbW1vbi5maWx0ZXInKVxuICAgICAgICAuZmlsdGVyKCdzaW1wbGlmeUNoYXJhY3RlcnMnLCBbJ18nLCBmdW5jdGlvbiAoXykge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsICYmIHZhbFxuICAgICAgICAgICAgICAgICAgICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKHJlZ0V4cCwgZnVuY3Rpb24gKG1hdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIENIQVJBQ1RFUl9NQVBbbWF0Y2hdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1dKVxuXG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbihhbmd1bGFyKSB7XG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdwZHMuY29tbW9uLnJvdXRlJylcbiAgICAgICAgLmNvbmZpZyhSb3V0ZUNvbmZpZyk7XG5cbiAgICBSb3V0ZUNvbmZpZy4kaW5qZWN0ID0gWyckc3RhdGVQcm92aWRlcicsICckbG9jYXRpb25Qcm92aWRlcicsICdjb25maWcnXTtcblxuICAgIGZ1bmN0aW9uIFJvdXRlQ29uZmlnKCRzdGF0ZVByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlciwgY29uZmlnKSB7XG4gICAgICAgICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcbiAgICAgICAgJHN0YXRlUHJvdmlkZXIucGRzUm91dGUgPSBmdW5jdGlvbiAocm91dGUpIHtcbiAgICAgICAgICAgIHJvdXRlLnVybCA9IHVybFBhdGgocm91dGUudXJsKTtcbiAgICAgICAgICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKHJvdXRlKTtcbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiB1cmxQYXRoKHBhdGgpIHtcbiAgICAgICAgICAgIHJldHVybiBjb25maWcucGRzUGF0aFByZWZpeCArICcvJyArIHBhdGg7XG4gICAgICAgIH1cblxuICAgIH1cbn0pKGFuZ3VsYXIpO1xuIiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdwZHMuY29tbW9uLnNlcnZpY2UnKVxuICAgICAgICAuc2VydmljZSgnU3Bpbm5lclNlcnZpY2UnLCBTcGlubmVyU2VydmljZSk7XG5cbiAgICBTcGlubmVyU2VydmljZS4kaW5qZWN0ID0gWyckaHR0cCddO1xuXG4gICAgZnVuY3Rpb24gU3Bpbm5lclNlcnZpY2UoJGh0dHApIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIHNlbGYuaXNMb2FkaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLnBlbmRpbmdSZXF1ZXN0cy5sZW5ndGggPiAwO1xuICAgICAgICB9XG5cbiAgICB9XG5cbn0pKGFuZ3VsYXIpO1xuIiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG4gICAgYW5ndWxhci5tb2R1bGUoJ3Bkcy5jYXRhbG9nLnJvdXRlJywgWydwZHMuY29tbW9uLnJvdXRlJywgJ3VpLnJvdXRlcicsICduY3ktYW5ndWxhci1icmVhZGNydW1iJ10pO1xuICAgIGFuZ3VsYXIubW9kdWxlKCdwZHMuY2F0YWxvZy5zZXJ2aWNlJywgWydwZHMuY29tbW9uLmZpbHRlciddKTtcbiAgICBhbmd1bGFyLm1vZHVsZSgncGRzLmNhdGFsb2cuY29uZmlnJywgWydwZHMuZW52aXJvbm1lbnQnLCAnbmdSZXNvdXJjZScsICdwZHMuY29tbW9uLmNvbmZpZyddKTtcbiAgICBhbmd1bGFyLm1vZHVsZSgncGRzLmNhdGFsb2cuY29udHJvbGxlcicsIFsnbmdTYW5pdGl6ZScsICdkYXRhdGFibGVzJywgJ2hsLnN0aWNreScsICdkY2JJbWdGYWxsYmFjaycsICdzbGlja0Nhcm91c2VsJywgJ3Bkcy5jYXRhbG9nLnNlcnZpY2UnLCAncGRzLmNhdGFsb2cuZGlyZWN0aXZlJywgJ3Bkcy5uYXZpZ2F0aW9uLnNlcnZpY2UnXSk7XG4gICAgYW5ndWxhci5tb2R1bGUoJ3Bkcy5jYXRhbG9nLm1vZGVsJywgW10pO1xuICAgIGFuZ3VsYXIubW9kdWxlKCdwZHMuY2F0YWxvZy5mYWN0b3J5JywgWydwZHMuY2F0YWxvZy5zZXJ2aWNlJ10pO1xuICAgIGFuZ3VsYXIubW9kdWxlKCdwZHMuY2F0YWxvZy5kaXJlY3RpdmUnLCBbXSk7XG4gICAgYW5ndWxhci5tb2R1bGUoJ3Bkcy5jYXRhbG9nJywgWydwZHMuY2F0YWxvZy5jb250cm9sbGVyJywgJ3Bkcy5jYXRhbG9nLnJvdXRlJywgJ3Bkcy5jYXRhbG9nLnNlcnZpY2UnLCAncGRzLmNhdGFsb2cuY29uZmlnJywgJ3Bkcy5jYXRhbG9nLm1vZGVsJ10pO1xufSkoYW5ndWxhcik7XG4iLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcbiAgYW5ndWxhci5tb2R1bGUoJ3Bkcy5uYXZpZ2F0aW9uLnJvdXRlJywgWyd1aS5yb3V0ZXInXSk7XG4gIGFuZ3VsYXIubW9kdWxlKCdwZHMubmF2aWdhdGlvbi5zZXJ2aWNlJywgWydwZHMubmF2aWdhdGlvbi5tb2RlbCcsICdwZHMuY29tbW9uLnNlcnZpY2UnXSk7XG4gIGFuZ3VsYXIubW9kdWxlKCdwZHMubmF2aWdhdGlvbi5jb25maWcnLCBbXSk7XG4gIGFuZ3VsYXIubW9kdWxlKCdwZHMubmF2aWdhdGlvbi5jb250cm9sbGVyJywgWydwZHMubmF2aWdhdGlvbi5zZXJ2aWNlJywgJ3Bkcy5jb21tb24uc2VydmljZSddKTtcbiAgYW5ndWxhci5tb2R1bGUoJ3Bkcy5uYXZpZ2F0aW9uLm1vZGVsJywgW10pO1xuICBhbmd1bGFyLm1vZHVsZSgncGRzLm5hdmlnYXRpb24uZGlyZWN0aXZlJywgW10pO1xuICBhbmd1bGFyLm1vZHVsZSgncGRzLm5hdmlnYXRpb24nLCBbJ3Bkcy5uYXZpZ2F0aW9uLmNvbnRyb2xsZXInLCAncGRzLm5hdmlnYXRpb24ucm91dGUnLCAncGRzLm5hdmlnYXRpb24uc2VydmljZScsICdwZHMubmF2aWdhdGlvbi5jb25maWcnLCAncGRzLm5hdmlnYXRpb24ubW9kZWwnXSk7XG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuICBhbmd1bGFyLm1vZHVsZSgncGRzLnNlYXJjaC5yb3V0ZScsIFsncGRzLmNvbW1vbi5yb3V0ZScsICd1aS5yb3V0ZXInXSk7XG4gIGFuZ3VsYXIubW9kdWxlKCdwZHMuc2VhcmNoLnNlcnZpY2UnLCBbJ3Bkcy5uYXZpZ2F0aW9uLm1vZGVsJywgJ3Bkcy5jb21tb24uY29uZmlnJ10pO1xuICBhbmd1bGFyLm1vZHVsZSgncGRzLnNlYXJjaC5jb25maWcnLCBbXSk7XG4gIGFuZ3VsYXIubW9kdWxlKCdwZHMuc2VhcmNoLmRpcmVjdGl2ZScsIFsncGRzLnNlYXJjaC5zZXJ2aWNlJywgJ3VpLmJvb3RzdHJhcCddKTtcbiAgYW5ndWxhci5tb2R1bGUoJ3Bkcy5zZWFyY2gubW9kZWwnLCBbXSk7XG4gIGFuZ3VsYXIubW9kdWxlKCdwZHMuc2VhcmNoJywgWydwZHMuc2VhcmNoLmRpcmVjdGl2ZScsICdwZHMuc2VhcmNoLnJvdXRlJywgJ3Bkcy5zZWFyY2guc2VydmljZScsICdwZHMuc2VhcmNoLmNvbmZpZycsICdwZHMuc2VhcmNoLm1vZGVsJ10pO1xufSkoYW5ndWxhcik7XG4iLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3Bkcy5jYXRhbG9nLmNvbmZpZycpXG4gICAgICAgIC5jb25maWcoWyckc2NlRGVsZWdhdGVQcm92aWRlcicsIFNjZUNvbmZpZ10pO1xuXG4gICAgZnVuY3Rpb24gU2NlQ29uZmlnKCRzY2VEZWxlZ2F0ZVByb3ZpZGVyKSB7XG4gICAgICAgICRzY2VEZWxlZ2F0ZVByb3ZpZGVyLnJlc291cmNlVXJsV2hpdGVsaXN0KFtcbiAgICAgICAgICAgICdzZWxmJyxcbiAgICAgICAgICAgICdodHRwczovL3NlcnZpY2VzLmtpdHRlbGJlcmdlci5uZXQvKionLFxuICAgICAgICAgICAgJ2h0dHBzOi8vZGV2MDIuc2FnaXRvbi5wbC8qKicsXG4gICAgICAgICAgICAnaHR0cDovL2xvY2FsaG9zdDo4MDgwLyoqJyxcbiAgICAgICAgICAgICdodHRwczovL215Y2xpcGxpc3Rlci5jb20vKionXG4gICAgICAgIF0pO1xuICAgIH1cblxufSkoYW5ndWxhcik7XG4iLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgncGRzLmNhdGFsb2cuY29udHJvbGxlcicpXG4gICAgICAgIC5jb250cm9sbGVyKFwiQ2F0YWxvZ0NvbnRyb2xsZXJcIiwgQ2F0YWxvZ0NvbnRyb2xsZXIpO1xuXG4gICAgQ2F0YWxvZ0NvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRyb290U2NvcGUnLCAndXJsUGFyc2VyU2VydmljZScsICdfJywgJ01ldGFTZXJ2aWNlJywgJ0NhdGFsb2dTZXJ2aWNlJ107XG5cbiAgICBmdW5jdGlvbiBDYXRhbG9nQ29udHJvbGxlcigkc2NvcGUsICRyb290U2NvcGUsIHVybFBhcnNlclNlcnZpY2UsIF8sIE1ldGFTZXJ2aWNlLCBDYXRhbG9nU2VydmljZSkge1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgICB2YXIgUFJPRFVDVF9DT1VOVF9MQVlPVVRfQlJFQUtQT0lOVCA9IDQ7XG4gICAgICAgIHZtLmNhdGFsb2dJZCA9IHVybFBhcnNlclNlcnZpY2UuZ2V0Q2F0YWxvZ0lkKCk7XG5cbiAgICAgICAgdm0uYW55UHJvZHVjdEhhc1ZhbHVlID0gYW55UHJvZHVjdEhhc1ZhbHVlO1xuICAgICAgICB2bS50YWJsZURlZmluaXRpb25Db250YWlucyA9IHRhYmxlRGVmaW5pdGlvbkNvbnRhaW5zO1xuICAgICAgICB2bS5yZXNwb25zaXZlQ2hhbmdlID0gcmVzcG9uc2l2ZUNoYW5nZTtcbiAgICAgICAgdm0uaXNBcnJheSA9IF8uaXNBcnJheTtcblxuICAgICAgICBNZXRhU2VydmljZS51cGRhdGVNZXRhQnlDYXRlZ29yeSh2bS5jYXRhbG9nSWQpO1xuICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ3Bkcy5icmVhZGNydW1iLnVwZGF0ZScsIHtjYXRhbG9nSWQ6IHZtLmNhdGFsb2dJZH0pO1xuXG4gICAgICAgICRzY29wZS4kb24oJ3Bkcy5jYXRhbG9nLmxvYWRlZCcsIGZ1bmN0aW9uIChldmVudCwgcGFyYW1zKSB7XG4gICAgICAgICAgICByZXR1cm4gaW5pdENhdGFsb2cocGFyYW1zLmNhdGFsb2cpO1xuICAgICAgICB9KTtcblxuICAgICAgICAkc2NvcGUuJG9uKCdwZHMuY2F0YWxvZy5sb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBhbmd1bGFyXG4gICAgICAgICAgICAgICAgLmVsZW1lbnQoJyNuYXYtcHJpbWFyeS1jb2xsYXBzZScpXG4gICAgICAgICAgICAgICAgLmZpbmQoJ2xpJylcbiAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgYW5ndWxhclxuICAgICAgICAgICAgICAgIC5lbGVtZW50KCcjb2NzLW5hdicpXG4gICAgICAgICAgICAgICAgLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZnVuY3Rpb24gaW5pdENhdGFsb2coY2F0YWxvZykge1xuICAgICAgICAgICAgdm0uY2F0YWxvZyA9IGNhdGFsb2c7XG4gICAgICAgICAgICBpZiAoXy5nZXQodm0uY2F0YWxvZywgJ3JlZGlyZWN0Q2F0ZWdvcnkuaWQnKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBDYXRhbG9nU2VydmljZS5yZWRpcmVjdFRvKHZtLmNhdGFsb2cucmVkaXJlY3RDYXRlZ29yeS5pZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2bS5jYXRhbG9nLmVuZXJneUVmZmljaWVuY3kgPSB2bS5jYXRhbG9nLmVuZXJneUVmZmljaWVuY3kgfHwge307XG4gICAgICAgICAgICB2YXIgdGVjaG5pY2FsRGF0YVRhYmxlID0gdm0uY2F0YWxvZy50ZWNobmljYWxEYXRhVGFibGUoKTtcbiAgICAgICAgICAgIGlmICh0ZWNobmljYWxEYXRhVGFibGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGFibGVEZWZpbml0aW9uID0gdGVjaG5pY2FsRGF0YVRhYmxlLnRhYmxlRGVmaW5pdGlvbjtcbiAgICAgICAgICAgICAgICB0ZWNobmljYWxEYXRhVGFibGUudGFibGVEZWZpbml0aW9uID0gX1xuICAgICAgICAgICAgICAgICAgICAuY2hhaW4odGFibGVEZWZpbml0aW9uKVxuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uKGF0dHIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZWNobmljYWxEYXRhVGFibGUuc2hvd0F0dHJpYnV0ZXNXaXRoTm9WYWx1ZXMgfHwgYW55UHJvZHVjdEhhc1ZhbHVlKHRlY2huaWNhbERhdGFUYWJsZS5wcm9kdWN0cywgYXR0cik7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoaXNOb3RIZWFkZXJBdHRyaWJ1dGUuYmluZCh0aGlzLCB0ZWNobmljYWxEYXRhVGFibGUucHJvZHVjdHMpKVxuICAgICAgICAgICAgICAgICAgICAudmFsdWUoKTtcbiAgICAgICAgICAgICAgICB2bS5yZXNwb25zaXZlQ2hhbmdlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBpc05vdEhlYWRlckF0dHJpYnV0ZShwcm9kdWN0cywgYXR0cikge1xuICAgICAgICAgICAgcmV0dXJuICFpc0hlYWRlckF0dHJpYnV0ZShwcm9kdWN0cywgYXR0cik7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBpc0hlYWRlckF0dHJpYnV0ZShwcm9kdWN0cywgYXR0cikge1xuICAgICAgICAgICAgcmV0dXJuIF8uc29tZShwcm9kdWN0cywgZnVuY3Rpb24gKHByb2R1Y3QpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvZHVjdC5oZWFkZXIua2V5ID09IGF0dHIua2V5O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBhbnlQcm9kdWN0SGFzVmFsdWUocHJvZHVjdHMsIGF0dHJpYnV0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIF8uc29tZShwcm9kdWN0cywgYXR0cmlidXRlLmtleSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB0YWJsZURlZmluaXRpb25Db250YWlucyhkZWZpbml0aW9uLCBrZXkpIHtcbiAgICAgICAgICAgIHJldHVybiBfLnNvbWUoZGVmaW5pdGlvbiwge2tleToga2V5fSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiByZXNwb25zaXZlQ2hhbmdlKGUsIHRhYmxlLCBjb2x1bW5zKSB7XG4gICAgICAgICAgICB2YXIgdGVjaG5pY2FsRGF0YVRhYmxlID0gdm0uY2F0YWxvZy50ZWNobmljYWxEYXRhVGFibGUoKTtcbiAgICAgICAgICAgIHRlY2huaWNhbERhdGFUYWJsZS5wYXJ0aXRpb25zID0gXy5jaHVuayh0ZWNobmljYWxEYXRhVGFibGUucHJvZHVjdHMsIF8uZXZlcnkoY29sdW1ucykgPyBQUk9EVUNUX0NPVU5UX0xBWU9VVF9CUkVBS1BPSU5UIDogTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKTtcbiAgICAgICAgfVxuICAgIH1cblxufSkoYW5ndWxhcik7XG4iLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcbiAgICB2YXIgVkFMVUVfVEVNUExBVEUgPSAnPHNwYW4+e3sodmFsdWUgfHwge30pLnZhbHVlID09IG51bGwgPyBcXCctXFwnIDogdmFsdWUudmFsdWV9fTwvc3Bhbj4nO1xuICAgIHZhciBJTUFHRV9NRURJQV9URU1QTEFURSA9ICc8aW1nIG5nLXNyYz1cInt7dmFsdWUudmFsdWV9fVwiIGFsdD1cInt7YWx0LnZhbHVlfX1cIiB0aXRsZT1cInt7dGl0bGUudmFsdWV9fVwiLz4nO1xuICAgIHZhciBPVEhFUl9NRURJQV9URU1QTEFURSA9ICc8c3Bhbj48YSBuZy1ocmVmPVwie3t2YWx1ZS52YWx1ZSB8IGltYWdlVXJsfX1cIiB0aXRsZT1cInt7dGl0bGUudmFsdWV9fVwiIHRhcmdldD1cIl9ibGFua1wiPjxzcGFuIHRyYW5zbGF0ZT1cIkRPV05MT0FELk5PV1wiPjwvc3Bhbj4mbmJzcDs8aSBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tZG93bmxvYWQtYWx0XCI+PC9pPjwvYT48L3NwYW4+JztcbiAgICB2YXIgTElTVF9URU1QTEFURSA9ICc8c3BhbiBuZy1yZXBlYXQ9XCJlbCBpbiB2YWx1ZS52YWx1ZVwiPnt7ZWwgKyAoISRsYXN0ID8gXCIsIFwiOiBcIlwiKX19PC9zcGFuPic7XG4gICAgdmFyIElNQUdFX0VYVEVOU0lPTlMgPSBbJy5qcGcnLCAnLnBuZycsICcuanBlZycsICcuZ2lmJ107XG4gICAgdmFyIERPVCA9ICcuJztcblxuICAgIHZhciB0ZW1wbGF0ZVN0cmF0ZWd5ID0gW1xuICAgICAgICB7XG4gICAgICAgICAgICBpc0FwcGxpY2FibGU6IGZ1bmN0aW9uICh2YWwsIHR5cGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHlwZSAmJiB0eXBlLnRvTG93ZXJDYXNlKCkgPT0gJ3N0cmluZycgJiYgSU1BR0VfRVhURU5TSU9OUy5pbmRleE9mKHZhbC5zbGljZSh2YWwubGFzdEluZGV4T2YoRE9UKSkpID49IDA7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGVtcGxhdGU6IElNQUdFX01FRElBX1RFTVBMQVRFXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlzQXBwbGljYWJsZTogZnVuY3Rpb24gKHZhbCwgdHlwZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0eXBlICYmIHR5cGUudG9Mb3dlckNhc2UoKSA9PSAnYXNzZXQnO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRlbXBsYXRlOiBPVEhFUl9NRURJQV9URU1QTEFURVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBpc0FwcGxpY2FibGU6IGZ1bmN0aW9uICh2YWwsIHR5cGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHlwZSAmJiB0eXBlLnRvTG93ZXJDYXNlKCkgPT0gJ2xpc3QnO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRlbXBsYXRlOiBMSVNUX1RFTVBMQVRFXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlzQXBwbGljYWJsZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRlbXBsYXRlOiBWQUxVRV9URU1QTEFURVxuICAgICAgICB9XG4gICAgXTtcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgncGRzLmNhdGFsb2cuZGlyZWN0aXZlJylcbiAgICAgICAgLmRpcmVjdGl2ZSgnYXR0cmlidXRlVmFsdWUnLCBbJyRjb21waWxlJywgJyRzY2UnLCBmdW5jdGlvbiAoJGNvbXBpbGUsICRzY2UpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgICAgICAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICc9YXR0cmlidXRlVmFsdWUnLFxuICAgICAgICAgICAgICAgICAgICBhbHQ6IFwiPWF0dHJpYnV0ZUFsdFwiLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCI9YXR0cmlidXRlVGl0bGVcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRycywgY3RybCkge1xuICAgICAgICAgICAgICAgICAgICBzY29wZS4kc2NlID0gJHNjZTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0ZW1wbGF0ZVN0cmF0ZWd5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2NvcGUudmFsdWUgJiYgdGVtcGxhdGVTdHJhdGVneVtpXS5pc0FwcGxpY2FibGUoc2NvcGUudmFsdWUudmFsdWUsIHNjb3BlLnZhbHVlLnR5cGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuaHRtbCgkY29tcGlsZSh0ZW1wbGF0ZVN0cmF0ZWd5W2ldLnRlbXBsYXRlKShzY29wZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XSk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiKGZ1bmN0aW9uIChhbmd1bGFyLCAkKSB7XG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdwZHMuY2F0YWxvZy5kaXJlY3RpdmUnKVxuICAgICAgICAuZGlyZWN0aXZlKCdjYXRhbG9nTWV0YWRhdGEnLCBDYXRhbG9nTWV0YWRhdGEpO1xuXG4gICAgZnVuY3Rpb24gQ2F0YWxvZ01ldGFkYXRhKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgICAgICAgICBjb250cm9sbGVyOiBDYXRhbG9nTWV0YWRhdGFDb250cm9sbGVyLFxuICAgICAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgICAgICBkYXRhOiAnPWRhdGEnXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBDYXRhbG9nTWV0YWRhdGFDb250cm9sbGVyLiRpbmplY3QgPSBbJ18nLCAnJHNjb3BlJywgJ0NhdGFsb2dTZXJ2aWNlJ107XG5cbiAgICBmdW5jdGlvbiBDYXRhbG9nTWV0YWRhdGFDb250cm9sbGVyKF8sICRzY29wZSwgQ2F0YWxvZ1NlcnZpY2UpIHtcblxuICAgICAgICB2YXIgcmVkaXJlY3RDYXRlZ29yeUlkID0gXy5nZXQoJHNjb3BlLmRhdGEsICdyZWRpcmVjdC5pZCcpXG4gICAgICAgIGlmIChyZWRpcmVjdENhdGVnb3J5SWQpIHtcbiAgICAgICAgICAgIHJldHVybiBDYXRhbG9nU2VydmljZS5yZWRpcmVjdFRvKHJlZGlyZWN0Q2F0ZWdvcnlJZClcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBjYW5vbmljYWxSZWZlcmVuY2UgPSBfLmdldCgkc2NvcGUuZGF0YSwgJ2Nhbm9uaWNhbFJlZmVyZW5jZScpXG4gICAgICAgIGlmIChjYW5vbmljYWxSZWZlcmVuY2UpIHtcbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnaGVhZCcpXG4gICAgICAgICAgICAgICAgLmZpbmQoJ2xpbmtbcmVsPWNhbm9uaWNhbF0nKVxuICAgICAgICAgICAgICAgIC5hdHRyKHsnaHJlZic6IGNhbm9uaWNhbFJlZmVyZW5jZX0pXG4gICAgICAgICAgICAgICAgLmF0dHIoeyduZy1ocmVmJzogY2Fub25pY2FsUmVmZXJlbmNlfSlcbiAgICAgICAgfVxuXG4gICAgfVxuXG59KShhbmd1bGFyLCAkKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgncGRzLmNhdGFsb2cuZGlyZWN0aXZlJylcbiAgICAgICAgLmRpcmVjdGl2ZSgnY2F0YWxvZ1RlbXBsYXRlJywgWydDYXRhbG9nU2VydmljZScsICckcm9vdFNjb3BlJywgJ18nICxmdW5jdGlvbiAoQ2F0YWxvZ1NlcnZpY2UsICRyb290U2NvcGUsIF8pIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgICAgICAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgICAgICAgICAgY2F0YWxvZ0lkOiAnPSdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHRyYW5zY2x1ZGU6IHRydWUsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6ICc8ZGl2IGNsYXNzPVwiY2F0YWxvZy10ZW1wbGF0ZVwiIG5nLXRyYW5zY2x1ZGU+PC9kaXY+JyxcbiAgICAgICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjdHJsKSB7XG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLiR3YXRjaCgnY2F0YWxvZ0lkJywgZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsICYmIENhdGFsb2dTZXJ2aWNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmdldENhdGFsb2dUZW1wbGF0ZSh2YWwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGNhdGFsb2cpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuJGNhdGFsb2cgPSBjYXRhbG9nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ3Bkcy5jYXRhbG9nLmxvYWRlZCcsIHtjYXRhbG9nOiBjYXRhbG9nfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfV0pO1xuXG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhciwgJCkge1xuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgncGRzLmNhdGFsb2cuZGlyZWN0aXZlJylcbiAgICAgICAgLmRpcmVjdGl2ZSgnZXF1YWxpemVUZWFzZXJIZWlnaHQnLCBbJyR0aW1lb3V0JywgRXF1YWxpemVUZWFzZXJIZWlnaHRdKTtcblxuICAgIGZ1bmN0aW9uIEVxdWFsaXplVGVhc2VySGVpZ2h0KCR0aW1lb3V0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0VBJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IFsnJHNjb3BlJywgJyRlbGVtZW50JywgJyRhdHRycycsIGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2NvcGUuJGxhc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWF4SGVpZ2h0ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYXJkQmxvY2sgPSAkKFwiLmNhcmQgLmNhcmQtYmxvY2tcIik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICQoY2FyZEJsb2NrKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmhlaWdodCgpID4gbWF4SGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heEhlaWdodCA9ICQodGhpcykuaGVpZ2h0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICQoY2FyZEJsb2NrKS5oZWlnaHQobWF4SGVpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfV1cbiAgICAgICAgfVxuICAgIH1cblxufSkoYW5ndWxhciwgalF1ZXJ5KTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhciwgJCkge1xuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgncGRzLmNhdGFsb2cuZGlyZWN0aXZlJylcbiAgICAgICAgLmRpcmVjdGl2ZSgnZnVsbFdpZHRoVGFibGUnLCBGdWxsV2lkdGhUYWJsZSk7XG5cbiAgICBGdWxsV2lkdGhUYWJsZS4kaW5qZWN0ID0gW107XG5cbiAgICBmdW5jdGlvbiBGdWxsV2lkdGhUYWJsZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRUEnLFxuICAgICAgICAgICAgbGluazogbGlua1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGluayhzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcblxuICAgICAgICB2YXIgdmlld3BvcnRXaWR0aCA9ICQod2luZG93KS53aWR0aCgpO1xuICAgICAgICB2YXIgdGFibGVTbGlkZXJFbGVtZW50cyA9IGVsZW1lbnQuZmluZChcIi5zbGljay10cmFjayAuY2FyZFwiKTtcbiAgICAgICAgdmFyIHRhYmxlU2xpZGVyRWxlbWVudHNBbW91bnQgPSAkKHRhYmxlU2xpZGVyRWxlbWVudHMpLmxlbmd0aDtcblxuICAgICAgICAvL2Rlc2t0b3BcbiAgICAgICAgaWYgKHZpZXdwb3J0V2lkdGggPiA5OTEpIHtcbiAgICAgICAgICAgIGlmICh0YWJsZVNsaWRlckVsZW1lbnRzQW1vdW50IDwgMykge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoXCJqcy1mdWxsLXdpZHRoLXNsaWNrLXRyYWNrXCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnJlbW92ZUNsYXNzKFwianMtZnVsbC13aWR0aC1zbGljay10cmFja1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vdGFibGV0XG4gICAgICAgIGlmICgodmlld3BvcnRXaWR0aCA8IDk5MikgJiYgKHZpZXdwb3J0V2lkdGggPiA3NjcpKSB7XG4gICAgICAgICAgICBpZiAodGFibGVTbGlkZXJFbGVtZW50c0Ftb3VudCA8IDIpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmFkZENsYXNzKFwianMtZnVsbC13aWR0aC1zbGljay10cmFja1wiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcyhcImpzLWZ1bGwtd2lkdGgtc2xpY2stdHJhY2tcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgIH1cblxufSkoYW5ndWxhciwgJCk7XG4iLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3Bkcy5jYXRhbG9nLmRpcmVjdGl2ZScpXG4gICAgICAgIC5kaXJlY3RpdmUoJ29jc0JyZWFkY3J1bWInLCBPY3NCcmVhZGNydW1iKTtcblxuICAgIHZhciBjcnVtYlRlbXBsYXRlID0gXCI8bGkgbmctcmVwZWF0PVxcXCJjcnVtYiBpbiAkYnJlYWRjcnVtYnNcXFwiIG5nLWNsYXNzPVxcXCJ7J2FjdGl2ZSBvY3MtYnJlYWRjcnVtYi1sYXN0JzogJGxhc3R9XFxcIj5cIlxuICAgICAgICAgICAgKyBcIjxhIG9jcy1uYXZpZ2F0ZT1cXFwiY3J1bWIuaWRcXFwiPnt7Y3J1bWIubmFtZX19PC9hPlwiXG4gICAgICAgICsgXCI8L2xpPlwiO1xuXG4gICAgZnVuY3Rpb24gT2NzQnJlYWRjcnVtYigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRUEnLFxuICAgICAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgICAgICBvY3NOYXZpZ2F0ZTogJz0nXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY29udHJvbGxlcjogQnJlYWRjcnVtYkNvbnRyb2xsZXJcbiAgICAgICAgfVxuICAgIH1cblxuICAgIEJyZWFkY3J1bWJDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckY29tcGlsZScsICdCcmVhZGNydW1iU2VydmljZScsICdfJ11cblxuICAgIGZ1bmN0aW9uIEJyZWFkY3J1bWJDb250cm9sbGVyKCRzY29wZSwgJGNvbXBpbGUsIEJyZWFkY3J1bWJTZXJ2aWNlLCBfKSB7XG4gICAgICAgICRzY29wZS4kb24oJ3Bkcy5icmVhZGNydW1iLnVwZGF0ZScsIGZ1bmN0aW9uIChldmVudCwgcGFyYW1zKSB7XG4gICAgICAgICAgICBCcmVhZGNydW1iU2VydmljZVxuICAgICAgICAgICAgICAgIC5idWlsZChwYXJhbXMuY2F0YWxvZ0lkKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRicmVhZGNydW1icyA9IHJlcyB8fCB7fTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJyZWFkY3J1bWJzID0gJGNvbXBpbGUoY3J1bWJUZW1wbGF0ZSkoJHNjb3BlKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJyZWFkY3J1bWJzQ29udGFpbmVyID0gYW5ndWxhci5lbGVtZW50KCcjbmF2LWJyZWFkY3J1bWJzJyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFkY3J1bWJzQ29udGFpbmVyLmZpbmQoJy5kcm9wZG93bi1tZW51JykuYXBwZW5kKGJyZWFkY3J1bWJzKTtcblxuICAgICAgICAgICAgICAgICAgICAvL1RPRE8gTW92ZSB0aGlzIHN0dWZmLCBidXQgd2hlcmUuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLlxuICAgICAgICAgICAgICAgICAgICBpZiAoXy5sYXN0KCRzY29wZS4kYnJlYWRjcnVtYnMpLnR5cGUgPT0gJ1BST0RVQ1RfRkFNSUxZJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWRjcnVtYnNDb250YWluZXIuYWRkQ2xhc3MoJ2RhcmstYnJlYWRjcnVtYicpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgYnJlYWRjcnVtYnNDb250YWluZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKCcuZHJvcGRvd24tdG9nZ2xlJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC50ZXh0KF8ubGFzdCgkc2NvcGUuJGJyZWFkY3J1bWJzKS5uYW1lKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgncGRzLmNhdGFsb2cuZGlyZWN0aXZlJylcbiAgICAgICAgLmRpcmVjdGl2ZSgnb2NzRGF0YVRhYmxlJywgT2NzRGF0YVRhYmxlKTtcblxuICAgIE9jc0RhdGFUYWJsZS4kaW5qZWN0ID0gWyckdGltZW91dCcsICdfJ107XG5cblxuICAgIGZ1bmN0aW9uIE9jc0RhdGFUYWJsZSgkdGltZW91dCwgXykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgICAgIG9jc0RhdGFUYWJsZTogJz0nLFxuICAgICAgICAgICAgICAgIG9kdFJlc3BvbnNpdmVDaGFuZ2U6ICcmJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcbiAgICAgICAgICAgICAgICBzY29wZS4kd2F0Y2goJ29jc0RhdGFUYWJsZScsIGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5EYXRhVGFibGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQub2ZmKCdyZXNwb25zaXZlLXJlc2l6ZS5kdCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5vbigncmVzcG9uc2l2ZS1yZXNpemUuZHQnLCBmdW5jdGlvbiAoZSwgdGFibGUsIGNvbHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZS5vZHRSZXNwb25zaXZlQ2hhbmdlKHskZXZlbnQ6IGUsICR0YWJsZTogdGFibGUsICRjb2x1bW5zOiBjb2xzfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxufSkoYW5ndWxhcik7XG4iLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3Bkcy5jYXRhbG9nLmRpcmVjdGl2ZScpXG4gICAgICAgIC5kaXJlY3RpdmUoJ29jc05hdmlnYXRlJywgT2NzTmF2aWdhdGVEaXJlY3RpdmUpO1xuXG4gICAgT2NzTmF2aWdhdGVEaXJlY3RpdmUuJGluamVjdCA9IFsnQ2F0YWxvZ1NlcnZpY2UnXTtcblxuICAgIGZ1bmN0aW9uIE9jc05hdmlnYXRlRGlyZWN0aXZlKENhdGFsb2dTZXJ2aWNlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0VBJyxcbiAgICAgICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICAgICAgb2NzTmF2aWdhdGU6ICc9J1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IFsnJHNjb3BlJywgJyRlbGVtZW50JywgJyRhdHRycycsIGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcbiAgICAgICAgICAgICAgICBzY29wZS4kd2F0Y2goJ29jc05hdmlnYXRlJywgZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgICAgICAgICB2YWwgJiYgQ2F0YWxvZ1NlcnZpY2VcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXNvbHZlVXJpRnJvbUhpZXJhcmNoeSh2YWwpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAodXJpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5hdHRyKCdocmVmJywgdXJpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmZpbHRlcihmdW5jdGlvbiAoaWR4LCBlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEkKGVsKS5hdHRyKCd0YXJnZXQnKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3RhcmdldCcsICdfc2VsZicpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XVxuICAgICAgICB9XG4gICAgfVxuXG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgncGRzLmNhdGFsb2cuZGlyZWN0aXZlJylcbiAgICAgICAgLmRpcmVjdGl2ZSgnb2NzTmF2aWdhdGlvbk1lbnUnLCBPY3NOYXZpZ2F0aW9uTWVudSk7XG5cbiAgICBPY3NOYXZpZ2F0aW9uTWVudS4kaW5qZWN0ID0gWydjb25maWcnLCAnJHRlbXBsYXRlQ2FjaGUnXVxuXG4gICAgZnVuY3Rpb24gT2NzTmF2aWdhdGlvbk1lbnUoY29uZmlnLCAkdGVtcGxhdGVDYWNoZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgICAgIHNjb3BlOiB0cnVlLFxuICAgICAgICAgICAgdGVtcGxhdGU6ICBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJHRlbXBsYXRlQ2FjaGUuZ2V0KCdjb21wb25lbnQvbmF2aWdhdGlvbl9tZW51Lmh0bWwnKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IE5hdmlnYXRpb25NZW51Q29udHJvbGxlcixcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJyRjdHJsJ1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgTmF2aWdhdGlvbk1lbnVDb250cm9sbGVyLiRpbmplY3QgPSBbJ01lbnVTZXJ2aWNlJywgJyRlbGVtZW50J11cblxuICAgIGZ1bmN0aW9uIE5hdmlnYXRpb25NZW51Q29udHJvbGxlcihNZW51U2VydmljZSwgJGVsZW1lbnQpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIHNlbGYubWVudSA9IHNlbGYubWVudSB8fCB7XG4gICAgICAgICAgICBuYW1lOiAkZWxlbWVudC5jaGlsZHJlbignYScpLnRleHQoKVxuICAgICAgICB9O1xuXG4gICAgICAgIE1lbnVTZXJ2aWNlXG4gICAgICAgICAgICAuZ2V0TWVudSgpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihtZW51KSB7XG4gICAgICAgICAgICAgICAgc2VsZi5tZW51ID0gbWVudTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgfVxufSkoYW5ndWxhcik7XG4iLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3Bkcy5jYXRhbG9nLmRpcmVjdGl2ZScpXG4gICAgICAgIC5jb21wb25lbnQoJ29jc05ld1Byb2R1Y3RzJywge1xuICAgICAgICAgICAgdGVtcGxhdGU6ICBbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJHRlbXBsYXRlQ2FjaGUuZ2V0KCdjb21wb25lbnQvbmV3X3Byb2R1Y3RzLmh0bWwnKVxuICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICBjb250cm9sbGVyOiBOZXdQcm9kdWN0c0NvbnRyb2xsZXJcbiAgICAgICAgfSk7XG5cbiAgICBOZXdQcm9kdWN0c0NvbnRyb2xsZXIuJGluamVjdCA9IFsnQ2F0YWxvZ1NlcnZpY2UnXVxuXG4gICAgZnVuY3Rpb24gTmV3UHJvZHVjdHNDb250cm9sbGVyKENhdGFsb2dTZXJ2aWNlKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICBzZWxmLnNsaWNrU2V0dGluZ3MgPSB7XG4gICAgICAgICAgICBcImFycm93c1wiOiBmYWxzZSxcbiAgICAgICAgICAgIFwiZG90c1wiOiB0cnVlLFxuICAgICAgICAgICAgXCJpbmZpbml0ZVwiOiBmYWxzZSxcbiAgICAgICAgICAgIFwic3BlZWRcIjogMTAwMCxcbiAgICAgICAgICAgIFwiY3NzRWFzZVwiOiBcImVhc2UtaW4tb3V0XCIsXG4gICAgICAgICAgICBcInNsaWRlc1RvU2hvd1wiOiA0LFxuICAgICAgICAgICAgXCJzbGlkZXNUb1Njcm9sbFwiOiA0LFxuICAgICAgICAgICAgXCJyZXNwb25zaXZlXCI6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIFwiYnJlYWtwb2ludFwiOiA5OTIsXG4gICAgICAgICAgICAgICAgICAgIFwic2V0dGluZ3NcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJzbGlkZXNUb1Nob3dcIjogMixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic2xpZGVzVG9TY3JvbGxcIjogMlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIFwiYnJlYWtwb2ludFwiOiA3NjgsXG4gICAgICAgICAgICAgICAgICAgIFwic2V0dGluZ3NcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJzbGlkZXNUb1Nob3dcIjogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic2xpZGVzVG9TY3JvbGxcIjogMVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXVxuICAgICAgICB9O1xuXG4gICAgICAgIENhdGFsb2dTZXJ2aWNlXG4gICAgICAgICAgICAuZ2V0TmV3UHJvZHVjdHMoKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBzZWxmLnByb2R1Y3RzID0gZGF0YS5wcm9kdWN0c1xuICAgICAgICAgICAgICAgIHNlbGYucHJvZHVjdHNMb2FkZWQgPSB0cnVlO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxufSkoYW5ndWxhcik7XG4iLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3Bkcy5jYXRhbG9nLmRpcmVjdGl2ZScpXG4gICAgICAgIC5kaXJlY3RpdmUoJ3Njcm9sbGFibGVUYWJsZUNhcmQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogU2Nyb2xsYWJsZVRhYmxlQ2FyZENvbnRyb2xsZXJcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICBTY3JvbGxhYmxlVGFibGVDYXJkQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGVsZW1lbnQnLCAnJGF0dHJzJ107XG5cbiAgICBmdW5jdGlvbiBTY3JvbGxhYmxlVGFibGVDYXJkQ29udHJvbGxlcihzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcblxuICAgICAgICB2YXIgJHRoaXNUYWJsZSA9ICQodGhpcyk7XG4gICAgICAgIHZhciB2aWV3cG9ydFdpZHRoID0gJCh3aW5kb3cpLndpZHRoKCk7XG4gICAgICAgIHZhciB0YWJsZVNsaWRlckVsZW1lbnRzID0gJHRoaXNUYWJsZS5maW5kKFwiLmNhcmRcIik7XG4gICAgICAgIHZhciB0YWJsZVNsaWRlckVsZW1lbnRzQW1vdW50ID0gJCh0YWJsZVNsaWRlckVsZW1lbnRzKS5sZW5ndGg7XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0UHJvcGVyQ29sdW1uUXVhbnRpdHkoKSB7XG4gICAgICAgICAgICBlbGVtZW50LmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgLy9kZXNrdG9wXG4gICAgICAgICAgICAgICAgaWYgKHZpZXdwb3J0V2lkdGggPiA5OTEpIHsgLy9GSVhNRVxuICAgICAgICAgICAgICAgICAgICBpZiAodGFibGVTbGlkZXJFbGVtZW50c0Ftb3VudCA8IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzVGFibGUuYWRkQ2xhc3MoXCJqcy1mdWxsLXdpZHRoLXNsaWNrLXRyYWNrXCIpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXNUYWJsZS5yZW1vdmVDbGFzcyhcImpzLWZ1bGwtd2lkdGgtc2xpY2stdHJhY2tcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvL3RhYmxldFxuICAgICAgICAgICAgICAgIGlmICgodmlld3BvcnRXaWR0aCA8IDk5MikgJiYgKHZpZXdwb3J0V2lkdGggPiA3NjcpKSB7IC8vRklYTUVcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhYmxlU2xpZGVyRWxlbWVudHNBbW91bnQgPCAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkdGhpc1RhYmxlLmFkZENsYXNzKFwianMtZnVsbC13aWR0aC1zbGljay10cmFja1wiKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzVGFibGUucmVtb3ZlQ2xhc3MoXCJqcy1mdWxsLXdpZHRoLXNsaWNrLXRyYWNrXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBzZXRQcm9wZXJDb2x1bW5RdWFudGl0eSgpXG4gICAgICAgICQod2luZG93KS5vbihcInJlc2l6ZSBvcmllbnRhdGlvbmNoYW5nZVwiLCBzZXRQcm9wZXJDb2x1bW5RdWFudGl0eSlcbiAgICB9XG5cbn0pKGFuZ3VsYXIpO1xuIiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdwZHMuY2F0YWxvZy5kaXJlY3RpdmUnKVxuICAgICAgICAuZGlyZWN0aXZlKCduYXZMYW5nJywgU3dpdGNoTGFuZ3VhZ2UpO1xuXG4gICAgU3dpdGNoTGFuZ3VhZ2UuJGluamVjdCA9IFsndXJsUGFyc2VyU2VydmljZScsICdDYXRhbG9nU2VydmljZScsICdsb2NhbGUnLCAnJHdpbmRvdyddO1xuXG4gICAgZnVuY3Rpb24gU3dpdGNoTGFuZ3VhZ2UodXJsUGFyc2VyU2VydmljZSwgY2F0YWxvZ1NlcnZpY2UsIGxvY2FsZSwgJHdpbmRvdykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFQUMnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogWyckc2NvcGUnLCAnJGVsZW1lbnQnLCAnJGF0dHJzJywgZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgICAgICAgICAgIGlmICh1cmxQYXJzZXJTZXJ2aWNlLmlzT0NTKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgLmNoaWxkcmVuKCdsaScpXG4gICAgICAgICAgICAgICAgICAgICAgICAuZWFjaChmdW5jdGlvbiAoaW5kZXgsIGVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpbmsgPSBhbmd1bGFyLmVsZW1lbnQoZWwpLmNoaWxkcmVuKCdhJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5rLmNsaWNrKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxhbmd1YWdlID0gbGluay5jaGlsZHJlbignc3BhbicpLnRleHQoKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3TG9jYWxlID0gbG9jYWxlLnRvU3RyaW5nKCkucmVwbGFjZShsb2NhbGUubGFuZ3VhZ2UsIGxhbmd1YWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0YWxvZ1NlcnZpY2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXNvbHZlVXJpRnJvbUhpZXJhcmNoeShjYXRhbG9nU2VydmljZS5nZXRJZEZyb21Mb2NhdGlvbigpLCBuZXdMb2NhbGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAodXJpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdXJsUGFyc2VyU2VydmljZS5zZXRMYW5ndWFnZSh1cmksIGxhbmd1YWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfV1cbiAgICAgICAgfVxuICAgIH1cblxufSkoYW5ndWxhcik7XG4iLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3Bkcy5jYXRhbG9nLmRpcmVjdGl2ZScpXG4gICAgICAgIC5kaXJlY3RpdmUoJ3N5bmNocm9uaXplSGVpZ2h0JywgU3luY2hyb25pemVIZWlnaHQpO1xuXG4gICAgU3luY2hyb25pemVIZWlnaHQuJGluamVjdCA9IFsnJHRpbWVvdXQnLCAnJHdpbmRvdyddO1xuXG4gICAgZnVuY3Rpb24gU3luY2hyb25pemVIZWlnaHQoJHRpbWVvdXQsICR3aW5kb3cpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRUEnLFxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZmlyc3RDb2x1bW5Sb3cgPSBhbmd1bGFyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZWxlbWVudChkb2N1bWVudClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKCcuY2FyZC5jYXJkLWNvbHVtbiB0YWJsZSB0cicpXG4gICAgICAgICAgICAgICAgICAgICAgICAuZXEoc2NvcGUuJGluZGV4ICsgMSlcblxuICAgICAgICAgICAgICAgICAgICBzY29wZS4kd2F0Y2hDb2xsZWN0aW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyQ2VsbEhlaWdodDogZmlyc3RDb2x1bW5Sb3dbMF0ub2Zmc2V0SGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNDZWxsSGVpZ2h0OiBlbGVtZW50WzBdLm9mZnNldEhlaWdodFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LCBzeW5jaHJvbml6ZVJvd0hlaWdodCwgdHJ1ZSlcblxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBzeW5jaHJvbml6ZVJvd0hlaWdodChuZXdWYWxzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWF4SGVpZ2h0ID0gbmV3VmFscy5oZWFkZXJDZWxsSGVpZ2h0ID4gbmV3VmFscy50aGlzQ2VsbEhlaWdodCA/IG5ld1ZhbHMuaGVhZGVyQ2VsbEhlaWdodCA6IG5ld1ZhbHMudGhpc0NlbGxIZWlnaHRcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuaGVpZ2h0KG1heEhlaWdodClcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0Q29sdW1uUm93LmhlaWdodChtYXhIZWlnaHQpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCA1MDApXG5cbiAgICAgICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJHdpbmRvdykuYmluZCgncmVzaXplJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdwZHMuY2F0YWxvZy5mYWN0b3J5JylcbiAgICAgICAgLmZhY3RvcnkoJ3VybEJ1aWxkZXInLCBVcmxCdWlsZGVyKTtcblxuICAgIFVybEJ1aWxkZXIuJGluamVjdCA9IFsnJGluamVjdG9yJ107XG5cbiAgICBmdW5jdGlvbiBVcmxCdWlsZGVyKCRpbmplY3Rvcikge1xuICAgICAgICByZXR1cm4gJGluamVjdG9yLmdldCgnc2VvRnJpZW5kbHlVcmxCdWlsZGVyJyk7XG4gICAgfVxufSkoYW5ndWxhcik7XG4iLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3Bkcy5jYXRhbG9nLm1vZGVsJylcbiAgICAgICAgLmZhY3RvcnkoJ0NhdGFsb2dIZWxwZXInLCBDYXRhbG9nSGVscGVyKTtcblxuICAgIGZ1bmN0aW9uIENhdGFsb2dIZWxwZXIoKSB7XG4gICAgICAgIHRoaXMudG9WaWV3ID0gZnVuY3Rpb24gKGNhdGFsb2cpIHtcbiAgICAgICAgICAgIGNhdGFsb2cuZGVzY3JpcHRpb24gPSBjYXRhbG9nLmRlc2NyaXB0aW9uTG9uZztcbiAgICAgICAgICAgIGNhdGFsb2cudGl0bGUgPSBjYXRhbG9nLmRlc2NyaXB0aW9uU2hvcnQ7XG4gICAgICAgICAgICBjYXRhbG9nLmltYWdlID0gY2F0YWxvZy5rZXlWaXN1YWwgfHwgY2F0YWxvZy5wcm9kdWN0aW1hZ2U7XG4gICAgICAgICAgICBjYXRhbG9nLnNob3dJbWFnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gISFjYXRhbG9nLmtleVZpc3VhbDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjYXRhbG9nLnNob3dUaWxlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2F0YWxvZy5pc1Jvb3RDYXRhbG9nKCkgfHwgY2F0YWxvZy5pc1N1YkNhdGFsb2coKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjYXRhbG9nLnRpbGVzID0gXy5tYXAoY2F0YWxvZy5jaGlsZHJlbiwgZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGNoaWxkLmlkLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBjaGlsZC5uYW1lLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogY2hpbGQuaGVhZGxpbmUsXG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBjaGlsZC5kZXNjcmlwdGlvblNob3J0LFxuICAgICAgICAgICAgICAgICAgICBpbWFnZTogY2hpbGQuY2F0ZWdvcnlJbWFnZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY2F0YWxvZy5zaG93TGlzdCA9IGNhdGFsb2cuaXNMZWFmQ2F0YWxvZztcbiAgICAgICAgICAgIGNhdGFsb2cubGlzdCA9IF8ubWFwKGNhdGFsb2cuY2hpbGRyZW4sIGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBjaGlsZC5pZCxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogY2hpbGQubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGNoaWxkLnByb2R1Y3RuYW1lLFxuICAgICAgICAgICAgICAgICAgICBpbWFnZTogY2hpbGQucHJvZHVjdGNhdGVnb3J5aW1hZ2UsXG4gICAgICAgICAgICAgICAgICAgIG5ldzogY2hpbGQubmV3LFxuICAgICAgICAgICAgICAgICAgICBidWxsZXRzOiBfLmhhcyhjaGlsZCwgJ2hpZ2hsaWdodENhdE92ZXJ2aWV3LnZhbHVlLmVsZW1lbnRzJykgJiYgY2hpbGQuaGlnaGxpZ2h0Q2F0T3ZlcnZpZXcudmFsdWUuZWxlbWVudHNcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY2F0YWxvZy5zaG93VGVhc2VyID0gY2F0YWxvZy5pc1Byb2R1Y3RGYW1pbHk7XG4gICAgICAgICAgICBjYXRhbG9nLm5ldyA9IGNhdGFsb2cubmV1aGVpdE9jcztcbiAgICAgICAgICAgIGNhdGFsb2cubmV3SW1hZ2UgPSAnL21lZGlhL25ldy5wbmcnO1xuICAgICAgICAgICAgY2F0YWxvZy5uYW1lID0gY2F0YWxvZy5uYW1lIHx8IGNhdGFsb2cuaGVhZGxpbmUgfHwgY2F0YWxvZy5wcm9kdWN0bmFtZTtcbiAgICAgICAgICAgIGNhdGFsb2cuZW5lcmd5RWZmaWNpZW5jeSA9IHtcbiAgICAgICAgICAgICAgICBpbWFnZTogY2F0YWxvZy5tYWluRXJwTGFiZWxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjYXRhbG9nLnNob3dUZWNobmljYWxJbmZvcm1hdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXy5oYXMoY2F0YWxvZywgJ2hpZ2hsaWdodHMudmFsdWUuZWxlbWVudHMnKSAmJiBjYXRhbG9nLmhpZ2hsaWdodHMudmFsdWUuZWxlbWVudHMubGVuZ3RoO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNhdGFsb2cudGVjaG5pY2FsSW5mb3JtYXRpb24gPSBfLmhhcyhjYXRhbG9nLCAnaGlnaGxpZ2h0cy52YWx1ZS5lbGVtZW50cycpICAmJiBjYXRhbG9nLmhpZ2hsaWdodHMudmFsdWUuZWxlbWVudHM7XG4gICAgICAgICAgICBjYXRhbG9nLnNob3dNb3JlRGV0YWlscyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXy5zaXplKGNhdGFsb2cuc3ViaGVhZGxpbmVzKSA+IDA7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY2F0YWxvZy5zdWJoZWFkbGluZXMgPSAoZnVuY3Rpb24gKGNhdGFsb2cpIHtcbiAgICAgICAgICAgICAgICB2YXIgaSA9IDE7XG4gICAgICAgICAgICAgICAgdmFyIHN1YmhlYWRsaW5lID0gY2F0YWxvZy5kZXRhaWxzU3ViaGVhZGxpbmUxO1xuICAgICAgICAgICAgICAgIHZhciBkZXNjcmlwdGlvbiA9IGNhdGFsb2cuZGV0YWlsc0Rlc2NyaXB0aW9uMTtcbiAgICAgICAgICAgICAgICB2YXIgaW1hZ2UgPSBjYXRhbG9nLmRldGFpbHNJbWFnZTE7XG4gICAgICAgICAgICAgICAgdmFyIHN1YmhlYWRsaW5lcyA9IFtdO1xuICAgICAgICAgICAgICAgIHdoaWxlKHN1YmhlYWRsaW5lICE9IG51bGwgfHwgZGVzY3JpcHRpb24gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBzdWJoZWFkbGluZXMucHVzaCh7dGl0bGU6IHN1YmhlYWRsaW5lICYmIHN1YmhlYWRsaW5lLnZhbHVlLCBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24gJiYgZGVzY3JpcHRpb24udmFsdWUsIGltYWdlOiBpbWFnZSAmJiBpbWFnZS52YWx1ZX0pO1xuICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gY2F0YWxvZ1snZGV0YWlsc0Rlc2NyaXB0aW9uJyArIGldO1xuICAgICAgICAgICAgICAgICAgICBzdWJoZWFkbGluZSA9IGNhdGFsb2dbJ2RldGFpbHNTdWJoZWFkbGluZScgKyBpXTtcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2UgPSBjYXRhbG9nWydkZXRhaWxzSW1hZ2UnICsgaV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBzdWJoZWFkbGluZXM7XG4gICAgICAgICAgICB9KShjYXRhbG9nKTtcbiAgICAgICAgICAgIGNhdGFsb2cubW9yZURldGFpbHMgPSB7XG4gICAgICAgICAgICAgICAgdGl0bGU6IGNhdGFsb2cuaGVhZGxpbmVPdmVydmlldyxcbiAgICAgICAgICAgICAgICBlbGVtZW50czogY2F0YWxvZy5zdWJoZWFkbGluZXNcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNhdGFsb2cuc2hvd1RlY2huaWNhbFRhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjYXRhbG9nLnByb2R1Y3RUYWJsZURlZmluaXRpb24gJiYgY2F0YWxvZy5jaGlsZHJlbjsgLy9GSVhNRSBUYWtlIGxvZ2ljIGZyb20gY29udHJvbGxlciwgTWFrZSB0aGlzIGN1c3RvbWl6YWJsZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNhdGFsb2cuc2hvd0Zvb3Rub3RlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2F0YWxvZy5mb290bm90ZXNUZWNoRGF0YTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjYXRhbG9nLmZvb3Rub3RlcyA9IGNhdGFsb2cuZm9vdG5vdGVzVGVjaERhdGE7XG4gICAgICAgICAgICByZXR1cm4gY2F0YWxvZztcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnRvVGVtcGxhdGVWaWV3ID0gZnVuY3Rpb24gKHRlbXBsYXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGVtcGxhdGU7XG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gZmluZFNlY3Rpb24oc2VjdGlvbnMsIG5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBfLmZpbmQoc2VjdGlvbnMsIHtuYW1lOiBuYW1lfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbn0pKGFuZ3VsYXIpO1xuIiwiKGZ1bmN0aW9uKGFuZ3VsYXIpIHtcbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3Bkcy5jYXRhbG9nLm1vZGVsJylcbiAgICAgICAgLmNvbmZpZyhDYXRhbG9nQ29uZmlnKTtcblxuICAgIENhdGFsb2dDb25maWcuJGluamVjdCA9IFsnZW52JywgJ0NhdGFsb2dQcm92aWRlciddO1xuXG4gICAgZnVuY3Rpb24gQ2F0YWxvZ0NvbmZpZyhlbnYsIGNhdGFsb2dNb2RlbFByb3ZpZGVyKSB7XG4gICAgICAgIGNhdGFsb2dNb2RlbFByb3ZpZGVyXG4gICAgICAgICAgICAucHJvZHVjdERhdGFTZXJ2aWNlRW5kUG9pbnQoZW52LmVuZFBvaW50LnByb2R1Y3REYXRhU2VydmljZSlcbiAgICAgICAgICAgIC5jb250ZW50U2VydmljZUVuZFBvaW50KGVudi5lbmRQb2ludC5jb250ZW50U2VydmljZSk7XG4gICAgfVxuXG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgncGRzLmNhdGFsb2cubW9kZWwnKVxuICAgICAgICAucHJvdmlkZXIoJ0NhdGFsb2cnLCBmdW5jdGlvbiBDYXRhbG9nUHJvdmlkZXIoKSB7XG4gICAgICAgICAgICB2YXIgcGRzVXJsID0gbnVsbDtcbiAgICAgICAgICAgIHZhciBjc1VybCA9IG51bGw7XG5cbiAgICAgICAgICAgIHRoaXMucHJvZHVjdERhdGFTZXJ2aWNlRW5kUG9pbnQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBwZHNVcmwgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMuY29udGVudFNlcnZpY2VFbmRQb2ludCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGNzVXJsID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGlzLiRnZXQgPSBbJyRyZXNvdXJjZScsICckY2FjaGVGYWN0b3J5JywgJ2xvY2FsZScsICckaHR0cCcsICdfJywgJ0NhdGFsb2dIZWxwZXInLCBmdW5jdGlvbiAoJHJlc291cmNlLCAkY2FjaGVGYWN0b3J5LCBsb2NhbGUsICRodHRwLCBfLCBDYXRhbG9nSGVscGVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDYXRhbG9nKCRyZXNvdXJjZSwgJGNhY2hlRmFjdG9yeSwgbG9jYWxlLCBwZHNVcmwsIGNzVXJsLCAkaHR0cCwgXywgQ2F0YWxvZ0hlbHBlcik7XG4gICAgICAgICAgICB9XTtcbiAgICAgICAgfSk7XG5cbiAgICBmdW5jdGlvbiBDYXRhbG9nKCRyZXNvdXJjZSwgJGNhY2hlRmFjdG9yeSwgbG9jYWxlLCBwZHNVcmwsIGNzVXJsLCAkaHR0cCwgXywgY2F0YWxvZ0hlbHBlcikge1xuICAgICAgICB2YXIgY2F0YWxvZ0NhY2hlID0gJGNhY2hlRmFjdG9yeShcImNhdGFsb2dcIik7XG4gICAgICAgIHZhciBjdXN0b21UcmFuc2Zvcm1hdGlvbnMgPSBbcmVkaXJlY3RDaGlsZHJlbl07XG4gICAgICAgIHZhciB0cmFuc2Zvcm1hdGlvbnMgPSAkaHR0cC5kZWZhdWx0cy50cmFuc2Zvcm1SZXNwb25zZS5jb25jYXQoY3VzdG9tVHJhbnNmb3JtYXRpb25zKTtcbiAgICAgICAgdmFyIHRyYW5zZm9ybVJlc3BvbnNlID0gZnVuY3Rpb24gKGRhdGEsIGhlYWRlcnMsIHN0YXR1cykge1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGRhdGE7XG4gICAgICAgICAgICBfLmVhY2godHJhbnNmb3JtYXRpb25zLCBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHQocmVzdWx0LCBoZWFkZXJzLCBzdGF0dXMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgICAgICB2YXIgQ2F0YWxvZ1Jlc291cmNlID0gJHJlc291cmNlKHBkc1VybCArICdoaWVyYXJjaHkvOmNoYW5uZWwvOmxvY2FsZS86dHlwZS86aWQnLCBudWxsLCB7XG4gICAgICAgICAgICAgICAgZ2V0OiB7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtczoge2xvY2FsZTogbG9jYWxlfSxcbiAgICAgICAgICAgICAgICAgICAgY2FjaGU6IGNhdGFsb2dDYWNoZSxcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtUmVzcG9uc2U6IGZ1bmN0aW9uIChkYXRhLCBoZWFkZXJzLCBzdGF0dXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0b0NhdGFsb2dWaWV3KHRyYW5zZm9ybVJlc3BvbnNlKGRhdGEsIGhlYWRlcnMsIHN0YXR1cykpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiB7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICAgICAgICAgIGlzQXJyYXk6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtczoge2xvY2FsZTogbG9jYWxlfSxcbiAgICAgICAgICAgICAgICAgICAgY2FjaGU6IGNhdGFsb2dDYWNoZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IHtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgICAgIHVybDogY3NVcmwgKyAncmVzdC9kb2N1bWVudC9kaXNwbGF5JyxcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtUmVzcG9uc2U6IGZ1bmN0aW9uIChkYXRhLCBoZWFkZXJzLCBzdGF0dXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0b0NhdGFsb2dUZW1wbGF0ZVZpZXcodHJhbnNmb3JtUmVzcG9uc2UoZGF0YSwgaGVhZGVycywgc3RhdHVzKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG5cbiAgICAgICAgZnVuY3Rpb24gcmVkaXJlY3RDaGlsZHJlbihkYXRhLCBoZWFkZXJzLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGRhdGEuY2hpbGRyZW4gPSBfLm1hcChkYXRhLmNoaWxkcmVuLCBmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2hpbGQucmVkaXJlY3RDYXRlZ29yeSA/IGNoaWxkLnJlZGlyZWN0Q2F0ZWdvcnkgOiBjaGlsZDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB0b0NhdGFsb2dWaWV3KGNhdGFsb2cpIHtcbiAgICAgICAgICAgIHJldHVybiBjYXRhbG9nSGVscGVyLnRvVmlldyhjYXRhbG9nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHRvQ2F0YWxvZ1RlbXBsYXRlVmlldyhjYXRhbG9nKSB7XG4gICAgICAgICAgICByZXR1cm4gY2F0YWxvZ0hlbHBlci50b1RlbXBsYXRlVmlldyhjYXRhbG9nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIENhdGFsb2dSZXNvdXJjZS5wcm90b3R5cGUuaXNMZWFmQ2F0YWxvZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFR5cGUoKSA9PSAnbGVhZl9jYXRlZ29yeSc7XG4gICAgICAgIH07XG5cbiAgICAgICAgQ2F0YWxvZ1Jlc291cmNlLnByb3RvdHlwZS5pc1Byb2R1Y3RGYW1pbHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRUeXBlKCkgPT0gJ3Byb2R1Y3RfZmFtaWx5JztcbiAgICAgICAgfTtcblxuICAgICAgICBDYXRhbG9nUmVzb3VyY2UucHJvdG90eXBlLmlzU3ViQ2F0YWxvZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFR5cGUoKSA9PSAnc3ViX2NhdGVnb3J5JztcbiAgICAgICAgfTtcblxuICAgICAgICBDYXRhbG9nUmVzb3VyY2UucHJvdG90eXBlLmlzUm9vdENhdGFsb2cgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRUeXBlKCkgPT0gJ3Jvb3RfY2F0ZWdvcnknO1xuICAgICAgICB9O1xuXG4gICAgICAgIENhdGFsb2dSZXNvdXJjZS5wcm90b3R5cGUuZ2V0VHlwZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudHlwZSA/IHRoaXMudHlwZS52YWx1ZS50b0xvd2VyQ2FzZSgpIDogU3RyaW5nKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgQ2F0YWxvZ1Jlc291cmNlLnByb3RvdHlwZS50ZWNobmljYWxEYXRhVGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc2VjdGlvbiA9IF8uZmluZCh0aGlzLnNlY3Rpb25zLCB7bmFtZTogJ1RFQ0hOSUNBTF9EQVRBX1RBQkxFJ30pXG4gICAgICAgICAgICAgICAgICAgICAgIHx8IF8uZmluZCh0aGlzLnNlY3Rpb25zLCB7bmFtZTogJ1RFQ0hOSUNBTF9EQVRBX1RBQkxFX1NMSURFUid9KTtcbiAgICAgICAgICAgIHJldHVybiBzZWN0aW9uICYmIHNlY3Rpb24ucGFyYW1zO1xuICAgICAgICB9O1xuXG4gICAgICAgIENhdGFsb2dSZXNvdXJjZS5mYWxsYmFja1R5cGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ1BST0RVQ1RfRkFNSUxZJztcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gQ2F0YWxvZ1Jlc291cmNlO1xuICAgIH1cblxufSkoYW5ndWxhcik7XG4iLCIoZnVuY3Rpb24oYW5ndWxhcikge1xuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgncGRzLmNhdGFsb2cucm91dGUnKVxuICAgICAgICAuY29uZmlnKFJvdXRlQ29uZmlnKTtcblxuICAgIFJvdXRlQ29uZmlnLiRpbmplY3QgPSBbJyRzdGF0ZVByb3ZpZGVyJ107XG5cbiAgICBmdW5jdGlvbiBSb3V0ZUNvbmZpZygkc3RhdGVQcm92aWRlcikge1xuICAgICAgICAkc3RhdGVQcm92aWRlci5wZHNSb3V0ZSh7XG4gICAgICAgICAgICBuYW1lOiAnY2F0YWxvZycsXG4gICAgICAgICAgICB1cmw6ICd7Y2F0VXJsOi4qLVtjcF1bL10/fScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVByb3ZpZGVyOiBbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpe1xuICAgICAgICAgICAgICAgIHJldHVybiAkdGVtcGxhdGVDYWNoZS5nZXQoJ2NhdGFsb2czLmh0bWwnKVxuICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnQ2F0YWxvZ0NvbnRyb2xsZXIgYXMgdm0nLFxuICAgICAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgICAgICAgIHJlZGlyZWN0OiBbJ01ldGFTZXJ2aWNlJywgZnVuY3Rpb24gKG1ldGFTZXJ2aWNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXRhU2VydmljZS5yZWRpcmVjdE9uSW52YWxpZFVybCgpO1xuICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn0pKGFuZ3VsYXIpO1xuIiwiKGZ1bmN0aW9uKGFuZ3VsYXIpIHtcbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoXCJwZHMuY2F0YWxvZy5zZXJ2aWNlXCIpXG4gICAgICAgIC5zZXJ2aWNlKFwiQnJlYWRjcnVtYlNlcnZpY2VcIiwgQnJlYWRjcnVtYlNlcnZpY2UpO1xuXG4gICAgQnJlYWRjcnVtYlNlcnZpY2UuJGluamVjdCA9IFsnQ2F0YWxvZ1NlcnZpY2UnLCAnXycsICckcSddO1xuXG4gICAgZnVuY3Rpb24gQnJlYWRjcnVtYlNlcnZpY2UoQ2F0YWxvZ1NlcnZpY2UsIF8sICRxKSB7XG4gICAgICAgIHZhciB0ZW1wbGF0ZVByb21pc2VcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYnVpbGQ6IGJ1aWxkXG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gYnVpbGQoY2F0ZWdvcnlJZCkge1xuICAgICAgICAgICAgdGVtcGxhdGVQcm9taXNlID0gdGVtcGxhdGVQcm9taXNlIHx8IENhdGFsb2dTZXJ2aWNlLmdldFRlbXBsYXRlKGNhdGVnb3J5SWQsICdCUkVBRENSVU1CUycpXG5cbiAgICAgICAgICAgIHJldHVybiB0ZW1wbGF0ZVByb21pc2VcbiAgICAgICAgICAgICAgICAudGhlbihkZWNvcmF0ZVdpdGhVcmxzKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICh0cmVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfLm1hcCh0cmVlLCBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF8ucGljayhub2RlLCAnaWQnLCAnbmFtZScsICd1cmwnLCAndHlwZScpXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBkZWNvcmF0ZVdpdGhVcmxzKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICB2YXIgdHJlZSA9IHJlc3BvbnNlLm5vZGVzXG4gICAgICAgICAgICB2YXIgcHJvbWlzZXMgPSBfLm1hcCh0cmVlLCBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBDYXRhbG9nU2VydmljZVxuICAgICAgICAgICAgICAgICAgICAucmVzb2x2ZVVyaUZyb21IaWVyYXJjaHkobm9kZS5pZClcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHVybCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS51cmwgPSB1cmw7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm9kZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICByZXR1cm4gJHEuYWxsKHByb21pc2VzKVxuICAgICAgICB9XG4gICAgfVxuXG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbihhbmd1bGFyKSB7XG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKFwicGRzLmNhdGFsb2cuc2VydmljZVwiKVxuICAgICAgICAuc2VydmljZShcIkNhdGFsb2dTZXJ2aWNlXCIsIENhdGFsb2dTZXJ2aWNlKTtcblxuICAgIENhdGFsb2dTZXJ2aWNlLiRpbmplY3QgPSBbJyR3aW5kb3cnLCAnQ2F0YWxvZycsICdNZW51U2VydmljZScsICdDYXRhbG9nVXJsU2NoZW1hJywgJ2NhdGFsb2dTZWFyY2hMaXN0ZW5lcicsICdfJywgJyRxJywgJ2xvY2FsZSddO1xuXG4gICAgZnVuY3Rpb24gQ2F0YWxvZ1NlcnZpY2UoJHdpbmRvdywgQ2F0YWxvZywgbWVudVNlcnZpY2UsIGNhdGFsb2dVcmxTY2hlbWEsIGNhdGFsb2dTZWFyY2hMaXN0ZW5lciwgXywgJHEsIGxvY2FsZSkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHZhciBjYXRhbG9nVGVtcGxhdGU7XG5cbiAgICAgICAgY2F0YWxvZ1NlYXJjaExpc3RlbmVyXG4gICAgICAgICAgICAubGlzdGVuKClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChwYXJhbXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZVVyaUZyb21IaWVyYXJjaHkocGFyYW1zLnRhcmdldC5yZXNvdXJjZUlkKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAodXJpKSB7XG4gICAgICAgICAgICAgICAgJHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdXJpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGdldE5ld1Byb2R1Y3RzOiBnZXROZXdQcm9kdWN0cyxcbiAgICAgICAgICAgIGdldENhdGFsb2dUZW1wbGF0ZTogZ2V0Q2F0YWxvZ1RlbXBsYXRlLFxuICAgICAgICAgICAgZ2V0VGVtcGxhdGU6IGdldFRlbXBsYXRlLFxuICAgICAgICAgICAgcmVkaXJlY3RUbzogbmF2aWdhdGVUbyxcbiAgICAgICAgICAgIHRyYXZlbFVwTmF2aWdhdGlvbkhpZXJhcmNoeTogdHJhdmVsVXBOYXZpZ2F0aW9uSGllcmFyY2h5LFxuICAgICAgICAgICAgZ2V0SWRGcm9tTG9jYXRpb246IGdldElkRnJvbUxvY2F0aW9uLFxuICAgICAgICAgICAgcmVzb2x2ZVVyaUZyb21IaWVyYXJjaHk6IHJlc29sdmVVcmlGcm9tSGllcmFyY2h5LFxuICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIGdldEJ5VGFnKHR5cGUsIHRhZykge1xuICAgICAgICAgICAgcmV0dXJuIENhdGFsb2cucXVlcnkoe3R5cGU6IHR5cGUsIGlkOiB0YWcsIHF1ZXJ5VHlwZTogJ3RhZyd9KS4kcHJvbWlzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldE5ld1Byb2R1Y3RzKCkge1xuICAgICAgICAgICAgdmFyIGNhdGFsb2cgPSBuZXcgQ2F0YWxvZyh7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IHtuYW1lOiAnTkVXX1BST0RVQ1RTJ30sXG4gICAgICAgICAgICAgICAgbW9kZWw6IHtcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxlOiBsb2NhbGUudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgY2hhbm5lbDogZ2V0T0NTQ2hhbm5lbCgpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gY2F0YWxvZy4kdGVtcGxhdGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldEJ5SWQoY2F0ZWdvcnlJZCkge1xuICAgICAgICAgICAgcmV0dXJuIGdldFR5cGVGcm9tSGllcmFyY2h5KGNhdGVnb3J5SWQpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIENhdGFsb2cuZ2V0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBjYXRlZ29yeUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5uZWw6IGdldE9DU0NoYW5uZWwoKVxuICAgICAgICAgICAgICAgICAgICB9KS4kcHJvbWlzZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldENhdGFsb2dUZW1wbGF0ZShjYXRhbG9nSWQpIHtcbiAgICAgICAgICAgIGNhdGFsb2dUZW1wbGF0ZSA9IGNhdGFsb2dUZW1wbGF0ZSB8fCBnZXRUZW1wbGF0ZShjYXRhbG9nSWQpXG4gICAgICAgICAgICByZXR1cm4gY2F0YWxvZ1RlbXBsYXRlXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRUZW1wbGF0ZShjYXRhbG9nSWQsIHR5cGUpIHtcbiAgICAgICAgICAgIHJldHVybiBnZXRUeXBlRnJvbUhpZXJhcmNoeShjYXRhbG9nSWQpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHR5cGVGcm9tSGllcmFyY2h5KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjYXRhbG9nID0gbmV3IENhdGFsb2coe1xuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IHtuYW1lOiB0eXBlIHx8IHR5cGVGcm9tSGllcmFyY2h5fSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxlOiBsb2NhbGUudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFubmVsOiBnZXRPQ1NDaGFubmVsKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0YWxvZ1JlcXVlc3Q6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGNhdGFsb2dJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbm5lbDogZ2V0T0NTQ2hhbm5lbCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiB0eXBlRnJvbUhpZXJhcmNoeVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjYXRhbG9nLiR0ZW1wbGF0ZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0T0NTQ2hhbm5lbCgpIHtcbiAgICAgICAgICAgIHJldHVybiBhbmd1bGFyLmVsZW1lbnQoJ21ldGFbbmFtZT1cIm9jcy1jaGFubmVsXCJdJykuYXR0cignY29udGVudCcpXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRCeUlkQW5kVHlwZShpZCwgdHlwZSkge1xuICAgICAgICAgICAgcmV0dXJuIENhdGFsb2cuZ2V0KHtpZDogaWQsIHR5cGU6IHR5cGV9KS4kcHJvbWlzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldFR5cGVGcm9tSGllcmFyY2h5KGlkKSB7XG4gICAgICAgICAgICByZXR1cm4gbWVudVNlcnZpY2VcbiAgICAgICAgICAgICAgICAuZmluZEluTmF2aWdhdGlvbihpZClcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoY2F0YWxvZykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2F0YWxvZyA/IGNhdGFsb2cudHlwZSA6IENhdGFsb2cuZmFsbGJhY2tUeXBlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB0cmF2ZWxVcEhpZXJhcmNoeShjYXRlZ29yeUlkLCB0cmVlKSB7XG4gICAgICAgICAgICB0cmVlID0gdHJlZSB8fCBbXTtcbiAgICAgICAgICAgIHJldHVybiBnZXRCeUlkKGNhdGVnb3J5SWQpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJlZS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBkYXRhLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogZGF0YS50eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogZGF0YS5uYW1lXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLnBhcmVudElkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJhdmVsVXBIaWVyYXJjaHkoZGF0YS5wYXJlbnRJZCwgdHJlZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRyZWU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB0cmF2ZWxVcE5hdmlnYXRpb25IaWVyYXJjaHkoY2F0ZWdvcnlJZCwgbG9jYWxlKSB7XG4gICAgICAgICAgICByZXR1cm4gbWVudVNlcnZpY2VcbiAgICAgICAgICAgICAgICAuZmluZEluTmF2aWdhdGlvbihjYXRlZ29yeUlkLCBsb2NhbGUpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRyZWUgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUoaXRlbSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmVlLnB1c2goaXRlbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtID0gbWVudVNlcnZpY2UuZmluZFBhcmVudEluTmF2aWdhdGlvbihpdGVtLmlkLCBsb2NhbGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkcS5hbGwodHJlZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBuYXZpZ2F0ZVRvKGlkKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZVVyaShpZClcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAodXJpKSB7XG4gICAgICAgICAgICAgICAgICAgICR3aW5kb3cubG9jYXRpb24uaHJlZiA9IHVyaTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHJlc29sdmVVcmkoY2F0ZWdvcnlJZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRyYXZlbFVwSGllcmFyY2h5KGNhdGVnb3J5SWQpXG4gICAgICAgICAgICAgICAgLnRoZW4oYnVpbGRVcmkpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gYnVpbGRVcmkodHJlZSkge1xuICAgICAgICAgICAgcmV0dXJuIGNhdGFsb2dVcmxTY2hlbWEuYnVpbGQodHJlZSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiByZXNvbHZlVXJpRnJvbUhpZXJhcmNoeShjYXRlZ29yeUlkLCBsb2NhbGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0cmF2ZWxVcE5hdmlnYXRpb25IaWVyYXJjaHkoY2F0ZWdvcnlJZCwgbG9jYWxlKS50aGVuKGJ1aWxkVXJpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldElkRnJvbUxvY2F0aW9uKHVyaSkge1xuICAgICAgICAgICAgdXJpID0gdXJpIHx8IG5ldyBVUkkoKS50b1N0cmluZygpO1xuICAgICAgICAgICAgdmFyIHBhcnRzID0gdXJpLnNwbGl0KCctJyk7XG4gICAgICAgICAgICByZXR1cm4gcGFydHNbcGFydHMubGVuZ3RoIC0gMl07XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRQcm9kdWN0RmFtaWx5KHByb2R1Y3QpIHtcbiAgICAgICAgICAgIGlmICghcHJvZHVjdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAkcS5yZXNvbHZlKG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGVsZW1lbnRzID0gcHJvZHVjdC5wYXJlbnRJZC52YWx1ZS5lbGVtZW50cyB8fCBbcHJvZHVjdC5wYXJlbnRJZC52YWx1ZV07XG4gICAgICAgICAgICByZXR1cm4gJHFcbiAgICAgICAgICAgICAgICAuYWxsKF8ubWFwKGVsZW1lbnRzLCBmdW5jdGlvbiAocGFyZW50SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lbnVTZXJ2aWNlLmZpbmRJbk5hdmlnYXRpb24ocGFyZW50SWQpIHx8IHt9O1xuICAgICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChub2Rlcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXy5maW5kKG5vZGVzLCBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5vZGUudHlwZSA9PT0gQ2F0YWxvZy5mYWxsYmFja1R5cGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbn0pKGFuZ3VsYXIpO1xuIiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdwZHMuY2F0YWxvZy5zZXJ2aWNlJylcbiAgICAgICAgLnNlcnZpY2UoJ0NhdGFsb2dVcmxTY2hlbWEnLCBDYXRhbG9nVXJsU2NoZW1hKTtcblxuICAgIENhdGFsb2dVcmxTY2hlbWEuJGluamVjdCA9IFsnU2VvRnJpZW5kbHlVcmxCdWlsZGVyJywgJ18nXTtcblxuICAgIGZ1bmN0aW9uIENhdGFsb2dVcmxTY2hlbWEoU2VvRnJpZW5kbHlVcmxCdWlsZGVyLCBfKSB7XG4gICAgICAgIHZhciBwcm9kdWN0UHJlZml4ID0gJ3AnO1xuICAgICAgICB2YXIgY2F0ZWdvcnlQcmVmaXggPSAnYyc7XG4gICAgICAgIHZhciBwcm9kdWN0RGV0YWlsc1R5cGUgPSAncHJvZHVjdF9kZXRhaWxzJztcbiAgICAgICAgdmFyIHNjaGVtYXMgPSB7XG4gICAgICAgICAgICAnY29tZXJjaWFsLWUtaW5kdXN0cmlhbCc6IGluZHVzdHJpYWxTY2hlbWEgLy9UT0RPIE1ha2UgdGhpcyBsb2NhbGUgaW5kZXBlbmRlbnRcbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiBnZXRTaXRlQ2hhbm5lbCgpIHtcbiAgICAgICAgICAgIHJldHVybiBhbmd1bGFyLmVsZW1lbnQoJ21ldGFbbmFtZT1cImNoYW5uZWxcIl0nKS5hdHRyKCdjb250ZW50JykgfHwgJyc7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmJ1aWxkID0gZnVuY3Rpb24gKHRyZWUpIHtcbiAgICAgICAgICAgIGlmICghXy5zaXplKHRyZWUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFN0cmluZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGdldFNjaGVtYShnZXRTaXRlQ2hhbm5lbCgpKSh0cmVlKTtcbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiBnZXRTY2hlbWEobmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIHNjaGVtYXNbbmFtZV0gfHwgcmVzaWRlbnRpYWxTY2hlbWE7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBpbmR1c3RyaWFsU2NoZW1hKHRyZWUpIHtcbiAgICAgICAgICAgIHZhciBidWlsZGVyID0gbmV3IFNlb0ZyaWVuZGx5VXJsQnVpbGRlcih7b2NzQmFzZVBhdGg6IGdldFNpdGVDaGFubmVsKCkgKyAnL29jcyd9KTtcbiAgICAgICAgICAgIF8uZm9yRWFjaFJpZ2h0KHRyZWUsIGZ1bmN0aW9uIChub2RlLCBpbmRleCkge1xuICAgICAgICAgICAgICAgIHZhciBmcmFnbWVudHMgPSBbbm9kZS5uYW1lXTtcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBmcmFnbWVudHMucHVzaChub2RlLmlkLCBjYXRlZ29yeVByZWZpeCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJ1aWxkZXIuYWRkUGF0aChmcmFnbWVudHMpO1xuXG4gICAgICAgICAgICAgICAgaWYgKG5vZGUudHlwZSA9PSBwcm9kdWN0RGV0YWlsc1R5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgYnVpbGRlci5zZXRQYXRoKFtub2RlLm5hbWUsIG5vZGUuaWQsIHByb2R1Y3RQcmVmaXhdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBidWlsZGVyLmJ1aWxkKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiByZXNpZGVudGlhbFNjaGVtYSh0cmVlKSB7XG4gICAgICAgICAgICB2YXIgYnVpbGRlciA9IG5ldyBTZW9GcmllbmRseVVybEJ1aWxkZXIoKTtcbiAgICAgICAgICAgIF8uZm9yRWFjaFJpZ2h0KHRyZWUsIGZ1bmN0aW9uIChub2RlLCBpbmRleCkge1xuICAgICAgICAgICAgICAgIHZhciBmcmFnbWVudHMgPSBbbm9kZS5uYW1lXTtcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBmcmFnbWVudHMucHVzaChub2RlLmlkLCBjYXRlZ29yeVByZWZpeCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PSB0cmVlLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgZnJhZ21lbnRzLnVuc2hpZnQoZ2V0U2l0ZUNoYW5uZWwoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJ1aWxkZXIuYWRkUGF0aChmcmFnbWVudHMpO1xuXG4gICAgICAgICAgICAgICAgaWYgKG5vZGUudHlwZSA9PSBwcm9kdWN0RGV0YWlsc1R5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgYnVpbGRlci5zZXRQYXRoKFtub2RlLm5hbWUsIG5vZGUuaWQsIHByb2R1Y3RQcmVmaXhdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBidWlsZGVyLmJ1aWxkKCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufSkoYW5ndWxhcik7XG4iLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3Bkcy5jYXRhbG9nLnNlcnZpY2UnKVxuICAgICAgICAuc2VydmljZSgnTWV0YVNlcnZpY2UnLCBNZXRhU2VydmljZSk7XG5cbiAgICBNZXRhU2VydmljZS4kaW5qZWN0ID0gWyckcm9vdFNjb3BlJywgJyRxJywgJyRsb2NhdGlvbicsICckd2luZG93JywgJ0NhdGFsb2dTZXJ2aWNlJywgJ2ltYWdlVXJsRmlsdGVyJywgJ2NvbmZpZycsICd1cmxQYXJzZXJTZXJ2aWNlJ107XG5cbiAgICB2YXIgVElUTEVfREVMSU1JVEVSID0gJyB8ICc7XG4gICAgdmFyIExPQ0FMRV9ERUxJTUlURVIgPSAnLSc7XG4gICAgdmFyIExPQ0FMRV9QUk9QRVJfREVMSU1JVEVSID0gJ18nO1xuICAgIHZhciBQQVRIX1NFUEFSQVRPUiA9ICcvJztcblxuICAgIGZ1bmN0aW9uIE1ldGFTZXJ2aWNlKCRyb290U2NvcGUsICRxLCAkbG9jYXRpb24sICR3aW5kb3csIENhdGFsb2dTZXJ2aWNlLCBpbWFnZVVybEZpbHRlciwgY29uZmlnLCB1cmxQYXJzZXJTZXJ2aWNlKSB7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHVwZGF0ZU1ldGFCeUNhdGVnb3J5OiB1cGRhdGVNZXRhQnlDYXRlZ29yeSxcbiAgICAgICAgICAgIHJlZGlyZWN0T25JbnZhbGlkVXJsOiByZWRpcmVjdE9uSW52YWxpZFVybFxuICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZU1ldGFCeUNhdGVnb3J5KGNhdGFsb2dJZCkge1xuICAgICAgICAgICAgdmFyIGV4Y2x1ZGVIcmVmbGFuZ3MgPSBmYWxzZTtcbiAgICAgICAgICAgIENhdGFsb2dTZXJ2aWNlXG4gICAgICAgICAgICAgICAgLmdldENhdGFsb2dUZW1wbGF0ZShjYXRhbG9nSWQpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGN1cnJlbnRDYXRhbG9nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBDYXRhbG9nU2VydmljZVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRyYXZlbFVwTmF2aWdhdGlvbkhpZXJhcmNoeShjYXRhbG9nSWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAodHJlZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyZWVbMF0gPSBjdXJyZW50Q2F0YWxvZztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJlZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHRyZWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHEgPSAkcS5kZWZlcigpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudE5vZGUgPSB0cmVlWzBdO1xuICAgICAgICAgICAgICAgICAgICB0cmVlWzBdLm5hbWUgPSB0cmVlWzBdLm5hbWUudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHZhciBoZWFkZXJUaXRsZSA9IFtdO1xuXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHJlZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRyZWVbaV0gJiYgdHJlZVtpXS5uYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyVGl0bGUucHVzaCh0cmVlW2ldLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlclRpdGxlLnB1c2goY29uZmlnLm1ldGFUYWdzLnNpdGVOYW1lKTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgaW1hZ2UgPSAoY3VycmVudE5vZGUua2V5VmlzdWFsIHx8IGN1cnJlbnROb2RlLnByb2R1Y3RpbWFnZSB8fCB7fSkudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHZhciBldmVudCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBoZWFkZXJUaXRsZS5qb2luKFRJVExFX0RFTElNSVRFUiksXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogKGN1cnJlbnROb2RlLnNlb01ldGFUZXh0IHx8IGN1cnJlbnROb2RlLmRlc2NyaXB0aW9uTG9uZyB8fCBjdXJyZW50Tm9kZS5kZXNjcmlwdGlvblNob3J0IHx8IHt9KS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlOiBpbWFnZSA/IGltYWdlVXJsRmlsdGVyKGltYWdlKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpdGVOYW1lOiBjb25maWcubWV0YVRhZ3Muc2l0ZU5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB3ZWJUcmVuZHM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZ19zOiB0cmVlWzBdID8gdHJlZVswXS5uYW1lIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB6X2NnMzogdHJlZVsxXSA/IHRyZWVbMV0ubmFtZSA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgel9jZzQ6IHRyZWVbMl0gPyB0cmVlWzJdLm5hbWUgOiBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgY2Fub25pY2FsVXJsOiAkbG9jYXRpb24uYWJzVXJsKClcbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIShjdXJyZW50Tm9kZS5ibG9ja0Nhbm9uaWNhbFRhZyB8fCB7fSkudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYW5vbmljYWxSZWYgPSAoY3VycmVudE5vZGUuY2Fub25pY2FsUmVmIHx8IHt9KS52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNhbm9uaWNhbFJlZikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2x1ZGVIcmVmbGFuZ3MgPSBjYW5vbmljYWxSZWYgIT0gY2F0YWxvZ0lkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENhdGFsb2dTZXJ2aWNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXNvbHZlVXJpRnJvbUhpZXJhcmNoeShjYW5vbmljYWxSZWYpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICh1cmwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LmNhbm9uaWNhbFVybCA9IHVybDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEucmVzb2x2ZShldmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxLnJlc29sdmUoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHEucHJvbWlzZTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChwYXJhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdwZHMuaGVhZGVyLnVwZGF0ZScsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChleGNsdWRlSHJlZmxhbmdzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJ2xpbmtbaHJlZmxhbmddJykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYW5ndWxhclxuICAgICAgICAgICAgICAgICAgICAgICAgLmVsZW1lbnQoJ2xpbmtbaHJlZmxhbmddJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5lYWNoKGZ1bmN0aW9uIChpbmRleCwgbGluaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsaW5rT2JqZWN0ID0gYW5ndWxhci5lbGVtZW50KGxpbmspO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsb2NhbGUgPSBsaW5rT2JqZWN0LmF0dHIoJ2hyZWZsYW5nJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxlID0gbG9jYWxlLnNwbGl0KExPQ0FMRV9ERUxJTUlURVIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENhdGFsb2dTZXJ2aWNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXNvbHZlVXJpRnJvbUhpZXJhcmNoeShjYXRhbG9nSWQsIGxvY2FsZVswXSArIExPQ0FMRV9QUk9QRVJfREVMSU1JVEVSICsgbG9jYWxlWzFdKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAodXJsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5rT2JqZWN0LmF0dHIoJ2hyZWYnLCB1cmwucmVwbGFjZSgvXFwvW2Etel17Mn1cXC9bYS16XXsyfVxcLy8sIFBBVEhfU0VQQVJBVE9SICsgbG9jYWxlWzFdLnRvTG93ZXJDYXNlKCkgKyBQQVRIX1NFUEFSQVRPUiArIGxvY2FsZVswXS50b0xvd2VyQ2FzZSgpICArIFBBVEhfU0VQQVJBVE9SKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gISF1cmw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQgfHwgbGlua09iamVjdC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHJlZGlyZWN0T25JbnZhbGlkVXJsKCkge1xuICAgICAgICAgICAgcmV0dXJuIENhdGFsb2dTZXJ2aWNlXG4gICAgICAgICAgICAgICAgLnJlc29sdmVVcmlGcm9tSGllcmFyY2h5KHVybFBhcnNlclNlcnZpY2UuZ2V0Q2F0YWxvZ0lkKCkpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHVybCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZW5jb2RlVVJJKHVybCkgIT0gVVJJKCkudG9TdHJpbmcoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdXJsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH1cbn0pKGFuZ3VsYXIpO1xuIiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdwZHMuY2F0YWxvZy5zZXJ2aWNlJylcbiAgICAgICAgLnNlcnZpY2UoJ2NhdGFsb2dTZWFyY2hMaXN0ZW5lcicsIENhdGFsb2dTZWFyY2hMaXN0ZW5lcik7XG5cbiAgICBDYXRhbG9nU2VhcmNoTGlzdGVuZXIuJGluamVjdCA9IFsnJHJvb3RTY29wZScsICckcScsICdlbnYnXTtcblxuICAgIGZ1bmN0aW9uIENhdGFsb2dTZWFyY2hMaXN0ZW5lcigkcm9vdCwgJHEsIGVudikge1xuICAgICAgICB0aGlzLmxpc3RlbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBkZWYgPSAkcS5kZWZlcigpO1xuICAgICAgICAgICAgJHJvb3QuJG9uKCdwZHMuc2VhcmNoLm5hdmlnYXRlJywgZnVuY3Rpb24gKGV2ZW50LCBwYXJhbXMpIHtcbiAgICAgICAgICAgICAgICBpZiAocGFyYW1zLnRhcmdldC5jaGFubmVsRGlzY3JpbWluYXRvciA9PSBlbnYuc2VhcmNoLnBkc0NoYW5uZWxEaXNjcmltaW5hdG9yIHx8IHBhcmFtcy50YXJnZXQucmVzb3VyY2VJZCkge1xuICAgICAgICAgICAgICAgICAgICBkZWYucmVzb2x2ZShwYXJhbXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGRlZi5wcm9taXNlO1xuICAgICAgICB9XG4gICAgfVxufSkoYW5ndWxhcik7XG4iLCIoZnVuY3Rpb24gKGFuZ3VsYXIsIFVSSSkge1xuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgncGRzLmNhdGFsb2cuc2VydmljZScpXG4gICAgICAgIC5mYWN0b3J5KCdTZW9GcmllbmRseVVybEJ1aWxkZXInLCBTZW9GcmllbmRseVVybEJ1aWxkZXJGYWN0b3J5KTtcblxuICAgIFNlb0ZyaWVuZGx5VXJsQnVpbGRlckZhY3RvcnkuJGluamVjdCA9IFsnJHdpbmRvdycsICdfJywgJ3NpbXBsaWZ5Q2hhcmFjdGVyc0ZpbHRlciddO1xuXG4gICAgdmFyIGZyYWdtZW50U2VwYXJhdG9yID0gJy0nO1xuICAgIHZhciBwYXRoU2VwYXJhdG9yID0gJy8nO1xuICAgIHZhciBvY3NCYXNlUGF0aCA9ICdvY3MnO1xuXG4gICAgZnVuY3Rpb24gU2VvRnJpZW5kbHlVcmxCdWlsZGVyRmFjdG9yeSgkd2luZG93LCBfLCBzaW1wbGlmeUNoYXJhY3RlcnNGaWx0ZXIpIHtcbiAgICAgICAgZnVuY3Rpb24gU2VvRnJpZW5kbHlVcmxCdWlsZGVyKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICAgICAgdGhpcy5vY3NCYXNlUGF0aCA9IG9wdGlvbnMub2NzQmFzZVBhdGggfHwgb2NzQmFzZVBhdGg7XG4gICAgICAgICAgICB0aGlzLnBhdGggPSB0aGlzLmJ1aWxkQmFzZVBhdGgoKTtcbiAgICAgICAgICAgIHRoaXMuc2ltcGxpZnlDaGFyYWN0ZXJzRmlsdGVyID0gc2ltcGxpZnlDaGFyYWN0ZXJzRmlsdGVyO1xuICAgICAgICB9XG5cbiAgICAgICAgU2VvRnJpZW5kbHlVcmxCdWlsZGVyLnByb3RvdHlwZS5hZGRQYXRoID0gZnVuY3Rpb24oZnJhZ21lbnRzKSB7XG4gICAgICAgICAgICBpZiAoIWZyYWdtZW50cykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGFyZ3MgPSBfLmNvbXBhY3QoW10uY29uY2F0KGZyYWdtZW50cykpO1xuICAgICAgICAgICAgdGhpcy5wYXRoICs9IHBhdGhTZXBhcmF0b3IgKyB0aGlzLnNpbXBsaWZ5Q2hhcmFjdGVyc0ZpbHRlcihhcmdzLmpvaW4oZnJhZ21lbnRTZXBhcmF0b3IpKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuXG4gICAgICAgIFNlb0ZyaWVuZGx5VXJsQnVpbGRlci5wcm90b3R5cGUuc2V0UGF0aCA9IGZ1bmN0aW9uIChmcmFnbWVudHMpIHtcbiAgICAgICAgICAgIHRoaXMucGF0aCA9IHRoaXMuYnVpbGRCYXNlUGF0aCgpO1xuICAgICAgICAgICAgdGhpcy5hZGRQYXRoKGZyYWdtZW50cyk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcblxuICAgICAgICBTZW9GcmllbmRseVVybEJ1aWxkZXIucHJvdG90eXBlLmJ1aWxkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGF0aDtcbiAgICAgICAgfTtcblxuICAgICAgICBTZW9GcmllbmRseVVybEJ1aWxkZXIucHJvdG90eXBlLmJ1aWxkQmFzZVBhdGggPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBVUkkoKS5vcmlnaW4oKSArICR3aW5kb3cuZ2V0QmFzZVBhdGgoKSArIHBhdGhTZXBhcmF0b3IgKyB0aGlzLm9jc0Jhc2VQYXRoO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBTZW9GcmllbmRseVVybEJ1aWxkZXI7XG4gICAgfVxuXG5cbn0pKGFuZ3VsYXIsIFVSSSk7XG4iLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgncGRzLmNhdGFsb2cuc2VydmljZScpXG4gICAgICAgIC5zZXJ2aWNlKCd1cmxQYXJzZXJTZXJ2aWNlJywgVXJsUGFyc2VyKTtcblxuICAgIFVybFBhcnNlci4kaW5qZWN0ID0gWydjb25maWcnXTtcblxuICAgIHZhciBjb3VudHJ5TWF0Y2hJbmRleCA9IDE7XG4gICAgdmFyIGxhbmd1YWdlTWF0Y2hJbmRleCA9IDI7XG4gICAgdmFyIHJvb3RTZWdtZW50TWF0Y2hJbmRleCA9IDM7XG4gICAgdmFyIGNhdGFsb2dJZE1hdGNoSW5kZXggPSA0O1xuXG4gICAgICAgICAgICAgICAgICAgICAgLyoqICB7MX17Mn0gICB7M30gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7NH0gICAgKiovXG4gICAgICAgICAgICAgICAgICAgICAgLyoqIC9jaC9kZS9yZXNpZGVudGlhbC5odG1sL3F3ZS9hc2QvcXdlL2FzZC9wb2l1dXktMTM0MjMzLWMgKiovXG4gICAgdmFyIHBhdGhQYXR0ZXJuID0gL15cXC8oW2Etel17Mn0pXFwvKFthLXpdezJ9KVxcLyg/Om9jc1xcLyk/KFteXFwvXSopKD86XFwuaHRtbCk/XFwvKD86LiotKFswLTldKiktW3BjXVxcLz8kKT8vaTtcbiAgICB2YXIgbGFuZ3VhZ2VQYXR0ZXJuID0gLyhcXC9bYS16XXsyfVxcLykoW2Etel17Mn0pKC4qKS9pO1xuXG4gICAgZnVuY3Rpb24gVXJsUGFyc2VyKGNvbmZpZykge1xuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICB9XG5cbiAgICBVcmxQYXJzZXIucHJvdG90eXBlLmlzT0NTID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuZ2V0Q2F0YWxvZ0lkKCk7XG4gICAgfTtcblxuICAgIFVybFBhcnNlci5wcm90b3R5cGUuZ2V0Um9vdFNlZ21lbnQgPSBmdW5jdGlvbiBnZXRSb290U2VnbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIG1hdGNoRm9ySW5kZXgocm9vdFNlZ21lbnRNYXRjaEluZGV4KSB8fCB0aGlzLmNvbmZpZy5tZXRhVGFncy5zaXRlTmFtZTtcbiAgICB9O1xuXG4gICAgVXJsUGFyc2VyLnByb3RvdHlwZS5nZXRDYXRhbG9nSWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBtYXRjaEZvckluZGV4KGNhdGFsb2dJZE1hdGNoSW5kZXgpO1xuICAgIH07XG5cbiAgICBVcmxQYXJzZXIucHJvdG90eXBlLmdldExhbmd1YWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbWF0Y2hGb3JJbmRleChsYW5ndWFnZU1hdGNoSW5kZXgpO1xuICAgIH07XG5cbiAgICBVcmxQYXJzZXIucHJvdG90eXBlLnNldExhbmd1YWdlID0gZnVuY3Rpb24gKHVybCwgbGFuZ3VhZ2UpIHtcbiAgICAgICAgdmFyIHVyaSA9IG5ldyBVUkkodXJsKTtcbiAgICAgICAgdXJpLnBhdGgodXJpLnBhdGgoKS5yZXBsYWNlKGxhbmd1YWdlUGF0dGVybiwgJyQxJyArIGxhbmd1YWdlICsgJyQzJykpO1xuICAgICAgICByZXR1cm4gdXJpLnRvU3RyaW5nKCk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIG1hdGNoRm9ySW5kZXgoaW5kZXgpIHtcbiAgICAgICAgdmFyIG1hdGNoID0gbmV3IFVSSSgpLnBhdGgoKS5tYXRjaChwYXRoUGF0dGVybik7XG4gICAgICAgIHJldHVybiBtYXRjaCAmJiBtYXRjaFtpbmRleF07XG4gICAgfVxuXG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbihhbmd1bGFyKSB7XG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKFwicGRzLm5hdmlnYXRpb24uc2VydmljZVwiKVxuXHRcdC5zZXJ2aWNlKFwiTWVudVNlcnZpY2VcIiwgTWVudVNlcnZpY2UpO1xuXG5cdE1lbnVTZXJ2aWNlLiRpbmplY3QgPSBbJ18nLCAnTmF2aWdhdGlvbicsICdsb2NhbGUnLCAnJHEnXTtcblxuXHRmdW5jdGlvbiBNZW51U2VydmljZShfLCBOYXZpZ2F0aW9uLCBsb2NhbGUsICRxKSB7XG4gICAgICAgIHZhciBOQVZJR0FUSU9OX1RFTVBMQVRFX05BTUUgPSAnQ0FUQUxPR19ISUVSQVJDSFknO1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHNlbGYuY3VycmVudExvY2FsZSA9IGxvY2FsZS50b1N0cmluZygpO1xuICAgICAgICBzZWxmLmZsYXROYXZpZ2F0aW9uID0ge307XG4gICAgICAgIHNlbGYuZ2V0TWVudSA9IGdldE1lbnU7XG4gICAgICAgIHNlbGYuZmluZEluTmF2aWdhdGlvbiA9IGZpbmRJbk5hdmlnYXRpb247XG4gICAgICAgIHNlbGYuZmluZFBhcmVudEluTmF2aWdhdGlvbiA9IGZpbmRQYXJlbnRJbk5hdmlnYXRpb247XG5cblx0XHRmdW5jdGlvbiBnZXRNZW51KGxvY2FsZSkge1xuICAgICAgICAgICAgdmFyIHByb3BlckxvY2FsZSA9IGxvY2FsZSB8fCBzZWxmLmN1cnJlbnRMb2NhbGU7XG4gICAgICAgICAgICB2YXIgbmF2ID0gbmV3IE5hdmlnYXRpb24oe1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IE5BVklHQVRJT05fVEVNUExBVEVfTkFNRSxcbiAgICAgICAgICAgICAgICAgICAgY2hhbm5lbDogZ2V0T0NTQ2hhbm5lbCgpXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBtb2RlbDoge1xuICAgICAgICAgICAgICAgICAgICBsb2NhbGU6IHByb3BlckxvY2FsZSxcbiAgICAgICAgICAgICAgICAgICAgY2hhbm5lbDogZ2V0T0NTQ2hhbm5lbCgpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cdFx0XHRyZXR1cm4gTmF2aWdhdGlvblxuICAgICAgICAgICAgICAgIC5nZXQoe3F1ZXJ5OiBuYXZ9KVxuICAgICAgICAgICAgICAgIC4kcHJvbWlzZVxuXHRcdFx0XHQudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmKCFyZXMucm9vdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlcy5yb290LmNoaWxkcmVuWzBdLm1heE5hdmlnYXRpb25JdGVtcyA9IHJlcy5yb290Lm1heE5hdmlnYXRpb25JdGVtcztcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5yb290LmNoaWxkcmVuWzBdO1xuXHRcdFx0XHR9KVxuXHRcdH1cblxuXG4gICAgICAgIGZ1bmN0aW9uIGdldE9DU0NoYW5uZWwoKSB7XG4gICAgICAgICAgICByZXR1cm4gYW5ndWxhci5lbGVtZW50KCdtZXRhW25hbWU9XCJvY3MtY2hhbm5lbFwiXScpLmF0dHIoJ2NvbnRlbnQnKVxuICAgICAgICB9XG5cblx0XHRmdW5jdGlvbiBnZXRGbGF0TWVudShsb2NhbGUpIHtcbiAgICAgICAgICAgIHJldHVybiBnZXRNZW51KGxvY2FsZSlcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAobWVudSkge1xuICAgICAgICAgICAgICAgICAgICBsb2NhbGUgPSBsb2NhbGUgfHwgc2VsZi5jdXJyZW50TG9jYWxlO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmZsYXROYXZpZ2F0aW9uW2xvY2FsZV0gPSBzZWxmLmZsYXROYXZpZ2F0aW9uW2xvY2FsZV0gfHwgZmxhdE1lbnUobWVudSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLmZsYXROYXZpZ2F0aW9uW2xvY2FsZV07XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGZsYXRNZW51KG1lbnUsIGZsYXQpIHtcbiAgICAgICAgICAgIGZsYXQgPSBmbGF0IHx8IFtdO1xuICAgICAgICAgICAgZmxhdC5wdXNoKG1lbnUpO1xuICAgICAgICAgICAgXy5lYWNoKG1lbnUuY2hpbGRyZW4sIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgZmxhdE1lbnUoaXRlbSwgZmxhdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBmbGF0O1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZmluZEluTmF2aWdhdGlvbihpZCwgbG9jYWxlKSB7XG4gICAgICAgICAgICByZXR1cm4gZ2V0RmxhdE1lbnUobG9jYWxlKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGZsYXQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF8uZmluZChmbGF0LCB7aWQ6IFN0cmluZyhpZCl9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGZpbmRQYXJlbnRJbk5hdmlnYXRpb24oY2hpbGRJZCwgbG9jYWxlKSB7XG4gICAgICAgICAgICByZXR1cm4gXy5maW5kKHNlbGYuZmxhdE5hdmlnYXRpb25bbG9jYWxlIHx8IHNlbGYuY3VycmVudExvY2FsZV0sIGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gISFfLmZpbmQodmFsLmNoaWxkcmVuLCB7aWQ6IGNoaWxkSWR9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cdH1cblxufSkoYW5ndWxhcik7XG4iLCIoZnVuY3Rpb24oYW5ndWxhcikge1xuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgncGRzLm5hdmlnYXRpb24ubW9kZWwnKVxuICAgICAgICAuY29uZmlnKE5hdmlnYXRpb25Db25maWcpO1xuXG4gICAgTmF2aWdhdGlvbkNvbmZpZy4kaW5qZWN0ID0gWydlbnYnLCAnTmF2aWdhdGlvblByb3ZpZGVyJ107XG5cbiAgICBmdW5jdGlvbiBOYXZpZ2F0aW9uQ29uZmlnKGVudiwgTmF2aWdhdGlvblByb3ZpZGVyKSB7XG4gICAgICAgIE5hdmlnYXRpb25Qcm92aWRlci5uYXZpZ2F0aW9uRW5kcG9pbnQoZW52LmVuZFBvaW50LmNvbnRlbnRTZXJ2aWNlKTtcbiAgICB9XG5cbn0pKGFuZ3VsYXIpO1xuIiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdwZHMubmF2aWdhdGlvbi5tb2RlbCcpXG4gICAgICAgIC5wcm92aWRlcignTmF2aWdhdGlvbicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB1cmwgPSBudWxsO1xuXG4gICAgICAgICAgICB0aGlzLm5hdmlnYXRpb25FbmRwb2ludCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHVybCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy4kZ2V0ID0gWyckcmVzb3VyY2UnLCAnJGNhY2hlRmFjdG9yeScsIGZ1bmN0aW9uICgkcmVzb3VyY2UsICRjYWNoZUZhY3RvcnkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE5hdmlnYXRpb24oJHJlc291cmNlLCAkY2FjaGVGYWN0b3J5LCB1cmwpO1xuICAgICAgICAgICAgfV1cbiAgICAgICAgfSk7XG5cbiAgICBmdW5jdGlvbiBOYXZpZ2F0aW9uKCRyZXNvdXJjZSwgJGNhY2hlRmFjdG9yeSwgdXJsKSB7XG4gICAgICAgIHZhciBjYXRhbG9nQ2FjaGUgPSAkY2FjaGVGYWN0b3J5KFwibmF2aWdhdGlvblwiKTtcbiAgICAgICAgdmFyIG1ldGhvZHMgPSB7XG4gICAgICAgICAgICBnZXQ6IHttZXRob2Q6ICdHRVQnLCBjYWNoZTogY2F0YWxvZ0NhY2hlfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gJHJlc291cmNlKHVybCArICdyZXN0L2RvY3VtZW50L2Rpc3BsYXknLCBudWxsLCBtZXRob2RzKTtcbiAgICB9XG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgncGRzLnNlYXJjaC5kaXJlY3RpdmUnKVxuICAgICAgICAuZGlyZWN0aXZlKCdhY3RpdmVTZWFyY2gnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgICAgICAgICBsaW5rOiBsaW5rXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG5cbiAgICAgICAgICAgIGVsZW1lbnRcbiAgICAgICAgICAgICAgICAub24oJ2ZvY3VzJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ3NlYXJjaC1hY3RpdmUnKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5vbignYmx1cicsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdzZWFyY2gtYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI2pzLXNob3ctaGVhZGVyLXNlYXJjaCcpXG4gICAgICAgICAgICAgICAgLm9uKCdjbGljaycsICdhJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnRyaWdnZXIoJ2ZvY3VzJyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxufSkoYW5ndWxhcik7XG4iLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3Bkcy5zZWFyY2guZGlyZWN0aXZlJylcbiAgICAgICAgLmNvbXBvbmVudCgnb2NzUXVpY2tTZWFyY2gnLCB7XG4gICAgICAgICAgICB0ZW1wbGF0ZTogIFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAkdGVtcGxhdGVDYWNoZS5nZXQoJ2NvbXBvbmVudC9xdWlja19zZWFyY2guaHRtbCcpXG4gICAgICAgICAgICB9XSxcbiAgICAgICAgICAgIHRyYW5zY2x1ZGU6IHRydWUsXG4gICAgICAgICAgICBjb250cm9sbGVyOiBvY3NRdWlja1NlYXJjaENvbnRyb2xsZXJcbiAgICAgICAgfSk7XG5cbiAgICBvY3NRdWlja1NlYXJjaENvbnRyb2xsZXIuJGluamVjdCA9IFsnXycsICckbG9jYXRpb24nLCAnJHN0YXRlJywgJyRyb290U2NvcGUnLCAnU2VhcmNoU2VydmljZScsICckd2luZG93J107XG5cbiAgICBmdW5jdGlvbiBvY3NRdWlja1NlYXJjaENvbnRyb2xsZXIoXywgJGxvY2F0aW9uLCAkc3RhdGUsICRyb290U2NvcGUsIFNlYXJjaFNlcnZpY2UsICR3aW5kb3cpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIHNlbGYuc3VnZ2VzdCA9IF8udGhyb3R0bGUoc3VnZ2VzdCwgMjAwKTtcbiAgICAgICAgc2VsZi5nb1RvID0gZ29UbztcbiAgICAgICAgc2VsZi5kb1NlYXJjaCA9IGRvU2VhcmNoO1xuXG4gICAgICAgIC8vRklYTUUgYSBoYWNrIHRvIHByb2NlZWQgdG8gc3RhdGUgYHNlYXJjaGAgYWZ0ZXIgZW50ZXJpbmcgc2VhcmNoLmh0bWxcbiAgICAgICAgdmFyIHBhdGggPSAkbG9jYXRpb24ucGF0aCgpO1xuICAgICAgICBpZiAocGF0aCAmJiBwYXRoLmluZGV4T2YoJ3NlYXJjaC5odG1sJykgPiAtMSAmJiAhJHN0YXRlLmlzKCdzZWFyY2gnKSkge1xuICAgICAgICAgICAgJHN0YXRlLmdvKCdzZWFyY2gnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHN1Z2dlc3QoKSB7XG4gICAgICAgICAgICByZXR1cm4gU2VhcmNoU2VydmljZVxuICAgICAgICAgICAgICAgIC5zdWdnZXN0KHNlbGYucXVpY2tzZWFyY2gpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5hdXRvc3VnZ2VzdCA9IGRhdGE7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnb1RvKHRhcmdldCkge1xuICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdwZHMuc2VhcmNoLm5hdmlnYXRlJywge3RhcmdldDogdGFyZ2V0fSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBkb1NlYXJjaCgkaXRlbSkge1xuICAgICAgICAgICAgaWYgKCEkaXRlbSB8fCAkaXRlbS53aGljaCA9PT0gMTMpIHtcbiAgICAgICAgICAgICAgICAkd2luZG93Lm5hdmlnYXRlKCdzZWFyY2guaHRtbD90ZXJtcz0nICsgc2VsZi5xdWlja3NlYXJjaCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgncGRzLnNlYXJjaC5kaXJlY3RpdmUnKVxuICAgICAgICAuY29tcG9uZW50KCdvY3NTZWFyY2gnLCB7XG4gICAgICAgICAgICB0ZW1wbGF0ZTogIFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAkdGVtcGxhdGVDYWNoZS5nZXQoJ2NvbXBvbmVudC9zZWFyY2guaHRtbCcpXG4gICAgICAgICAgICB9XSxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IG9jc1NlYXJjaENvbnRyb2xsZXJcbiAgICAgICAgfSk7XG5cbiAgICBvY3NTZWFyY2hDb250cm9sbGVyLiRpbmplY3QgPSBbJyRhbmNob3JTY3JvbGwnLCAnU2VhcmNoU2VydmljZScsICdjbXNTZWFyY2hMaXN0ZW5lcicsICckcm9vdFNjb3BlJywgJyRsb2NhdGlvbicsICckd2luZG93JywgJ18nLCAndHJhbnNsYXRlRmlsdGVyJ107XG5cbiAgICBmdW5jdGlvbiBvY3NTZWFyY2hDb250cm9sbGVyKCRhbmNob3JTY3JvbGwsIFNlYXJjaFNlcnZpY2UsIGNtc1NlYXJjaExpc3RlbmVyLCAkcm9vdFNjb3BlLCAkbG9jYXRpb24sICR3aW5kb3csIF8sIHRyYW5zbGF0ZUZpbHRlcikge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgc2VsZi5maW5hbFNlYXJjaFJlc3VsdHMgPSBbXTtcbiAgICAgICAgc2VsZi5zZWFyY2hUZXJtID0gJGxvY2F0aW9uLnNlYXJjaCgpLnRlcm1zO1xuICAgICAgICBzZWxmLmNvbnRhY3RUZXh0ID0gdHJhbnNsYXRlRmlsdGVyKCdTRUFSQ0guTk8uUkVTVUxULkNIRUNLTElTVC4zJywge2NvbnRhY3RMaW5rOiBcIjxhIGhyZWY9J1wiICsgdHJhbnNsYXRlRmlsdGVyKCdTRUFSQ0guQ09OVEFDVC5VUkwnKSArIFwiJyBjbGFzcz0nbGluay1pbmxpbmUnIHRhcmdldD0nX3NlbGYnPlwiICsgdHJhbnNsYXRlRmlsdGVyKCdTRUFSQ0guQ09OVEFDVCcpICsgXCI8L2E+XCJ9KTtcbiAgICAgICAgc2VsZi5vblNlYXJjaElucHV0ID0gb25TZWFyY2hJbnB1dDtcbiAgICAgICAgc2VsZi5nb1RvQW5jaG9yID0gZ29Ub0FuY2hvcjtcbiAgICAgICAgc2VsZi5nb01vcmUgPSBnb01vcmU7XG5cbiAgICAgICAgY21zU2VhcmNoTGlzdGVuZXJcbiAgICAgICAgICAgIC5saXN0ZW4oKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHBhcmFtKSB7XG4gICAgICAgICAgICAgICAgJHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gcGFyYW0udGFyZ2V0LnJlc291cmNlTG9jYXRpb247XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgc2VhcmNoKCk7XG5cbiAgICAgICAgZnVuY3Rpb24gc2VhcmNoKCkge1xuICAgICAgICAgICAgaWYgKCFzZWxmLnNlYXJjaFRlcm0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZWxmLnRvdGFsTGVuZ3RoID0gZmFsc2U7XG4gICAgICAgICAgICAkbG9jYXRpb24uc2VhcmNoKCd0ZXJtcycsIHNlbGYuc2VhcmNoVGVybSk7XG5cbiAgICAgICAgICAgIHJldHVybiBTZWFyY2hTZXJ2aWNlXG4gICAgICAgICAgICAgICAgLnNlYXJjaChzZWxmLnNlYXJjaFRlcm0pXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLnRvdGFsTGVuZ3RoID0gZGF0YS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZmluYWxTZWFyY2hSZXN1bHRzID0gXy5ncm91cEJ5KGRhdGEsICdjaGFubmVsRGlzY3JpbWluYXRvcicpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gb25TZWFyY2hJbnB1dChrZXlFdmVudCkge1xuICAgICAgICAgICAgaWYgKGtleUV2ZW50LndoaWNoID09PSAxMykge1xuICAgICAgICAgICAgICAgIHNlYXJjaCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ29Ub0FuY2hvcihpZFRvR28pIHtcbiAgICAgICAgICAgICRsb2NhdGlvbi5oYXNoKGlkVG9Hbyk7XG4gICAgICAgICAgICAkYW5jaG9yU2Nyb2xsLnlPZmZzZXQgPSA4MDtcbiAgICAgICAgICAgICRhbmNob3JTY3JvbGwoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdvTW9yZShwYXJhbSkge1xuICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdwZHMuc2VhcmNoLm5hdmlnYXRlJywge3RhcmdldDogcGFyYW19KTtcbiAgICAgICAgfVxuXG4gICAgfVxufSkoYW5ndWxhcik7XG4iLCIoZnVuY3Rpb24oYW5ndWxhcikge1xuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgncGRzLnNlYXJjaC5yb3V0ZScpXG4gICAgICAgIC5jb25maWcoUm91dGVDb25maWcpO1xuXG4gICAgUm91dGVDb25maWcuJGluamVjdCA9IFsnJHN0YXRlUHJvdmlkZXInXTtcblxuICAgIGZ1bmN0aW9uIFJvdXRlQ29uZmlnKCRzdGF0ZVByb3ZpZGVyKSB7XG4gICAgICAgICRzdGF0ZVByb3ZpZGVyLnBkc1JvdXRlKHtcbiAgICAgICAgICAgIG5hbWU6ICdzZWFyY2gnLFxuICAgICAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgdGVybXM6IG51bGxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB1cmw6ICdzZWFyY2guaHRtbCcsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NlYXJjaC5odG1sJ1xuICAgICAgICB9KTtcbiAgICB9XG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbihhbmd1bGFyKSB7XG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdwZHMuc2VhcmNoLm1vZGVsJylcbiAgICAgICAgLmNvbmZpZyhTZWFyY2hQcm92aWRlcik7XG5cbiAgICBTZWFyY2hQcm92aWRlci4kaW5qZWN0ID0gWydlbnYnLCAnU2VhcmNoUHJvdmlkZXInXTtcblxuICAgIGZ1bmN0aW9uIFNlYXJjaFByb3ZpZGVyKGVudiwgU2VhcmNoUHJvdmlkZXIpIHtcbiAgICAgICAgU2VhcmNoUHJvdmlkZXIuc2VhcmNoRW5kcG9pbnQoZW52LmVuZFBvaW50LnNlYXJjaFNlcnZpY2UpO1xuICAgIH1cblxufSkoYW5ndWxhcik7XG4iLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3Bkcy5zZWFyY2gubW9kZWwnKVxuICAgICAgICAucHJvdmlkZXIoJ1NlYXJjaCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB1cmwgPSBudWxsO1xuXG4gICAgICAgICAgICB0aGlzLnNlYXJjaEVuZHBvaW50ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdXJsID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGlzLiRnZXQgPSBbJyRyZXNvdXJjZScsICdsb2NhbGUnLCBmdW5jdGlvbiAoJHJlc291cmNlLCBsb2NhbGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFNlYXJjaCgkcmVzb3VyY2UsIGxvY2FsZSwgdXJsKTtcbiAgICAgICAgICAgIH1dO1xuICAgICAgICB9KTtcblxuICAgIGZ1bmN0aW9uIFNlYXJjaCgkcmVzb3VyY2UsIGxvY2FsZSwgdXJsKSB7XG4gICAgICAgIHZhciBtZXRob2RzID0ge1xuICAgICAgICAgICAgbG9jYWxpemU6IHttZXRob2Q6ICdHRVQnLCBpc0FycmF5OiB0cnVlLCBwYXJhbXM6IHt0eXBlOiAnbG9jYWxpemUnfX1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuICRyZXNvdXJjZSh1cmwgKyAncmVzb3VyY2UvOnR5cGUvOmxvY2FsZScsIHtsb2NhbGU6IGxvY2FsZX0sIG1ldGhvZHMpO1xuICAgIH1cbn0pKGFuZ3VsYXIpO1xuIiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdwZHMuc2VhcmNoLnNlcnZpY2UnKVxuICAgICAgICAuc2VydmljZSgnY21zU2VhcmNoTGlzdGVuZXInLCBDbXNTZWFyY2hMaXN0ZW5lcik7XG5cbiAgICBDbXNTZWFyY2hMaXN0ZW5lci4kaW5qZWN0ID0gWyckcm9vdFNjb3BlJywgJyRxJywgJ2NvbmZpZyddO1xuXG4gICAgZnVuY3Rpb24gQ21zU2VhcmNoTGlzdGVuZXIoJHJvb3QsICRxLCBjb25maWcpIHtcbiAgICAgICAgdGhpcy5saXN0ZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZGVmID0gJHEuZGVmZXIoKTtcbiAgICAgICAgICAgICRyb290LiRvbigncGRzLnNlYXJjaC5uYXZpZ2F0ZScsIGZ1bmN0aW9uIChldmVudCwgcGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEhcGFyYW1zLnRhcmdldC5yZXNvdXJjZUxvY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlZi5yZXNvbHZlKHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gZGVmLnByb21pc2U7XG4gICAgICAgIH1cbiAgICB9XG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbihhbmd1bGFyKSB7XG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKFwicGRzLnNlYXJjaC5zZXJ2aWNlXCIpXG5cdFx0LnNlcnZpY2UoXCJTZWFyY2hTZXJ2aWNlXCIsIFNlYXJjaFNlcnZpY2UpO1xuXG5cdFNlYXJjaFNlcnZpY2UuJGluamVjdCA9IFsnJHEnLCAnU2VhcmNoJywgJ2xvY2FsZSddO1xuXG4gICAgdmFyIE1JTl9BVVRPU1VHR0VTVF9URVJNX0xFTkdUSCA9IDI7XG5cbiAgICBmdW5jdGlvbiBTZWFyY2hTZXJ2aWNlKCRxLCBTZWFyY2gsIGxvY2FsZSkge1xuXHRcdHJldHVybiB7XG5cdFx0XHRzZWFyY2g6IHNlYXJjaCxcblx0XHRcdHN1Z2dlc3Q6IHN1Z2dlc3Rcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gc2VhcmNoKHNlYXJjaCkge1xuXHRcdFx0cmV0dXJuIFNlYXJjaC5xdWVyeSh7bG9jYWxlOiBsb2NhbGUsIHNlYXJjaFRlcm06IHNlYXJjaH0pLiRwcm9taXNlO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHN1Z2dlc3Qoc2VhcmNoVGVybSkge1xuICAgICAgICAgICAgaWYgKHNlYXJjaFRlcm0gJiYgc2VhcmNoVGVybS5sZW5ndGggPiBNSU5fQVVUT1NVR0dFU1RfVEVSTV9MRU5HVEgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gU2VhcmNoLmxvY2FsaXplKHtsb2NhbGU6IGxvY2FsZSwgc2VhcmNoVGVybTogc2VhcmNoVGVybX0pLiRwcm9taXNlO1xuICAgICAgICAgICAgfVxuXHRcdFx0cmV0dXJuICRxLnJlc29sdmUoW10pO1xuXHRcdH1cblxuXHR9XG5cbn0pKGFuZ3VsYXIpO1xuIl19
